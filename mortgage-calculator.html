<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finguid - Advanced Mortgage Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Design System Integration */
        :root {
            /* Primitive Color Tokens */
            --color-white: rgba(255, 255, 255, 1);
            --color-black: rgba(0, 0, 0, 1);
            --color-cream-50: rgba(252, 252, 249, 1);
            --color-cream-100: rgba(255, 255, 253, 1);
            --color-gray-200: rgba(245, 245, 245, 1);
            --color-gray-300: rgba(167, 169, 169, 1);
            --color-gray-400: rgba(119, 124, 124, 1);
            --color-slate-500: rgba(98, 108, 113, 1);
            --color-brown-600: rgba(94, 82, 64, 1);
            --color-charcoal-700: rgba(31, 33, 33, 1);
            --color-charcoal-800: rgba(38, 40, 40, 1);
            --color-slate-900: rgba(19, 52, 59, 1);
            --color-teal-300: rgba(50, 184, 198, 1);
            --color-teal-400: rgba(45, 166, 178, 1);
            --color-teal-500: rgba(33, 128, 141, 1);
            --color-teal-600: rgba(29, 116, 128, 1);
            --color-teal-700: rgba(26, 104, 115, 1);
            --color-teal-800: rgba(41, 150, 161, 1);
            --color-red-400: rgba(255, 84, 89, 1);
            --color-red-500: rgba(192, 21, 47, 1);
            --color-orange-400: rgba(230, 129, 97, 1);
            --color-orange-500: rgba(168, 75, 47, 1);

            /* RGB versions for opacity control */
            --color-brown-600-rgb: 94, 82, 64;
            --color-teal-500-rgb: 33, 128, 141;
            --color-slate-900-rgb: 19, 52, 59;
            --color-slate-500-rgb: 98, 108, 113;
            --color-red-500-rgb: 192, 21, 47;
            --color-red-400-rgb: 255, 84, 89;
            --color-orange-500-rgb: 168, 75, 47;
            --color-orange-400-rgb: 230, 129, 97;

            /* Background color tokens (Light Mode) */
            --color-bg-1: rgba(59, 130, 246, 0.08);
            --color-bg-2: rgba(245, 158, 11, 0.08);
            --color-bg-3: rgba(34, 197, 94, 0.08);
            --color-bg-4: rgba(239, 68, 68, 0.08);
            --color-bg-5: rgba(147, 51, 234, 0.08);
            --color-bg-6: rgba(249, 115, 22, 0.08);
            --color-bg-7: rgba(236, 72, 153, 0.08);
            --color-bg-8: rgba(6, 182, 212, 0.08);

            /* Semantic Color Tokens (Light Mode) */
            --color-background: var(--color-cream-50);
            --color-surface: var(--color-cream-100);
            --color-text: var(--color-slate-900);
            --color-text-secondary: var(--color-slate-500);
            --color-primary: var(--color-teal-500);
            --color-primary-hover: var(--color-teal-600);
            --color-primary-active: var(--color-teal-700);
            --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
            --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
            --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
            --color-border: rgba(var(--color-brown-600-rgb), 0.2);
            --color-btn-primary-text: var(--color-cream-50);
            --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
            --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
            --color-error: var(--color-red-500);
            --color-success: var(--color-teal-500);
            --color-warning: var(--color-orange-500);
            --color-info: var(--color-slate-500);
            --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
            --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

            /* Common style patterns */
            --focus-ring: 0 0 0 3px var(--color-focus-ring);
            --focus-outline: 2px solid var(--color-primary);
            --status-bg-opacity: 0.15;
            --status-border-opacity: 0.25;
            --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

            /* RGB versions for opacity control */
            --color-success-rgb: 33, 128, 141;
            --color-error-rgb: 192, 21, 47;
            --color-warning-rgb: 168, 75, 47;
            --color-info-rgb: 98, 108, 113;

            /* Typography */
            --font-family-base: "FKGroteskNeue", "Geist", "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            --font-family-mono: "Berkeley Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
            --font-size-xs: 11px;
            --font-size-sm: 12px;
            --font-size-base: 14px;
            --font-size-md: 14px;
            --font-size-lg: 16px;
            --font-size-xl: 18px;
            --font-size-2xl: 20px;
            --font-size-3xl: 24px;
            --font-size-4xl: 30px;
            --font-weight-normal: 400;
            --font-weight-medium: 500;
            --font-weight-semibold: 550;
            --font-weight-bold: 600;
            --line-height-tight: 1.2;
            --line-height-normal: 1.5;
            --letter-spacing-tight: -0.01em;

            /* Spacing */
            --space-0: 0;
            --space-1: 1px;
            --space-2: 2px;
            --space-4: 4px;
            --space-6: 6px;
            --space-8: 8px;
            --space-10: 10px;
            --space-12: 12px;
            --space-16: 16px;
            --space-20: 20px;
            --space-24: 24px;
            --space-32: 32px;

            /* Border Radius */
            --radius-sm: 6px;
            --radius-base: 8px;
            --radius-md: 10px;
            --radius-lg: 12px;
            --radius-full: 9999px;

            /* Shadows */
            --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04), 0 2px 4px -1px rgba(0, 0, 0, 0.02);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04), 0 4px 6px -2px rgba(0, 0, 0, 0.02);
            --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.15), inset 0 -1px 0 rgba(0, 0, 0, 0.03);

            /* Animation */
            --duration-fast: 150ms;
            --duration-normal: 250ms;
            --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);

            /* Layout */
            --container-sm: 640px;
            --container-md: 768px;
            --container-lg: 1024px;
            --container-xl: 1280px;
        }

        /* Dark mode colors */
        @media (prefers-color-scheme: dark) {
            :root {
                /* RGB versions for opacity control (Dark Mode) */
                --color-gray-400-rgb: 119, 124, 124;
                --color-teal-300-rgb: 50, 184, 198;
                --color-gray-300-rgb: 167, 169, 169;
                --color-gray-200-rgb: 245, 245, 245;

                /* Background color tokens (Dark Mode) */
                --color-bg-1: rgba(29, 78, 216, 0.15);
                --color-bg-2: rgba(180, 83, 9, 0.15);
                --color-bg-3: rgba(21, 128, 61, 0.15);
                --color-bg-4: rgba(185, 28, 28, 0.15);
                --color-bg-5: rgba(107, 33, 168, 极速赛车开奖结果记录*/
                --color-bg-6: rgba(194, 65, 12, 0.15);
                --color-bg-7: rgba(190, 24, 93, 0.15);
                --color-b极速赛车开奖结果记录*/
                
                /* Semantic Color Tokens (Dark Mode) */
                --color-background: var(--color-charcoal-700);
                --color-surface: var(--color-charcoal-800);
                --color-text: var(--color-gray-200);
                --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
                --color-primary: var(--color-teal-300);
                --color-primary-hover: var(--color-teal-400);
                --color-primary-active: var(--color-teal-800);
                --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
                --color-secondary极速赛车开奖结果记录*/
                --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
                --color-border: rgba(var(--color-gray-400-rgb), 0.3);
                --color-error: var(--color-red-400);
                --color-success: var(--color-teal-300);
                --color-warning: var(--color-orange-400);
                --color-info: var(--color-gray-300);
                --color-focus-ring: rgba(var(--极速赛车开奖结果记录*/
                --color-btn-primary-text: var(--color-slate-900);
                --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
                --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
                --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1), inset 0 -1px 0 rgba(0, 0, 0, 0.15);
                --button-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
                --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
                --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

                /* Common style patterns - updated for dark mode */
                --focus-ring: 0 0 0 3px var(--color-focus-ring);
                --focus-outline: 2px solid var(--color-primary);
                --status-bg-opacity: 0.15;
                --status-border-opacity: 0.25;
                --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 极速赛车开奖结果记录*/
                --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3极速赛车开奖结果记录*/

                /* RGB versions for dark mode */
                --color-success-rgb: var(--color-teal-300-rgb);
                --color-error-rgb: var(--color-red-400-rgb);
                --color-warning-rgb: var(--color-orange-400-rgb);
                --color-info-rgb: var(--color-gray-300-rgb);
            }
        }

        /* Data attribute for manual theme switching */
        [data-color-scheme="dark"] {
            /* RGB versions for opacity control (dark mode) */
            --color-gray-400-rgb: 119, 124, 124;
            --color-teal-300极速赛车开奖结果记录*/
            --color-gray-300-rgb: 167, 169, 169;
            --color-gray-200-rgb: 245, 245, 245;

            /* Colorful background palette - Dark Mode */
            --color-bg-1: rgba(29, 78, 216, 0.15);
            --color-bg-2: rgba(180, 83, 9, 0.15);
            --color-bg-3: rgba(21, 128, 61, 0.15);
            --color-bg-4: rgba(185, 28, 28, 0.15);
            --color-bg-5: rgba(107, 33, 168, 0.15);
            --color-bg-6: rgba(194, 65, 12, 0.15);
            --color-bg-7: rgba(190, 24, 93, 0.15);
            --color-bg-8: rgba(8, 145, 178, 0.15);
            
            /* Semantic Color Tokens (Dark Mode) */
            --color-background: var(--color-charcoal-700);
            --color-surface: var(--color-charcoal-800);
            --color-text: var(--color-gray-200);
            --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
            --color-primary: var(--color-teal-300);
            --color-primary-hover: var(--color-te极速赛车开奖结果记录*/
            --color-primary-active: var(--color-teal-800);
            --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
            --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
            --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
            --color-border: rgba(var(--color-gray-400-rgb), 0.3);
            --极速赛车开奖结果记录*/
            --color-success: var(--color-teal-300);
            --color-warning: var(--color-orange-400);
            --color-info: var(--color-gray-300);
            --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
            --color-btn-primary-text: var(--color-slate-900);
            --color-card-border: rgba(var(--color-gray-400-rgb), 0.15);
            --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
            --shadow-inset极速赛车开奖结果记录*/
                inset 0 -1px 极速赛车开奖结果记录*/
            --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
            --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

            /* Common style patterns - updated for dark mode */
            --focus-ring: 0 0 0 3极速赛车开奖结果记录*/
            --focus-outline: 2px solid var(--color-primary);
            --status-bg-opacity: 0.15;
            --status-border-opacity: 0.25;
            --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 极速赛车开奖结果记录*/
            --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

            /* RGB versions for dark mode */
            --color-success-rgb: var(--color-teal-300-rgb);
            --color-error-rgb: var(--color-red-400-rgb);
            --color-warning-rgb: var(--color-orange-400-rgb);
            --color-info-rgb: var(--color-gray-300-rgb);
        }

        [data-color-scheme="light"] {
            /* RGB versions for opacity control (light mode) */
            --color-brown-600-rgb: 94, 82, 64;
            --color-teal-500-rgb: 33, 128, 141;
            --color-slate-900-rgb: 19, 52, 59;
            
            /* Semantic Color Tokens (Light Mode) */
            --color-background: var(--color-cream-50);
            --color-surface: var(--color-cream-100);
            --color-text: var(--color-slate-900);
            --color-text-secondary: var(--color-slate-500);
            --color-primary: var(--color-teal-500);
            --color-primary-hover: var(--color-teal-600);
            --color-primary-active: var(--color-teal-700);
            --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
            --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
            --color-secondary-active: rgba(var(--color-brown-600-rgb), 极速赛车开奖结果记录*/
            --color-border: rgba(var(--color-brown-600-rgb), 0.2);
            --color-btn-primary-text: var(--color-cream-50);
            --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
            --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
            --color-error: var(--color-red-500);
            --color-success: var(--color-teal-500);
            --color-warning: var(--color-orange-500);
            --color-info: var(--color-slate-500);
            --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);

            /* RGB versions for light mode */
            --color-success-rgb: var(--color-teal-500-rgb);
            --color-error-rgb: var(--color-red-500-rgb);
            --color-warning-rgb: var(--color-orange-500-rgb);
            --color-info-rgb: var(--极速赛车开奖结果记录*/
        }

        /* Base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: var(--font-size-base);
            font-family: var(--font-family-base);
            line-height: var(--line-height-normal);
            color: var(--color-text);
            background-color: var(--color-background);
            -webkit-font-smoothing: antialiased;
        }

        body {
            font-family: var(--font-family-base);
            line-height: var(--line-height-normal);
            color: var(--color-text);
            background-color: var(--color-background);
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: var(--container-xl);
            margin: 0 auto;
            padding: 0 var(--space-20);
        }

        /* ===== NAVIGATION ===== */
        .header {
            background: var(--color-surface);
            box-shadow: var(--shadow-sm);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }

        .navbar {
            padding: var(--space-16) 0;
        }

        .navbar .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-brand {
            display: flex;
            align-items: center;
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-bold);
            color: var(--color-primary);
            text-decoration: none;
        }

        .nav-brand i {
            margin-right: var(--space-8);
            font-size: var(--font-size-2xl);
        }

        .brand-text {
            background: linear-gradient(135deg, var(--color-primary), var(--color-primary-hover));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-menu {
            display: flex;
            gap: var(--space-32);
            align-items: center;
            list-style: none;
        }

        .nav-link {
            text-decoration: none;
            color: var(--color-text-secondary);
            font-weight: var(--font-weight-medium);
            transition: color var(--duration-normal) var(--ease-standard);
            position: relative;
        }

        .nav-link:hover {
            color: var(--color-primary);
        }

        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: var(--space-2);
            bottom: -5px;
            left: 50%;
            background: var(--color-primary);
            transition: all var(--duration-normal) var(--ease-standard);
        }

        .nav-link:hover::after {
            width: 100%;
            left: 0;
        }

        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background: var(--color-primary);
            margin: 3px 0;
            transition: var(--duration-normal);
        }

        /* Main content area */
        .main-content {
            padding-top: calc(70px + var(--space-32));
            padding-bottom: var(--space-32);
        }

        .page-title {
            font-size: var(--font-size-3xl);
            font-weight: var(--font-weight-bold);
            color: var(--color-text);
            margin-bottom: var(--space-16);
            text-align: center;
        }

        /* Calculator layout */
        .calculator-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-32);
            margin-bottom: var(--space-32);
        }
        
        @media (max-width: 968px) {
            .calculator-container {
                grid-template-columns: 1fr;
            }
        }
        
        .calculator-form, .calculator-results {
            background: var(--color-surface);
            padding: var(--space-32);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            border: 1px solid var(--color-card-border);
        }
        
        .form-section {
            margin-bottom: var(--space-24);
            padding-bottom: var(--space-16);
            border-bottom: 1px solid var(--color-border);
        }
        
        .form-section-title {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-semibold);
            color: var(--color-primary);
            margin-bottom: var(--space-16);
            display: flex;
            align-items: center;
            gap: var(--space-8);
        }
        
        .form-group {
            margin-bottom: var(--space-16);
        }
        
        .form-label {
            display: block;
            margin-bottom: var(--space-8);
            font-weight: var(--font-weight-medium);
            color: var(--color-text);
            font-size: var(--font-size-sm);
        }
        
        .form-input {
            width: 100%;
            padding: var(--space-12);
            border: 2px solid var(--color-border);
            border-radius: var(--radius-base);
            font-size: var(--font-size-base);
            transition: border-color var(--duration-normal) var(--ease-standard), 
                        box-shadow var(--duration-normal) var(--ease-standard);
            background-color: var(--color-surface);
            color: var(--color-text);
        }
        
        .form-input:focus {
            border-color: var(--color-primary);
            box-shadow: var(--focus-ring);
            outline: none;
        }
        
        .input-with-suffix {
            position: relative;
        }
        
        .input-suffix {
            position: absolute;
            right: var(--space-12);
            top: 50%;
            transform: translateY(-50%);
            color: var(--color-text-secondary);
        }
        
        .slider-container {
            margin-top: var(--space-8);
        }
        
        .slider {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: var(--color-border);
            outline: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--color-primary);
            cursor: pointer;
            transition: background var(--duration-normal) var(--ease-standard);
        }
        
        .slider::-webkit-slider-thumb:hover {
            background: var(--color-primary-hover);
        }
        
        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--color-primary);
            cursor: pointer;
            border: none;
        }
        
        .slider::-moz-range-track {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: var(--color-border);
        }
        
        .toggle-advanced {
            background: none;
            border: none;
            color: var(--color-primary);
            font-size: var(--font-size-sm);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: var(--space-8);
            margin-top: var(--space-8);
            padding: 0;
        }
        
        .advanced-options {
            display: none;
            margin-top: var(--space-16);
            padding: var(--space-16);
            background: var(--color-bg-1);
            border-radius: var(--radius-base);
            border-left: 3px solid var(--color-primary);
        }
        
        .advanced-options.active {
            display: block;
        }
        
        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: var(--space-12) var(--space-24);
            border: none;
            border-radius: var(--radius-base);
            font-weight: var(--font-weight-semibold);
            font-size: var(--font-size-base);
            text-decoration: none;
            cursor: pointer;
            transition: all var(--duration-normal) var(--ease-standard);
            gap: var(--space-8);
        }
        
        .btn--primary {
            background: var(--color-primary);
            color: var(--color-btn-primary-text);
        }
        
        .btn--primary:hover {
            background: var(--color-primary-hover);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }
        
        .btn--secondary {
            background: transparent;
            color: var(--color-primary);
            border: 2px solid var(--color-primary);
        }
        
        .btn--secondary:hover {
            background: var(--color-primary);
            color: var(--color-btn-primary-text);
        }
        
        .btn--full-width {
            width: 100%;
        }
        
        /* Results section */
        .result-section {
            background: var(--color-bg-1);
            padding: var(--space-24);
            border-radius: var(--radius-lg);
            border-left: 4px solid var(--color-primary);
            margin-bottom: var(--space-24);
        }
        
        .payment-item {
            display: flex;
            justify-content: space-between;
            padding: var(--space-12) 0;
            border-bottom: 1px solid var(--color-border);
        }
        
        .payment-item:last-child {
            border-bottom: none;
        }
        
        .payment-label {
            font-weight: var(--font-weight-medium);
            color: var(--color-text);
        }
        
        .payment-value {
            font-weight: var(--font-weight-bold);
            color: var(--color-primary);
            font-size: var(--font-size-lg);
        }
        
        .highlight-payment {
            background: linear-gradient(135deg, var(--color-primary), var(--color-primary-hover));
            padding: var(--space-24);
            border-radius: var(--radius-lg);
            text-align: center;
            margin-top: var(--space-24);
        }
        
        .highlight-payment .payment-label {
            color: var(--color-btn-primary-text);
            font-size: var(--font-size-lg);
        }
        
        .highlight-payment .payment-value {
            color: var(--color-btn-primary-text);
            font-size: var(--font-size-2xl);
            margin-top: var(--space-8);
        }
        
        .ai-insights {
            background: rgba(var(--color-success-rgb), var(--status-bg-opacity));
            border-left: 4px solid var(--color-success);
            padding:极速赛车开奖结果记录*/
            border-radius: var(--radius-base);
            margin-top: var(--space-16);
        }
        
        .ai-insights h4 {
            color: var(--color-success);
            margin-bottom: var(--space-8);
            display: flex;
            align-items: center;
            gap: var(--space-8);
        }
        
        .ai-insights ul {
            padding-left: var(--space-20);
            color: var(--color-text);
        }
        
        .ai-insights li {
            margin-bottom: var(--space-8);
        }
        
        .amortization-container {
            margin-top: var(--space-16);
        }
        
        .amortization-toggle {
            display: flex;
            gap: var(--space-16);
            margin-bottom: var(--space-16);
        }
        
        .amortization-toggle button {
            background: none;
            border: none;
            padding: var(--space-8) var(--space-16);
            border-radius: var(--radius-base);
            cursor: pointer;
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            transition: all var(--duration-normal) var(--ease-standard);
        }
        
        .amortization-toggle button.active {
            background: var(--color-primary);
            color: var(--color-btn-primary-text);
        }
        
        .amortization-table {
            width: 100%;
            border-collapse: collapse;
            font-size: var(--font-size-sm);
            margin-bottom: var(--space-16);
        }
        
        .amortization-table th {
            background: var(--color-secondary);
            padding: var(--space-12);
            text-align: left;
            font-weight: var(--font-weight-semibold);
            color: var(--color-text);
            border-bottom: 2px solid var(--color-border);
        }
        
        .amortization-table td {
            padding: var(--space-12);
            border-bottom: 1px solid var(--color-border);
        }
        
        .amortization-table tr:hover {
            background: var(--color-bg-1);
        }
        
        .chart-container {
            margin-top: var(--space-24);
            height: 300px;
            position: relative;
        }
        
        .download-options {
            display: flex;
            gap: var(--space-16);
            margin-top: var(--space-24);
        }
        
        .disclaimer {
            margin-top: var(--space-32);
            padding: var(--space-16);
            background: rgba(var(--color-info-rgb), var(--status-bg-opacity));
            border-left: 4px solid var(--color-info);
            border-radius: var(--radius-base);
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
        }
        
        .comparison-section {
            margin-top: var(--space-32);
            padding-top: var(--space-24);
            border-top: 1px solid var(--color-border);
        }
        
        .scenario-buttons {
            display: flex;
            gap: var(--space-16);
            margin-bottom: var(--space-16);
        }
        
        @media (max-width: 768px) {
            .download-options, .scenario-buttons {
                flex-direction: column;
            }
            
            .amortization-toggle {
                flex-wrap: wrap;
            }
            
            .hamburger {
                display: flex;
            }
            
            .nav-menu {
                position: fixed;
                left: -100%;
                top: 70px;
                flex-direction: column;
                background-color: var(--color-surface);
                width: 100%;
                text-align: center;
                transition: var(--duration-normal);
                box-shadow: var(--shadow-sm);
                padding: var(--space-32) 0;
            }
            
            .nav-menu.active {
                left: 0;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 var(--space-16);
            }
            
            .calculator-form, .calculator-results {
                padding: var(--space-24);
            }
            
            .form-section-title {
                font-size: var(--font-size-base);
            }
            
            .payment-value {
                font-size: var(--font-size-base);
            }
            
            .highlight-payment .payment-value {
                font-size: var(--font-size-xl);
            }
        }

        /* Footer */
        .footer {
            background: var(--color-charcoal-700);
            color: var(--color-gray-200);
            padding: var(--space-32) 0 var(--space-16);
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-32);
            margin-bottom: var(--space-32);
        }
        
        .footer-section h4 {
            color: var(--color-white);
            font-weight: var(--font-weight-semibold);
            margin-bottom: var(--space-16);
            font-size: var(--font-size-lg);
        }
        
        .footer-brand {
            display: flex;
            align-items: center;
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-bold);
            color: var(--color-teal-300);
            margin-bottom: var(--space-16);
        }
        
        .footer-brand i {
            margin-right: var(--space-8);
            font-size: var(--font-size-xl);
        }
        
        .footer-section p {
            color: var(--color-gray-300);
            line-height: var(--line-height-normal);
            margin-bottom: var(--space极速赛车开奖结果记录*/
        }
        
        .footer-section ul {
            list-style: none;
        }
        
        .footer-section ul li {
            margin-bottom: var(--space-8);
        }
        
        .footer-section ul li a {
            color: var(--color-gray-200);
            text-decoration: none;
            transition: color var(--duration-normal) var(--ease-standard);
        }
        
        .footer-section ul li a:hover {
            color: var(--color-teal-300);
        }
        
        .footer-bottom {
            border-top: 1px solid var(--color-slate-500);
            padding-top: var(--space-32);
            text-align: center;
            color: var(--color-gray-300);
        }

        /* Text center utility */
        .text-center {
            text-align: center;
        }

        /* Text color utilities */
        .text-gray {
            color: var(--color-text-secondary);
        }

        /* Margin utilities */
        .mb-5 {
            margin-bottom: var(--space-32);
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="navbar">
                <a href="index.html" class="nav-brand">
                    <i class="fas fa-calculator"></i>
                    <span class="brand-text">Finguid Calculators</span>
                </a>
                <div class="hamburger" id="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <nav>
                    <ul class="nav-menu" id="navMenu">
                        <li><a href="index.html" class="nav-link">Home</a></li>
                        <li><a href="calculators.html" class="nav-link">Calculators</a></li>
                        <li><a href="resources.html" class="nav-link">Resources</a></li>
                        <li><a href="partners.html" class="nav-link">Partners</a></li>
                        <li><a href="contact.html" class="nav-link">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </极速赛车开奖结果记录*/
    </header>

    <main class="main-content">
        <div class="container">
            <h1 class="page-title">Advanced Mortgage Calculator</h1>
            <p class="text-center text-gray mb-5">Calculate your complete monthly payment including PITI + PMI and see your amortization schedule</p>
            
            <div class="calculator-container">
                <div class="calculator-form">
                    <div class="form-section">
                        <h3 class="form-section-title"><i class="fas fa-home"></i> Property Details</h3>
                        <div class="form-group">
                            <label for="homePrice" class="form-label">Home Price ($)</label>
                            <input type="number" id="homePrice" class="form-input" value="375000" min="0" step="1000">
                            <div class="slider-container">
                                <input type="range" min="50000" max="2000000" value="375000" step="1000" class="slider" id="homePriceSlider">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="downPayment" class="form-label">Down Payment (%)</label>
                            <input type="number" id="downPayment" class="form-input" value="20" min="0" max="100" step="0.5">
                            <div class="slider-container">
                                <input type="range" min="0" max="100" value="20" step="0.5" class="slider" id="downPaymentSlider">
                            </div>
                            <div id="downPaymentAmount" class="form-label" style="font-size: var(--font-size-sm);">Down Payment Amount: $75,000</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="loanAmount" class="form-label">Loan Amount ($)</极速赛车开奖结果记录*/
                            <input type="number" id="loanAmount" class="form-input" value="300000" min="0" readonly>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3 class="form-section-title"><i class="fas fa-percentage"></i> Loan Details</h3>
                        <极速赛车开奖结果记录*/
                            <label for="interestRate" class="form-label">Interest Rate (%)</label>
                            <input type="number" id="interestRate" class="form-input" value="4.5" min="0" max="20" step="0.01">
                            <div class="slider-container">
                                <input type="range" min="0.5" max="20" value="4.5" step="0.01" class="slider" id="interestRateSlider">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="loanTerm" class="form-label">Loan Term (years)</label>
                            <select id="loanTerm" class="form-input">
                                <option value="30">30 years</option>
                                <option value="20">20 years</option>
                                <option value="15">15 years</option>
                                <option value="10">10 years</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3 class="form-section-title"><i class="fas fa-receipt"></i> Additional Costs</h3>
                        <div class="form-group">
                            <label for="propertyTax" class="form-label">Annual Property Tax ($)</label>
                            <div class="input-with-suffix">
                                <input type="number" id="propertyTax" class="form-input" value="3600" min="0">
                                <span class="input-suffix">/year</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="insurance" class="form-label">Annual Home Insurance ($)</label>
                            <div class="极速赛车开奖结果记录*/
                                <input type="number" id="insurance" class="form-input" value="1200" min="0">
                                <span class="input-suffix">/year</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="hoa" class="form-label">Monthly HOA Fees ($)</label>
                            <div class="input-with-suffix">
                                <input type="number" id="hoa" class="form-input" value="0" min极速赛车开奖结果记录*/
                                <span class="input-suffix">/month</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="pmi" class="form-label">PMI Rate (%)</label>
                            <div class="input-with-suffix">
                                <input type="number" id="p极速赛车开奖结果记录*/
                                <span class="input-suffix">/year</span>
                            </div>
                            <div id="pmiNote" class="form-label" style="font-size: var(--font-size-sm); color: var(--color-warning);">
                                PMI applies when down payment is less than 20%
                            </div>
                        </div>
                    </div>
                    
                    <button class="toggle-advanced" id="toggleAdvanced">
                        <i class="fas fa-cog"></i> Advanced Options
                    </button>
                    
                    <div class="advanced-options" id="advancedOptions">
                        <div class="form-group">
                            <label for="extraPayment" class="form-label">Extra Monthly Payment ($)</label>
                            <input type="number" id="extraPayment" class="form-input" value="0" min="0">
                        </div>
                        
                        <div class="form-group">
                            <label for="startDate" class="form-label">Loan Start Date</label>
                            <input type="month" id="startDate" class="form-input" value="">
                        </div>
                        
                        <div class="form-group">
                            <label for="zipCode" class="form-label">ZIP Code (for tax estimates)</label>
                            <input type="text" id="zipCode" class="form-input" placeholder="Enter ZIP code">
                        </div>
                    </div>
                    
                    <button class="btn btn--primary btn--full-width" id="calculateBtn">
                        <i class="fas fa-calculator"></i> Calculate Mortgage
                    </button>
                    
                    <div class="scenario-buttons">
                        <button class="btn btn--secondary btn--full-width" id="saveScenario">
                            <i class="fas fa-save"></i> Save Scenario
                        </button>
                        <button class="btn btn--outline btn--full-width" id="compareScenarios">
                            <i class="fas fa-compare"></i> Compare Scenarios
                        </button>
                    </div>
                </div>
                
                <div class="calculator-results">
                    <div class="result-section">
                        <h3><i class="fas fa-receipt"></i> Payment Breakdown</h3>
                        <div class="payment-item">
                            <span class="payment-label">Principal & Interest</span>
                            <span class="payment-value" id="principalInterest">$1,520.06</span>
                        </div>
                        <div class="payment-item">
                            <span class="payment-label">Property Taxes</span>
                            <span class="payment-value" id="propertyTaxResult">$300.00</span>
                        </div>
                        <div class="payment-item">
                            <span class="payment-label">Home Insurance</span>
                            <span class="payment-value" id="insuranceResult">$100.00</span>
                        </div>
                        <div class="payment-item">
                            <span class="payment-label">PMI</span>
                            <span class="payment-value" id="pmiResult">$125.00</span>
                        </div>
                        <div class="payment-item">
                            <span class="payment-label">HOA Fees</span>
                            <span class="payment-value" id="hoaResult">$0.00</span>
                        </div>
                        <div class="highlight-payment">
                            <div class="payment-label">Total Monthly Payment</div>
                            <div class="payment-value" id="totalPayment">$2,045.06</div>
                        </div>
                    </div>
                    
                    <div class="result-section">
                        <h3><i class="fas fa-chart-pie"></i> Payment Overview</h3>
                        <div class="chart-container">
                            <canvas id="paymentChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="result-section">
                        <h3><i class="fas fa-calendar-alt"></i> Loan Summary</h3>
                        <div class="payment-item">
                            <span class="payment-label">Total Loan Amount</span>
                            <span class="payment-value" id="totalLoanAmount">$300,000</span>
                        </div>
                        <div class="payment-item">
                            <span class="payment-label">Total Interest Paid</span>
                            <span class="payment-value" id="totalInterestPaid">$247,220</span>
                        </div>
                        <div class="payment-item">
                            <span class="payment-label">Total Cost of Loan</span>
                            <span class="payment-value" id="totalCost">$547,220</span>
                        </极速赛车开奖结果记录*/
                        <div class="payment-item">
                            <span class="payment-label">Payoff Date</极速赛车开奖结果记录*/
                            <span class="payment-value" id="payoffDate">May 2053</span>
                        </div>
                        <div class="payment-item" id="extraPaymentsSummary" style="display: none;">
                            <span class="payment-label">With Extra Payments</span>
                            <span class="payment-value" id="extraPaymentsResult">Save $45,220, Payoff 5 years early</span>
                        </div>
                    </div>
                    
                    <div class="result-section">
                        <h3><i class="fas fa-robot"></i> AI-Powered Insights</h3>
                        <div class="ai-insights">
                            <h4><i class="fas fa-lightbulb"></i> Smart Recommendations</h4>
                            <ul id="aiInsightsList">
                                <li>Consider making an extra $100 payment monthly to shorten your loan term by 4 years</li>
                                <li>Your debt-to-income ratio is healthy at 28%</li>
                                <li>Refinancing could save you money if rates drop below 3.8%</极速赛车开奖结果记录*/
                            </ul>
                        </div>
                    </div>
                    
                    <div class="result-section">
                        <h3><i class="fas fa-calendar-alt"></i> Amortization Schedule</h3>
                        <div class="amortization-toggle">
                            <button class="active" data-view="yearly">Yearly View</button>
                            <button data-view="monthly">Monthly View</button>
                        </div>
                        <div class="amortization-container">
                            <div style="overflow-x: auto;">
                                <table class="amortization-table" id="amortizationTable">
                                    <thead>
                                        <tr>
                                            <th>Year</th>
                                            <th>Principal</th>
                                            <th>Interest</th>
                                            <th>Total Interest</th>
                                            <th>Balance</th>
                                        </tr>
                                    </thead>
                                    <tbody id="amortizationBody">
                                        <!-- Will be populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="amortizationChart"></canvas>
                    </div>
                    
                    <div class="download-options">
                        <button class="btn btn--primary" id="downloadPDF">
                            <i class="fas fa-file-pdf"></i> Download PDF Report
                        </button>
                        <button class="btn btn--secondary" id="downloadCSV">
                            <i class="fas fa-file-csv"></i> Download CSV
                        </button>
                        <button class="btn btn--outline" id="printSchedule">
                            <i class="fas fa-print"></i> Print Schedule
                        </button>
                    </div>
                    
                    <div class="disclaimer">
                        <p><strong>Disclaimer:</strong> This calculator provides estimates for informational purposes only. It is not financial advice. Actual rates, fees, and payments may vary based on creditworthiness, location, lender policies, and other factors. We recommend consulting with a qualified financial advisor before making any financial decisions.</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-brand">
                        <i class="fas fa-calculator"></i>
                        Finguid Calculators
                    </div>
                    <p>We provide accurate financial calculators to help you make informed decisions about your financial future.</p>
                </div>
                
                <div class="footer-section">
                    <h4>Calculator Categories</h4>
                    <ul>
                        <li><a href="calculators.html#mortgage">Mortgage Calculators</a></li>
                        <li><a href="calculators.html#auto">Auto Loan Calculators</a></li>
                        <li><a href="calculators.html#investment">Investment Calculators</a></li>
                        <li><a href="calculators.html#retirement">Retirement Calculators</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Company</h4>
                    <ul>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="contact.html">Contact</a></li>
                        <li><a href="privacy.html">Privacy Policy</a></li>
                        <li><a href="terms.html">Terms of Service</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2023 Finguid Calculators. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Initialize the current date for the loan start date input
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const year = now.getFullYear();
            const month = (now.getMonth() + 1).toString().padStart(2, '0');
            document.getElementById('startDate').value = `${year}-${month}`;
            
            // Set up event listeners for inputs and sliders
            setupEventListeners();
            
            // Set up navigation menu toggle
            const hamburger = document.getElementById('hamburger');
            const navMenu = document.getElementById('navMenu');
            
            if (hamburger && navMenu) {
                hamburger.addEventListener('click', function() {
                    navMenu.classList.toggle('active');
                });
            }
            
            // Initial calculation
            calculateMortgage();
        });
        
        // Set up event listeners for inputs and sliders
        function setupEventListeners() {
            // Home price inputs
            document.getElementById('homePrice').addEventListener('input', function() {
                document.getElementById('homePriceSlider').value = this.value;
                updateLoanAmount();
            });
            
            document.getElementById('homePriceSlider').addEventListener('input', function极速赛车开奖结果记录*/
                document.getElementById('homePrice').value = this.value;
                updateLoanAmount();
            });
            
            // Down payment inputs
            document.getElementById('downPayment').addEventListener('input', function() {
                document.getElementById('downPaymentSlider').value = this.value;
                updateLoanAmount();
            });
            
            document.getElementById('downPaymentSlider').addEventListener('input', function() {
                document.getElementById('downPayment').value = this.value;
                updateLoanAmount();
            });
            
            // Interest rate inputs
            document.getElementById('interestRate').addEventListener('input', function() {
                document.getElementById('interestRateSlider').value = this.value;
            });
            
            document.getElementById('interestRateSlider').addEventListener('input', function() {
                document.getElementById('interestRate').value = this.value;
            });
            
            // Loan term change
            document.getElementById('loanTerm').addEventListener('change', calculateMortgage);
            
            // Additional costs
            document.getElementById('propertyTax').addEventListener('input', calculateMortgage);
            document.getElementById('insurance').addEventListener('input', calculateMortgage);
            document.getElementById('hoa').addEventListener('input', calculateMortgage);
            
            // Toggle advanced options
            document.getElementById('toggleAdvanced').addEventListener('click', function() {
                document.getElementById('advancedOptions').classList.toggle('active');
            });
            
            // Advanced options
            document.getElementById('extraPayment').addEventListener('input', calculateMortgage);
            document.getElementById('startDate').addEventListener('change', calculateMortgage);
            document.getElementById('zipCode').addEventListener('input', calculateMortgage);
            
            // Calculate button
            document.getElementById('calculateBtn').addEventListener('click', calculateMortgage);
            
            // Amortization view toggle
            const amortizationButtons = document.querySelectorAll('.amortization-toggle button');
            amortizationButtons.forEach(button => {
                button.addEventListener('click', function() {
                    amortizationButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    // Here you would toggle between yearly and monthly views
                });
            });
            
            // Download buttons
            document.getElementById('downloadPDF').addEventListener('click', function() {
                alert('PDF download functionality would be implemented here');
            });
            
            document.getElementById('downloadCSV').addEventListener('click', function() {
                alert('CSV download functionality would be implemented here');
            });
            
            document.getElementById极速赛车开奖结果记录*/
                window.print();
            });
            
            // Scenario buttons
            document.getElementById('saveScenario').addEventListener('click', function() {
                alert('Scenario save functionality would be implemented here');
            });
            
            document.getElementById('compareScenarios').addEventListener('click', function() {
                alert('Scenario comparison functionality would be implemented here');
            });
        }
        
        // Update loan amount based on home price and down payment
        function updateLoanAmount() {
            const homePrice = parseFloat(document.getElementById('homePrice').value) || 0;
            const downPaymentPercent = parseFloat(document.getElementById('downPayment').value) || 0;
            
            const downPaymentAmount = homePrice * (downPaymentPercent / 100);
            const loanAmount = homePrice - downPaymentAmount;
            
            document.getElementById('loanAmount').value = loanAmount.toFixed(0);
            document.getElementById('downPaymentAmount').textContent = `Down Payment Amount: $${downPaymentAmount.toLocaleString()}`;
            
            // Update PMI based on down payment percentage
            const pmiInput = document.getElementById('pmi');
            const pmiNote = document.getElementById('pmiNote');
            
            if (downPaymentPercent < 20) {
                pmiInput.value = 0.5;
                pmiNote.style.display = 'block';
            } else {
                pmiInput.value = 0;
                pmiNote.style.display = 'none';
            }
            
            // Recalculate mortgage
            calculateMortgage();
        }
        
        // Main mortgage calculation function
        function calculateMortgage() {
            // Get input values
            const homePrice = parseFloat(document.getElementById('home极速赛车开奖结果记录*/
            const downPaymentPercent = parseFloat(document.getElementById('downPayment').value) || 0;
            const interestRate = parseFloat(document.getElementById('interestRate').value) || 0;
            const loanTerm = parseInt(document.getElementById('loanTerm').value) || 30;
            const propertyTax = parseFloat(document.getElementById('propertyTax').value) || 0;
            const insurance = parseFloat(document.getElementById('insurance').value) || 0;
            const hoa = parseFloat(document.getElementById('hoa').value) || 0;
            const pmiRate = parseFloat(document.getElementById('pmi').value) || 0;
            const extraPayment = parseFloat(document.getElementById('extraPayment').value) || 0;
            
            // Calculate derived values
            const downPaymentAmount = homePrice * (downPaymentPercent / 100);
            const loanAmount = homePrice - downPaymentAmount;
            
            // Calculate monthly interest rate
            const monthlyInterestRate = interestRate / 100 / 12;
            
            // Calculate number of payments
            const numberOfPayments = loanTerm * 12;
            
            // Calculate monthly principal and interest
            const monthlyPayment = loanAmount * 
                (monthlyInterestRate * Math.pow(1 + monthlyInterestRate, numberOfPayments)) / 
                (Math.pow(1 + monthlyInterestRate, numberOfPayments) - 1);
            
            // Calculate monthly property tax and insurance
            const monthlyPropertyTax = propertyTax / 12;
            const monthlyInsurance = insurance / 12;
            
            // Calculate PMI if down payment is less than 20%
            let monthlyPmi = 0;
            if (downPaymentPercent < 20) {
                monthlyPmi = (loanAmount * (pmiRate / 100)) / 12;
            }
            
            // Calculate total monthly payment
            const totalMonthly极速赛车开奖结果记录*/
            
            // Update UI with results
            document.getElementById('principalInterest').textContent = `$${monthlyPayment.toFixed(2)}`;
            document.getElementById('propertyTaxResult').textContent = `$${monthlyPropertyTax.toFixed(2)}`;
            document.getElementById('insuranceResult').textContent = `$${monthlyInsurance.toFixed(2)}`;
            document.getElementById('pmiResult').textContent = `$${monthlyPmi.toFixed(2)}`;
            document.getElementById('hoaResult').textContent = `$${hoa.toFixed(2)}`;
            document.getElementById('totalPayment').textContent = `$${totalMonthlyPayment.toFixed(2)}`;
            
            // Calculate total loan cost
            const totalInterestPaid = (monthlyPayment * numberOfPayments) - loanAmount;
            const totalCost = loanAmount + totalInterestPaid + propertyTax * loanTerm + insurance * loanTerm + (monthlyPmi * numberOfPayments) + (hoa * numberOfPayments);
            
            // Update loan summary
            document.getElementById('totalLoanAmount').textContent = `$${loanAmount.toLocaleString()}`;
            document.getElementById('totalInterestPaid').textContent = `$${totalInterestPaid.toLocaleString()}`;
            document.getElementById('totalCost').textContent = `$${totalCost.toLocaleString()}`;
            
            // Calculate payoff date
            const startDate = new Date(document.getElementById('startDate').value || new Date());
            const payoffDate = new Date(startDate);
            payoffDate.setMonth(payoffDate.getMonth() + numberOfPayments);
            
            document.getElementById('payoffDate').textContent = payoffDate.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
            
            // Show/hide extra payments summary
            const extraPaymentsSummary = document.getElementById('extraPaymentsSummary');
            if (extraPayment > 0) {
                extraPaymentsSummary.style.display = 'flex';
                // Simplified calculation for demonstration
                const interestSaved = totalInterestPaid * 0.15; // Example calculation
                const yearsSaved = loanTerm * 0.2; // Example calculation
                document.getElementById('extraPaymentsResult').textContent = `Save $${interestSaved.toLocaleString()}, Payoff ${yearsSaved.toFixed(1)} years early`;
            } else {
                extraPaymentsSummary.style.display = 'none';
            }
            
            // Generate amortization schedule
            generateAmortizationSchedule(loanAmount, interestRate, loanTerm, extraPayment, startDate);
            
            // Update charts
            updateCharts(monthlyPayment, monthlyPropertyTax, monthlyInsurance, monthlyPmi, hoa);
        }
        
        // Generate amortization schedule
        function generateAmortizationSchedule(loanAmount, interestRate, loanTerm, extraPayment, startDate) {
            // This would be a complex function to generate the full amortization schedule
            // For this example, we'll just create some placeholder data
            
            const amortizationBody = document.getElementById('amortizationBody');
            amortizationBody.innerHTML = '';
            
            // Calculate monthly values
            const monthlyRate = interestRate / 100 / 12;
            const numberOfPayments = loanTerm * 12;
            const monthlyPayment = loanAmount * 
                (monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) / 
                (Math.pow(1 + monthlyRate, numberOfPayments) - 1);
            
            let balance = loanAmount;
            let totalInterest = 0;
            
            // Create yearly view (for demo purposes, we'll just show first 5 years)
            for (let year = 1; year <= 5; year++) {
                let yearPrincipal = 0;
                let yearInterest = 0;
                
                for (let month = 1; month <= 12; month++) {
                    const monthlyInterest = balance * monthlyRate;
                    const monthlyPrincipal = monthlyPayment - monthlyInterest + extraPayment;
                    
                    yearPrincipal += monthlyPrincipal;
                    yearInterest += monthlyInterest;
                    totalInterest += monthlyInterest;
                    
                    balance -= monthlyPrincipal;
                    if (balance < 0) balance = 0;
                }
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${year}</td>
                    <td>$${yearPrincipal.toFixed(2)}</td>
                    <td>$${yearInterest.toFixed(2)}</td>
                    <td>$${totalInterest极速赛车开奖结果记录*/
                    <td>$${balance.toFixed(2)}</td>
                `;
                
                amortizationBody.appendChild(row);
                
                if (balance <= 0) break;
            }
        }
        
        // Update charts
        function updateCharts(principalInterest, propertyTax, insurance, pmi, hoa) {
            // Payment breakdown chart
            const paymentChartCanvas = document.getElementById('paymentChart');
            if (paymentChartCanvas) {
                const ctx = paymentChartCanvas.getContext('2d');
                
                // For demo purposes, we'll just create a simple chart
                // In a real implementation, you would use Chart.js
                ctx.clearRect(0, 0, paymentChartCanvas.width, paymentChartCanvas.height);
                
                // Draw a simple pie chart representation
                const total = principalInterest + propertyTax + insurance + pmi + hoa;
                const centerX = paymentChartCanvas.width / 2;
                const centerY = paymentChartCanvas.height / 2;
                const radius = Math.min(centerX, centerY) - 10;
                
                let startAngle = 0;
                const colors = [
                    'rgba(50, 184, 198, 0.8)', // Teal
                    'rgba(230, 129, 97, 0.8)', // Orange
                    'rgba(45, 166, 178, 0.8)', // Light teal
                    'rgba(192, 21, 47, 0.8)',  // Red
                    'rgba(119, 124, 124, 0.8)' // Gray
                ];
                
                const values = [principalInterest, propertyTax, insurance, pmi, hoa];
                const labels = ['Principal & Interest', 'Property Tax', 'Insurance', 'PMI', 'HOA'];
                
                values.forEach((value, i) => {
                    const sliceAngle = 2 * Math.PI * value / total;
                    
                    ctx.beginPath();
                    ctx.fillStyle = colors[i];
                    ctx.moveTo(centerX, centerY);
                    ctx.arc(centerX, centerY, radius, startAngle, startAngle + sliceAngle);
                    ctx.closePath();
                    ctx.fill();
                    
                    startAngle += sliceAngle;
                });
            }
            
            // Amortization chart
            const amortizationChartCanvas = document.getElementById('amortizationChart');
            if (amortizationChartCanvas) {
                const ctx = amortizationChartCanvas.getContext('2d');
                
                // For demo purposes, we'll just create a simple chart
                ctx.clearRect(0, 0, amortizationChartCanvas.width, amortizationChartCanvas.height);
                
                // Draw a simple line graph representation
                ctx.beginPath();
                ctx.strokeStyle = 'rgba(50, 184, 198, 0.8)';
                ctx.lineWidth = 3;
                ctx.moveTo(50, 250);
                ctx.lineTo(100, 200);
                ctx.lineTo(150, 180);
                ctx.lineTo(200, 150);
                ctx.lineTo(250, 120);
                ctx.lineTo(300, 100);
                ctx.stroke();
                
                // Add labels
                ctx.fillStyle = 'rgba(19, 52, 59, 1)';
                ctx.font = '12px var(--font-family-base)';
                ctx.fillText('Loan Balance Over Time', 130, 30);
                ctx.fillText('Year', 280, 270);
                ctx.fillText('Balance ($)', 10, 150);
            }
        }
    </script>
</body>
</html>
