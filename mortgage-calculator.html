<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mortgage Calculator | Finguid Financial Calculators</title>
    <meta name="description" content="Free mortgage calculator with PMI, taxes, insurance, and amortization schedule. Get accurate home loan estimates for your financial planning.">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Your CSS -->
    <link rel="stylesheet" href="style.css">
    
    <!-- jsPDF for PDF download -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <nav class="nav">
                <a href="/" class="logo">
                    <i class="fas fa-calculator"></i> 
                    <span class="brand-text">Finguid Calculators</span>
                </a>
                <ul class="nav-menu" id="nav-menu">
                    <li><a href="/" class="nav-link">Home</a></li>
                    <li><a href="/calculators" class="nav-link">Calculators</a></li>
                    <li><a href="/resources" class="nav-link">Resources</a></li>
                    <li><a href="/blog" class="nav-link">Blog</a></li>
                    <li><a href="/contact" class="nav-link">Contact</a></li>
                </ul>
                <div class="hamburger" id="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            <h1 class="page-title">Mortgage Calculator</h1>
            
            <div class="calculator-grid">
                <!-- Calculator Form -->
                <div class="calculator-card">
                    <div class="card-icon">
                        <i class="fas fa-home"></i>
                    </div>
                    <h3>Mortgage Details</h3>
                    <form id="mortgage-form" class="card__body">
                        <div class="form-group">
                            <label for="home-price" class="form-label">Home Price ($)</label>
                            <input type="number" id="home-price" class="form-control" min="0" value="400000" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="down-payment" class="form-label">Down Payment ($)</label>
                            <input type="number" id="down-payment" class="form-control" min="0" value="80000" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="interest-rate" class="form-label">Interest Rate (%)</label>
                            <input type="number" id="interest-rate" class="form-control" min="0" step="0.01" value="6.5" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="loan-term" class="form-label">Loan Term (Years)</label>
                            <select id="loan-term" class="form-control" required>
                                <option value="15">15 years</option>
                                <option value="20">20 years</option>
                                <option value="25">25 years</option>
                                <option value="30" selected>30 years</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="state" class="form-label">State</label>
                            <select id="state" class="form-control" required>
                                <option value="">Select a state</option>
                                <option value="AL">Alabama</option>
                                <option value="AK">Alaska</option>
                                <option value="AZ">Arizona</option>
                                <option value="AR">Arkansas</option>
                                <option value="CA">California</option>
                                <option value="CO">Colorado</option>
                                <option value="CT">Connecticut</option>
                                <option value="DE">Delaware</option>
                                <option value="FL">Florida</option>
                                <option value="GA">Georgia</option>
                                <option value="HI">Hawaii</option>
                                <option value="ID">Idaho</option>
                                <option value="IL" selected>Illinois</option>
                                <option value="IN">Indiana</option>
                                <option value="IA">Iowa</option>
                                <option value="KS">Kansas</option>
                                <option value="KY">Kentucky</option>
                                <option value="LA">Louisiana</option>
                                <option value="ME">Maine</option>
                                <option value="MD">Maryland</option>
                                <option value="MA">Massachusetts</option>
                                <option value="MI">Michigan</option>
                                <option value="MN">Minnesota</option>
                                <option value="MS">Mississippi</option>
                                <option value="MO">Missouri</option>
                                <option value="MT">Montana</option>
                                <option value="NE">Nebraska</option>
                                <option value="NV">Nevada</option>
                                <option value="NH">New Hampshire</option>
                                <option value="NJ">New Jersey</option>
                                <option value="NM">New Mexico</option>
                                <option value="NY">New York</option>
                                <option value="NC">North Carolina</option>
                                <option value="ND">North Dakota</option>
                                <option value="OH">Ohio</option>
                                <option value="OK">Oklahoma</option>
                                <option value="OR">Oregon</option>
                                <option value="PA">Pennsylvania</option>
                                <option value="RI">Rhode Island</option>
                                <option value="SC">South Carolina</option>
                                <option value="SD">South Dakota</option>
                                <option value="TN">Tennessee</option>
                                <option value="TX">Texas</option>
                                <option value="UT">Utah</option>
                                <option value="VT">Vermont</option>
                                <option value="VA">Virginia</option>
                                <option value="WA">Washington</option>
                                <option value="WV">West Virginia</option>
                                <option value="WI">Wisconsin</option>
                                <option value="WY">Wyoming</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="property-tax" class="form-label">Annual Property Tax ($)</label>
                            <input type="number" id="property-tax" class="form-control" min="0" value="4800" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="home-insurance" class="form-label">Annual Home Insurance ($)</label>
                            <input type="number" id="home-insurance" class="form-control" min="0" value="1200" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="hoa-fees" class="form-label">Monthly HOA Fees ($)</label>
                            <input type="number" id="hoa-fees" class="form-control" min="0" value="0">
                        </div>
                        
                        <div class="checkbox-group">
                            <input type="checkbox" id="pmi-required">
                            <label for="pmi-required" class="form-label">PMI Required</label>
                        </div>
                        
                        <div class="form-group" id="pmi-section" style="display: none;">
                            <label for="pmi-rate" class="form-label">PMI Rate (% Annual)</label>
                            <input type="number" id="pmi-rate" class="form-control" min="0" step="0.01" placeholder="0.5">
                        </div>
                        
                        <button type="submit" class="btn btn-primary btn--full-width">Calculate</button>
                    </form>
                </div>
                
                <!-- Results Section -->
                <div class="calculator-results">
                    <!-- Payment Breakdown -->
                    <div class="calculator-card">
                        <div class="card-icon">
                            <i class="fas fa-receipt"></i>
                        </div>
                        <h3>Payment Breakdown</h3>
                        <div class="card__body">
                            <div class="payment-item">
                                <span>Principal & Interest</span>
                                <span id="principal-interest">$0</span>
                            </div>
                            <div class="payment-item">
                                <span>Property Tax</span>
                                <span id="property-tax-amt">$0</span>
                            </div>
                            <div class="payment-item">
                                <span>Home Insurance</span>
                                <span id="home-insurance-amt">$0</span>
                            </div>
                            <div class="payment-item">
                                <span>HOA Fees</span>
                                <span id="hoa-fees-amt">$0</span>
                            </div>
                            <div class="payment-item" id="pmi-row" style="display: none;">
                                <span>PMI</span>
                                <span id="pmi-amt">$0</span>
                            </div>
                            <div class="payment-item" style="font-weight: var(--font-weight-bold); border-top: 1px solid var(--color-border); padding-top: var(--space-12);">
                                <span>Total Monthly Payment</span>
                                <span id="total-monthly">$0</span>
                            </div>
                            <div class="payment-item">
                                <span>Total Interest Paid</span>
                                <span id="total-interest">$0</span>
                            </div>
                            <p id="loan-info" style="margin-top: var(--space-16); font-style: italic; text-align: center; color: var(--color-text-secondary);"></p>
                            <button id="download-btn" class="btn btn-secondary btn--full-width mt-4">Download Results</button>
                        </div>
                    </div>
                    
                    <!-- AI Insights -->
                    <div class="calculator-card ai-insights">
                        <div class="card-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <h3>AI-Powered Insights</h3>
                        <div class="card__body">
                            <ul id="ai-insights-list">
                                <li>Enter your information to get personalized insights</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Amortization Schedule -->
                    <div class="calculator-card">
                        <div class="card-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <h3>Amortization Schedule</h3>
                        <div class="card__body">
                            <button id="toggle-amort-btn" class="btn btn--outline btn--full-width">Show Schedule</button>
                            <div class="amortization-table-container" style="overflow-x: auto;">
                                <table class="amortization-table" id="amortization-table" style="display: none; width: 100%; margin-top: var(--space-16);">
                                    <thead>
                                        <tr>
                                            <th>Year</th>
                                            <th>Principal Paid</th>
                                            <th>Interest Paid</th>
                                            <th>Remaining Balance</th>
                                        </tr>
                                    </thead>
                                    <tbody id="amortization-body"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-brand">
                        <i class="fas fa-calculator"></i>
                        <span>Finguid Calculators</span>
                    </div>
                    <p>Empowering financial decisions with accurate, easy-to-use calculators.</p>
                </div>
                
                <div class="footer-section">
                    <h4>Calculators</h4>
                    <ul>
                        <li><a href="#">Mortgage Calculator</a></li>
                        <li><a href="#">Auto Loan Calculator</a></li>
                        <li><a href="#">Investment Calculator</a></li>
                        <li><a href="#">Retirement Calculator</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="#">Financial Guides</a></li>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Contact Us</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Legal</h4>
                    <ul>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Disclaimer</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 Finguid Calculators. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile navigation toggle
            const hamburger = document.getElementById('hamburger');
            const navMenu = document.getElementById('nav-menu');
            
            hamburger.addEventListener('click', function() {
                navMenu.classList.toggle('active');
                hamburger.classList.toggle('active');
            });
            
            // PMI checkbox toggle
            const pmiCheckbox = document.getElementById('pmi-required');
            const pmiSection = document.getElementById('pmi-section');
            
            pmiCheckbox.addEventListener('change', function() {
                pmiSection.style.display = this.checked ? 'block' : 'none';
            });
            
            // Amortization table toggle
            const toggleAmortBtn = document.getElementById('toggle-amort-btn');
            const amortTable = document.getElementById('amortization-table');
            let amortVisible = false;
            
            toggleAmortBtn.addEventListener('click', function() {
                amortVisible = !amortVisible;
                amortTable.style.display = amortVisible ? 'table' : 'none';
                toggleAmortBtn.textContent = amortVisible ? 'Hide Schedule' : 'Show Schedule';
            });
            
            // Format currency
            function formatUSD(number) {
                return new Intl.NumberFormat('en-US', {
                    style: 'currency',
                    currency: 'USD',
                    minimumFractionDigits: 0,
                    maximumFractionDigits: 0
                }).format(number);
            }
            
            // Generate amortization schedule
            function generateAmortizationSchedule(loanAmount, monthlyRate, totalPayments, monthlyPayment) {
                const tbody = document.getElementById('amortization-body');
                tbody.innerHTML = '';
                
                let balance = loanAmount;
                
                for (let year = 1; year <= Math.ceil(totalPayments / 12); year++) {
                    let principalThisYear = 0;
                    let interestThisYear = 0;
                    
                    for (let month = 1; month <= 12; month++) {
                        const paymentNum = (year - 1) * 12 + month;
                        if (paymentNum > totalPayments) break;
                        
                        const interestPayment = balance * monthlyRate;
                        const principalPayment = monthlyPayment - interestPayment;
                        
                        balance -= principalPayment;
                        principalThisYear += principalPayment;
                        interestThisYear += interestPayment;
                        
                        if (balance < 0) balance = 0;
                    }
                    
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td>${year}</td>
                        <td>${formatUSD(principalThisYear)}</td>
                        <td>${formatUSD(interestThisYear)}</td>
                        <td>${formatUSD(balance)}</td>
                    `;
                    
                    tbody.appendChild(tr);
                    if (balance === 0) break;
                }
            }
            
            // AI insights
            function getAIInsights(data) {
                const insights = [];
                
                if (data.pmiAmt > 0) {
                    insights.push('PMI is applicable because your down payment is less than 20%. Consider increasing your down payment to eliminate PMI.');
                }
                
                const interestPortion = (data.totalInterest / (data.loanAmount + data.totalInterest)) * 100;
                if (interestPortion > 50) {
                    insights.push(`You'll pay ${interestPortion.toFixed(0)}% of your total loan amount as interest. Consider a shorter loan term to reduce interest costs.`);
                }
                
                if (data.monthlyPayment > (data.income * 0.28)) {
                    insights.push('Your mortgage payment exceeds the recommended 28% of income threshold. Consider a less expensive home or larger down payment.');
                }
                
                if (insights.length === 0) {
                    insights.push('Your mortgage setup looks good based on standard financial guidelines. Monitor interest rates for potential refinancing opportunities.');
                }
                
                return insights;
            }
            
            // Calculate mortgage
            function calculateMortgage(event) {
                if (event) event.preventDefault();
                
                // Get input values
                const homePrice = parseFloat(document.getElementById('home-price').value) || 0;
                const downPayment = parseFloat(document.getElementById('down-payment').value) || 0;
                const interestRate = parseFloat(document.getElementById('interest-rate').value) || 0;
                const loanTerm = parseInt(document.getElementById('loan-term').value) || 30;
                const propertyTax = parseFloat(document.getElementById('property-tax').value) || 0;
                const homeInsurance = parseFloat(document.getElementById('home-insurance').value) || 0;
                const hoaFees = parseFloat(document.getElementById('hoa-fees').value) || 0;
                const pmiRequired = document.getElementById('pmi-required').checked;
                let pmiRate = parseFloat(document.getElementById('pmi-rate').value) || 0;
                
                // Validate inputs
                if (homePrice <= 0) {
                    alert('Please enter a valid home price.');
                    return;
                }
                
                if (downPayment < 0 || downPayment >= homePrice) {
                    alert('Down payment must be between 0 and the home price.');
                    return;
                }
                
                if (interestRate <= 0) {
                    alert('Please enter a valid interest rate.');
                    return;
                }
                
                // Calculate loan details
                const loanAmount = homePrice - downPayment;
                const monthlyRate = interestRate / 100 / 12;
                const numberOfPayments = loanTerm * 12;
                
                // Calculate monthly principal and interest
                let monthlyPI;
                if (monthlyRate === 0) {
                    monthlyPI = loanAmount / numberOfPayments;
                } else {
                    monthlyPI = loanAmount * monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments) / 
                               (Math.pow(1 + monthlyRate, numberOfPayments) - 1);
                }
                
                // Calculate additional monthly costs
                const monthlyTax = propertyTax / 12;
                const monthlyInsurance = homeInsurance / 12;
                const monthlyHOA = hoaFees;
                
                // Calculate PMI if needed
                let monthlyPMI = 0;
                const ltvRatio = loanAmount / homePrice;
                
                if (pmiRequired && ltvRatio > 0.8) {
                    monthlyPMI = loanAmount * (pmiRate / 100) / 12;
                    document.getElementById('pmi-row').style.display = 'flex';
                } else {
                    document.getElementById('pmi-row').style.display = 'none';
                }
                
                // Calculate total monthly payment
                const totalMonthly = monthlyPI + monthlyTax + monthlyInsurance + monthlyHOA + monthlyPMI;
                
                // Calculate total interest
                const totalInterest = (monthlyPI * numberOfPayments) - loanAmount;
                
                // Update UI
                document.getElementById('principal-interest').textContent = formatUSD(monthlyPI);
                document.getElementById('property-tax-amt').textContent = formatUSD(monthlyTax);
                document.getElementById('home-insurance-amt').textContent = formatUSD(monthlyInsurance);
                document.getElementById('hoa-fees-amt').textContent = formatUSD(monthlyHOA);
                document.getElementById('pmi-amt').textContent = formatUSD(monthlyPMI);
                document.getElementById('total-monthly').textContent = formatUSD(totalMonthly);
                document.getElementById('total-interest').textContent = formatUSD(totalInterest);
                
                const stateSelect = document.getElementById('state');
                const stateName = stateSelect.options[stateSelect.selectedIndex].text;
                document.getElementById('loan-info').textContent = `${loanTerm}-year loan | ${stateName}`;
                
                // Generate amortization schedule
                generateAmortizationSchedule(loanAmount, monthlyRate, numberOfPayments, monthlyPI);
                
                // Generate AI insights
                const aiInsightsList = document.getElementById('ai-insights-list');
                const insights = getAIInsights({
                    loanAmount,
                    totalInterest,
                    monthlyPayment: totalMonthly,
                    pmiAmt: monthlyPMI,
                    income: 0 // You might want to add an income field
                });
                
                aiInsightsList.innerHTML = insights.map(insight => `<li>${insight}</li>`).join('');
            }
            
            // Download PDF
            document.getElementById('download-btn').addEventListener('click', function() {
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF();
                
                pdf.setFontSize(20);
                pdf.text('Mortgage Calculation Results', 20, 20);
                
                pdf.setFontSize(12);
                pdf.text(`Total Monthly Payment: ${document.getElementById('total-monthly').textContent}`, 20, 40);
                pdf.text(`Principal & Interest: ${document.getElementById('principal-interest').textContent}`, 20, 50);
                pdf.text(`Property Tax: ${document.getElementById('property-tax-amt').textContent}`, 20, 60);
                pdf.text(`Home Insurance: ${document.getElementById('home-insurance-amt').textContent}`, 20, 70);
                pdf.text(`HOA Fees: ${document.getElementById('hoa-fees-amt').textContent}`, 20, 80);
                
                if (document.getElementById('pmi-row').style.display === 'flex') {
                    pdf.text(`PMI: ${document.getElementById('pmi-amt').textContent}`, 20, 90);
                    pdf.text(`Total Interest: ${document.getElementById('total-interest').textContent}`, 20, 100);
                } else {
                    pdf.text(`Total Interest: ${document.getElementById('total-interest').textContent}`, 20, 90);
                }
                
                pdf.save('mortgage-calculation.pdf');
            });
            
            // Form submission
            document.getElementById('mortgage-form').addEventListener('submit', calculateMortgage);
            
            // Initial calculation
            calculateMortgage();
        });
    </script>
</body>
</html>
