<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Loan Pro ‚Äî AI‚ÄëPowered Mortgage Calculator | FinGuid USA</title>
    <meta name="description" content="World's most advanced AI-powered USA mortgage calculator with live rates, voice control, PWA support, and comprehensive payment analysis. Calculate monthly payments instantly with taxes, insurance, PMI for all 50 states.">
    <meta name="keywords" content="mortgage calculator, USA mortgage rates, home loan calculator, mortgage payment, FHA calculator, VA loan calculator, property tax calculator">
    
    <!-- Enhanced PWA Support -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#158D8D">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="USA Mortgage Calculator">
    
    <!-- Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link rel="stylesheet" href="mortgage-calculator.css">
    
    <!-- Chart.js for Enhanced Charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- jsPDF for PDF Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <!-- HTML2Canvas for Screenshots -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <!-- Enhanced Structured Data for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Home Loan Pro ‚Äî AI‚ÄëPowered Mortgage Calculator",
        "description": "World's First AI Calculator - Calculate USA mortgage payments with advanced features",
        "url": "https://finguid.com",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "All",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "creator": {
            "@type": "Organization",
            "name": "FinGuid",
            "url": "https://finguid.com"
        }
    }
    </script>
</head>
<body>
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- Screen Reader Announcements -->
    <div id="sr-announcements" aria-live="polite" class="sr-only"></div>
    
    <!-- PWA Install Banner -->
    <div id="pwa-install-banner" class="pwa-install-banner" style="display: none;">
        <div class="pwa-banner-content">
            <div class="pwa-icon">üì±</div>
            <div class="pwa-text">
                <strong>Install Home Loan Pro Calculator</strong>
                <span>Get instant access to America's best mortgage calculator offline!</span>
            </div>
            <div class="pwa-actions">
                <button id="pwa-install-btn" class="pwa-install-btn">Install App</button>
                <button id="pwa-dismiss-btn" class="pwa-dismiss-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Enhanced Accessibility Controls -->
    <div class="accessibility-controls">
        <div class="font-controls">
            <button class="control-btn" onclick="adjustFontSize(-0.1)" aria-label="Decrease font size" title="Decrease font size">
                <i class="fas fa-minus"></i>
                <span class="control-text">A-</span>
            </button>
            <button class="control-btn" onclick="resetFontSize()" aria-label="Reset font size" title="Reset font size">
                <i class="fas fa-font"></i>
                <span class="control-text">A</span>
            </button>
            <button class="control-btn" onclick="adjustFontSize(0.1)" aria-label="Increase font size" title="Increase font size">
                <i class="fas fa-plus"></i>
                <span class="control-text">A+</span>
            </button>
        </div>
        <button id="theme-toggle" class="control-btn" onclick="toggleTheme()" aria-label="Toggle dark mode" title="Toggle dark/light mode">
            <i class="fas fa-moon theme-icon"></i>
            <span class="control-text">Dark</span>
        </button>
        <button id="voice-toggle" class="control-btn" onclick="toggleVoiceControl()" aria-label="Toggle voice control" title="Voice control">
            <i class="fas fa-microphone"></i>
            <span class="control-text">Voice</span>
            <div class="voice-pulse"></div>
        </button>
        <button class="control-btn" onclick="toggleScreenReaderMode()" aria-label="Toggle screen reader mode" title="Enhanced screen reader support">
            <i class="fas fa-universal-access"></i>
            <span class="control-text">SR</span>
        </button>
    </div>
    
    <!-- Enhanced Header -->
    <header class="site-header">
        <div class="nav-container">
            <div class="brand-logo">
                <a href="#" class="logo-link" aria-label="FinGuid USA Mortgage Calculator Home">
                    <span class="usa-flag">üá∫üá∏</span>
                    <div>
                        <strong>FinGuid</strong>
                        <div class="tagline">World's First AI Calculator</div>
                    </div>
                </a>
            </div>
            <nav class="nav-links" aria-label="Main navigation">
                <a href="#" class="nav-link" onclick="navigateTo('/')" aria-current="page">Home</a>
                <a href="#calculators" class="nav-link" onclick="navigateTo('/calculators')">Calculators</a>
                <a href="#resources" class="nav-link" onclick="navigateTo('/resources')">Resources</a>
                <a href="#rates" class="nav-link" onclick="navigateTo('/rates')">Live Rates</a>
                <a href="#about" class="nav-link" onclick="navigateTo('/about')">About</a>
            </nav>
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Toggle mobile menu" aria-expanded="false">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
        </div>
        
        <div id="mobile-menu" class="mobile-menu">
            <div class="mobile-menu-content">
                <a href="#" class="mobile-nav-link" onclick="navigateTo('/')">üè† Home</a>
                <a href="#calculators" class="mobile-nav-link" onclick="navigateTo('/calculators')">üßÆ Calculators</a>
                <a href="#resources" class="mobile-nav-link" onclick="navigateTo('/resources')">üìö Resources</a>
                <a href="#rates" class="mobile-nav-link" onclick="navigateTo('/rates')">üìà Live Rates</a>
                <a href="#about" class="mobile-nav-link" onclick="navigateTo('/about')">‚ÑπÔ∏è About</a>
            </div>
        </div>
    </header>
    
    <!-- Enhanced USA Hero Section -->
    <section class="usa-hero">
        <div class="hero-container">
            <h1 class="hero-title">
                <span class="flag-icon">üá∫üá∏</span>
                Home Loan Pro ‚Äî AI‚ÄëPowered Mortgage Calculator
                <span class="ai-badge">AI Powered</span>
            </h1>
            <p class="hero-description">
                Calculate mortgage payments instantly with live rates, taxes, insurance & PMI for all 50 states. Features voice control, PWA support, and comprehensive AI insights.
            </p>
            <div class="hero-features">
                <div class="feature-badge">‚ú® Voice Control</div>
                <div class="feature-badge">üì± PWA Ready</div>
                <div class="feature-badge">üß† AI Insights</div>
                <div class="feature-badge">üìà Live Rates</div>
                <div class="feature-badge">‚ôø Accessible</div>
            </div>
        </div>
    </section>
    
    <!-- Voice Status Display -->
    <div id="voice-status" class="voice-status">
        <div class="voice-content">
            <div class="voice-indicator">
                <i class="fas fa-microphone"></i>
                <div class="voice-wave"></div>
            </div>
            <div class="voice-text-container">
                <div id="voice-text" class="voice-text">Listening...</div>
                <div id="voice-command" class="voice-command">Say "help" for commands</div>
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <main id="main-content" class="calculator-container">
        <!-- Enhanced Input Section - 35% Width -->
        <section class="input-section" style="flex: 0 0 35%;">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-home"></i>
                    USA Loan Details
                </h2>
                <div class="action-buttons">
                    <button class="action-btn secondary" onclick="clearAllInputs()" title="Clear all inputs">
                        <i class="fas fa-refresh"></i> Clear
                    </button>
                </div>
            </div>
            
            <!-- Primary Information -->
            <div class="form-section">
                <div class="subsection-title">
                    <span class="step-number">1</span>
                    Primary Information
                </div>
                
                <!-- Home Price -->
                <div class="form-group">
                    <label for="home-price" class="form-label">
                        <i class="fas fa-home"></i>
                        Home Price
                        <span class="usa-context">Enter the total purchase price of your home</span>
                    </label>
                    <div class="input-group">
                        <span class="input-prefix">$</span>
                        <input type="text" id="home-price" class="form-control" value="450,000" placeholder="450000" aria-describedby="home-price-help">
                    </div>
                    <small id="home-price-help" class="help-text">Average USA home price: $428,700 (Oct 2025)</small>
                    <div class="suggestion-chips">
                        <button class="suggestion-chip" onclick="setQuickValue('home-price', 300000)">$300K</button>
                        <button class="suggestion-chip" onclick="setQuickValue('home-price', 450000)">$450K</button>
                        <button class="suggestion-chip" onclick="setQuickValue('home-price', 600000)">$600K</button>
                        <button class="suggestion-chip" onclick="setQuickValue('home-price', 750000)">$750K</button>
                    </div>
                </div>
                
                <!-- Down Payment Toggle -->
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-piggy-bank"></i>
                        Down Payment
                    </label>
                    <div class="input-toggle">
                        <button type="button" class="toggle-btn active" onclick="showDownPaymentType('dollar')">Dollar Amount</button>
                        <button type="button" class="toggle-btn" onclick="showDownPaymentType('percent')">Percentage</button>
                    </div>
                    
                    <div id="down-payment-dollar" class="input-variant active">
                        <div class="input-group">
                            <span class="input-prefix">$</span>
                            <input type="text" id="down-payment" class="form-control" value="90,000" placeholder="90000" aria-describedby="down-payment-help">
                        </div>
                    </div>
                    
                    <div id="down-payment-percent" class="input-variant">
                        <div class="input-group">
                            <input type="number" id="down-payment-percent" class="form-control" value="20" min="0" max="50" placeholder="20">
                            <span class="input-suffix">%</span>
                        </div>
                    </div>
                    <small id="down-payment-help" class="help-text">Higher down payments reduce monthly payments and eliminate PMI</small>
                    <div class="suggestion-chips">
                        <button class="suggestion-chip" onclick="setQuickValue('down-payment-percent', 5)">5%</button>
                        <button class="suggestion-chip" onclick="setQuickValue('down-payment-percent', 10)">10%</button>
                        <button class="suggestion-chip" onclick="setQuickValue('down-payment-percent', 20)">20%</button>
                        <button class="suggestion-chip" onclick="setQuickValue('down-payment-percent', 25)">25%</button>
                    </div>
                </div>
                
                <!-- ZIP Code -->
                <div class="form-group">
                    <label for="zip-code" class="form-label">
                        <i class="fas fa-map-marker-alt"></i>
                        Property ZIP Code
                        <span class="usa-context">Used to auto-calculate property tax and insurance based on state rates</span>
                    </label>
                    <input type="text" id="zip-code" class="form-control" placeholder="12345" maxlength="5" pattern="[0-9]{5}" aria-describedby="zip-code-help">
                    <div id="zip-code-status" class="zip-status" style="display: none;"></div>
                    <small id="zip-code-help" class="help-text">Enter 5-digit ZIP code for accurate local rates & taxes (All 41,552+ ZIP codes supported)</small>
                </div>

                <!-- State Selector -->
                <div class="form-group">
                    <label for="property-state" class="form-label">
                        <i class="fas fa-flag-usa"></i>
                        Property State
                        <span class="usa-context">Used to auto-calculate property tax and insurance based on state rates</span>
                    </label>
                    <select id="property-state" class="form-control" aria-describedby="property-state-help">
                        <option value="">Select State</option>
                        <!-- States will be populated by JavaScript -->
                    </select>
                    <small id="property-state-help" class="help-text">Select your state for accurate local rates</small>
                </div>
                
                <!-- Credit Score -->
                <div class="form-group">
                    <label for="credit-score" class="form-label">
                        <i class="fas fa-chart-line"></i>
                        Credit Score
                        <span class="rate-impact-text">Higher credit scores typically qualify for lower interest rates</span>
                    </label>
                    <select id="credit-score" class="form-control" aria-describedby="credit-score-help">
                        <option value="800">Excellent (800+)</option>
                        <option value="750">Very Good (750-799)</option>
                        <option value="700" selected>Good (700-749)</option>
                        <option value="650">Fair (650-699)</option>
                        <option value="600">Poor (600-649)</option>
                        <option value="580">Bad (580-599)</option>
                    </select>
                    <div id="credit-impact" class="credit-impact" style="display: none;"></div>
                    <small id="credit-score-help" class="help-text">Your credit score significantly impacts your interest rate</small>
                </div>
                
                <!-- Interest Rate -->
                <div class="form-group">
                    <label for="interest-rate" class="form-label">
                        <i class="fas fa-percentage"></i>
                        Interest Rate (APR)
                    </label>
                    <div class="input-group">
                        <input type="number" id="interest-rate" class="form-control" value="6.44" min="0.1" max="20" step="0.01" placeholder="6.44" aria-describedby="interest-rate-help">
                        <span class="input-suffix">%</span>
                    </div>
                    <small id="interest-rate-help" class="help-text">Current average rate updated live from USA markets</small>
                    
                    <!-- Live Rates Display -->
                    <div class="current-rates-display">
                        <h4>
                            <i class="fas fa-broadcast-tower"></i>
                            Current USA Rates
                            <span class="live-indicator">LIVE</span>
                        </h4>
                        <div class="rates-grid">
                            <div class="rate-item">
                                <div class="rate-label">30-Year Fixed</div>
                                <div class="rate-value" id="rate-30-year">6.44%</div>
                                <div class="rate-change positive" id="rate-30-change">+0.15%</div>
                            </div>
                            <div class="rate-item">
                                <div class="rate-label">15-Year Fixed</div>
                                <div class="rate-value" id="rate-15-year">5.74%</div>
                                <div class="rate-change negative" id="rate-15-change">-0.08%</div>
                            </div>
                            <div class="rate-item">
                                <div class="rate-label">5/1 ARM</div>
                                <div class="rate-value" id="rate-arm">5.90%</div>
                                <div class="rate-change neutral" id="rate-arm-change">0.00%</div>
                            </div>
                            <div class="rate-item">
                                <div class="rate-label">FHA 30-Year</div>
                                <div class="rate-value" id="rate-fha">6.45%</div>
                                <div class="rate-change positive" id="rate-fha-change">+0.05%</div>
                            </div>
                        </div>
                        <div class="rates-disclaimer">
                            <span class="live-rate-indicator">
                                <i class="fas fa-circle pulse-dot" style="color: var(--usa-secondary);"></i>
                                Source: Bankrate.com ‚Ä¢ Updated: Just now ‚Ä¢ USA Market Average
                            </span>
                        </div>
                    </div>
                </div>
                
                <!-- Loan Type Selection -->
                <div class="form-group">
                    <div class="loan-type-group">
                        <label class="form-label">
                            <i class="fas fa-university"></i>
                            Loan Type
                        </label>
                        <div class="loan-type-selector">
                            <button type="button" class="loan-type-btn active" data-loan-type="conventional" onclick="selectLoanType('conventional')">
                                <i class="fas fa-home"></i>
                                <span>Conventional</span>
                                <small>Most common loan type</small>
                            </button>
                            <button type="button" class="loan-type-btn" data-loan-type="fha" onclick="selectLoanType('fha')">
                                <i class="fas fa-shield-alt"></i>
                                <span>FHA</span>
                                <small>3.5% down minimum</small>
                            </button>
                            <button type="button" class="loan-type-btn" data-loan-type="va" onclick="selectLoanType('va')">
                                <i class="fas fa-flag-usa"></i>
                                <span>VA</span>
                                <small>Veterans only, 0% down</small>
                            </button>
                            <button type="button" class="loan-type-btn" data-loan-type="usda" onclick="selectLoanType('usda')">
                                <i class="fas fa-tractor"></i>
                                <span>USDA</span>
                                <small>Rural areas, 0% down</small>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Loan Term -->
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-calendar-alt"></i>
                        Loan Term
                    </label>
                    <div class="term-selector">
                        <button type="button" class="term-chip" data-term="30" onclick="selectTerm(30)">
                            <span class="term-years">30</span>
                            <span class="term-label">years</span>
                            <span class="term-note">Most popular</span>
                        </button>
                        <button type="button" class="term-chip" data-term="15" onclick="selectTerm(15)">
                            <span class="term-years">15</span>
                            <span class="term-label">years</span>
                            <span class="term-note">Lower rate</span>
                        </button>
                        <button type="button" class="term-chip" data-term="20" onclick="selectTerm(20)">
                            <span class="term-years">20</span>
                            <span class="term-label">years</span>
                        </button>
                    </div>
                    <div style="margin-top: 16px;">
                        <input type="number" id="custom-term" class="form-control" placeholder="Custom loan term (5-50 years)" min="5" max="50" aria-describedby="custom-term-help">
                        <small id="custom-term-help" class="help-text">Custom loan term between 5-50 years (overrides above selections)</small>
                        <div id="custom-term-status" class="custom-term-status"></div>
                    </div>
                </div>
            </div>
            
            <!-- Property & Insurance Details -->
            <div class="form-section">
                <div class="subsection-title">
                    <span class="step-number">2</span>
                    Property & Insurance Details
                </div>
                
                <!-- Property Tax -->
                <div class="form-group">
                    <label for="property-tax" class="form-label">
                        <i class="fas fa-landmark"></i>
                        Property Tax (Annual)
                        <span class="auto-calc-text">Auto-calculated based on state tax rate and home price</span>
                    </label>
                    <div class="input-group">
                        <span class="input-prefix">$</span>
                        <input type="text" id="property-tax" class="form-control" value="9,000" placeholder="9000" aria-describedby="property-tax-help">
                    </div>
                    <small id="property-tax-help" class="help-text auto-calc-note">Calculated automatically when state is selected</small>
                </div>
                
                <!-- Home Insurance -->
                <div class="form-group">
                    <label for="home-insurance" class="form-label">
                        <i class="fas fa-shield-alt"></i>
                        Home Insurance (Annual)
                        <span class="auto-calc-text">Auto-calculated based on state insurance rate and home price</span>
                    </label>
                    <div class="input-group">
                        <span class="input-prefix">$</span>
                        <input type="text" id="home-insurance" class="form-control" value="1,800" placeholder="1800" aria-describedby="home-insurance-help">
                    </div>
                    <small id="home-insurance-help" class="help-text auto-calc-note">Calculated automatically when state is selected</small>
                </div>
                
                <!-- PMI -->
                <div class="form-group">
                    <label for="pmi" class="form-label">
                        <i class="fas fa-umbrella"></i>
                        PMI (Private Mortgage Insurance)
                        <span class="auto-calc-text">Auto-calculated at 0.5% annually for down payments less than 20%</span>
                    </label>
                    <div class="input-group">
                        <span class="input-prefix">$</span>
                        <input type="text" id="pmi" class="form-control" value="0" placeholder="0" aria-describedby="pmi-help">
                    </div>
                    <small id="pmi-help" class="help-text auto-calc-note">Required for conventional loans with less than 20% down</small>
                </div>
                
                <!-- HOA Fees -->
                <div class="form-group">
                    <label for="hoa-fees" class="form-label">
                        <i class="fas fa-building"></i>
                        HOA Fees (Monthly)
                        <span class="optional-text">Homeowner Association monthly fees (condos, planned communities)</span>
                    </label>
                    <div class="input-group">
                        <span class="input-prefix">$</span>
                        <input type="text" id="hoa-fees" class="form-control" placeholder="0" aria-describedby="hoa-fees-help">
                    </div>
                    <small id="hoa-fees-help" class="help-text">Monthly fees for community amenities and maintenance</small>
                </div>
            </div>
            
            <!-- Extra Payments -->
            <div class="form-section">
                <div class="subsection-title">
                    <span class="step-number">3</span>
                    Extra Payments (Optional)
                </div>
                
                <!-- Extra Monthly Payment -->
                <div class="form-group">
                    <label for="extra-monthly" class="form-label">
                        <i class="fas fa-calendar-plus"></i>
                        Extra Monthly Payment
                        <span class="savings-preview">See impact on interest savings and loan term in AI insights</span>
                    </label>
                    <div class="frequency-toggle">
                        <button type="button" class="frequency-btn active" data-frequency="monthly" onclick="setExtraPaymentFrequency('monthly')">
                            <i class="fas fa-calendar"></i> Monthly
                        </button>
                        <button type="button" class="frequency-btn" data-frequency="yearly" onclick="setExtraPaymentFrequency('yearly')">
                            <i class="fas fa-calendar-year"></i> Yearly
                        </button>
                        <button type="button" class="frequency-btn" data-frequency="biweekly" onclick="setExtraPaymentFrequency('biweekly')">
                            <i class="fas fa-calendar-week"></i> Bi-weekly
                        </button>
                    </div>
                    <div class="input-group">
                        <span class="input-prefix">$</span>
                        <input type="text" id="extra-monthly" class="form-control" placeholder="0" aria-describedby="extra-monthly-help">
                    </div>
                    <small id="extra-monthly-help" class="help-text">Extra payments directly reduce your loan principal</small>
                    <div id="extra-payment-preview" class="extra-payment-preview" style="display: none;"></div>
                </div>
                
                <!-- One-time Payment -->
                <div class="form-group">
                    <label for="extra-onetime" class="form-label">
                        <i class="fas fa-hand-holding-usd"></i>
                        One-time Payment (Year 1)
                        <span class="optional-text">Large one-time payment applied in the first year (tax refund, bonus, etc.)</span>
                    </label>
                    <div class="input-group">
                        <span class="input-prefix">$</span>
                        <input type="text" id="extra-onetime" class="form-control" placeholder="0" aria-describedby="extra-onetime-help">
                    </div>
                    <small id="extra-onetime-help" class="help-text">Applied as principal payment in first year</small>
                </div>
            </div>
            
            <!-- Closing Costs -->
            <div class="form-section">
                <div class="subsection-title">
                    <span class="step-number">4</span>
                    Closing Costs Estimation
                </div>
                
                <div class="form-group">
                    <label for="closing-costs-percentage" class="form-label">
                        <i class="fas fa-file-invoice-dollar"></i>
                        Closing Costs
                    </label>
                    <div class="input-group">
                        <input type="number" id="closing-costs-percentage" class="form-control" value="3" min="0" max="10" step="0.1" placeholder="3">
                        <span class="input-suffix">%</span>
                    </div>
                    <div id="closing-costs-amount" class="closing-costs-amount">= $13,500</div>
                    <small class="help-text">Typical closing costs range from 2-5% of home price</small>
                </div>
            </div>
            
            <div class="auto-calc-note" style="text-align: center; margin-top: 20px; font-style: italic;">
                <i class="fas fa-magic" style="color: var(--usa-primary);"></i>
                All calculations update automatically as you type - no calculate button needed!
            </div>
        </section>
        
        <!-- Enhanced Results Section - 35% Width -->
        <section class="results-section" style="flex: 0 0 35%;">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-chart-pie"></i>
                    Monthly Payment Breakdown
                </h2>
            </div>
            
            <!-- Enhanced Tabs for Results -->
            <div class="results-tabs">
                <button class="tab-btn active" data-tab="payment-summary" onclick="showTab('payment-summary')">
                    <i class="fas fa-calculator"></i> Payment Summary
                </button>
                <button class="tab-btn" data-tab="mortgage-chart" onclick="showTab('mortgage-chart')">
                    <i class="fas fa-chart-line"></i> Mortgage Over Time
                </button>
                <button class="tab-btn" data-tab="ai-insights" onclick="showTab('ai-insights')">
                    <i class="fas fa-brain"></i> AI Insights
                </button>
                <button class="tab-btn" data-tab="payment-schedule" onclick="showTab('payment-schedule')">
                    <i class="fas fa-table"></i> Payment Schedule
                </button>
            </div>
            
            <!-- Payment Summary Tab (Default) -->
            <div id="payment-summary" class="tab-content active">
                <!-- Enhanced Main Payment Display -->
                <div class="main-payment-card">
                    <div class="payment-header">
                        <h3>Total Monthly Payment</h3>
                        <div class="loan-type-badge" id="loan-type-display">Conventional Loan</div>
                    </div>
                    <div class="payment-amount">
                        <span class="amount-value" id="total-payment">$2,768</span>
                        <div class="payment-breakdown-summary">
                            <span id="pi-summary">$2,025 P&I</span>
                            <span class="separator">‚Ä¢</span>
                            <span id="escrow-summary">$743 Escrow</span>
                        </div>
                    </div>
                </div>
                
                <!-- Enhanced Payment Breakdown -->
                <div class="payment-breakdown">
                    <h3>Payment Components</h3>
                    <div class="breakdown-items">
                        <div class="breakdown-item" id="principal-interest-item">
                            <div class="item-info">
                                <div class="item-label">Principal & Interest</div>
                                <div class="item-amount" id="principal-interest-amount">$2,025</div>
                            </div>
                            <div class="item-bar">
                                <div class="item-fill" id="principal-interest-bar" style="width: 73%;"></div>
                            </div>
                            <div class="item-percentage" id="principal-interest-percent">73%</div>
                        </div>
                        
                        <div class="breakdown-item" id="property-tax-item">
                            <div class="item-info">
                                <div class="item-label">Property Tax</div>
                                <div class="item-amount" id="property-tax-amount">$750</div>
                            </div>
                            <div class="item-bar">
                                <div class="item-fill" id="property-tax-bar" style="width: 27%;"></div>
                            </div>
                            <div class="item-percentage" id="property-tax-percent">27%</div>
                        </div>
                        
                        <div class="breakdown-item" id="home-insurance-item">
                            <div class="item-info">
                                <div class="item-label">Home Insurance</div>
                                <div class="item-amount" id="home-insurance-amount">$150</div>
                            </div>
                            <div class="item-bar">
                                <div class="item-fill" id="home-insurance-bar" style="width: 5%;"></div>
                            </div>
                            <div class="item-percentage" id="home-insurance-percent">5%</div>
                        </div>
                        
                        <div class="breakdown-item" id="pmi-item" style="display: none;">
                            <div class="item-info">
                                <div class="item-label">PMI</div>
                                <div class="item-amount" id="pmi-amount">$0</div>
                            </div>
                            <div class="item-bar">
                                <div class="item-fill" id="pmi-bar" style="width: 0%;"></div>
                            </div>
                            <div class="item-percentage" id="pmi-percent">0%</div>
                        </div>
                        
                        <div class="breakdown-item" id="hoa-item" style="display: none;">
                            <div class="item-info">
                                <div class="item-label">HOA Fees</div>
                                <div class="item-amount" id="hoa-amount">$0</div>
                            </div>
                            <div class="item-bar">
                                <div class="item-fill" id="hoa-bar" style="width: 0%;"></div>
                            </div>
                            <div class="item-percentage" id="hoa-percent">0%</div>
                        </div>
                    </div>
                </div>
                
                <!-- Enhanced Loan Summary -->
                <div class="loan-summary">
                    <h3>Loan Summary</h3>
                    <div class="summary-grid">
                        <div class="summary-item">
                            <span class="summary-label">Loan Amount</span>
                            <span class="summary-value" id="loan-amount-summary">$360,000</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Total Interest</span>
                            <span class="summary-value" id="total-interest-summary">$367,520</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Total Cost</span>
                            <span class="summary-value" id="total-cost-summary">$727,520</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Payoff Date</span>
                            <span class="summary-value" id="payoff-date-summary">Oct 2054</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Closing Costs</span>
                            <span class="summary-value" id="closing-costs-summary">$13,500</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Mortgage Over Time Chart Tab -->
            <div id="mortgage-chart" class="tab-content">
                <div class="chart-section">
                    <div class="chart-header">
                        <h3>
                            <i class="fas fa-chart-line"></i>
                            Mortgage Balance Over Time
                        </h3>
                        <div class="chart-controls">
                            <button class="chart-control-btn" onclick="toggleChartView()" title="Toggle chart view">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="chart-control-btn" onclick="downloadChart()" title="Download chart">
                                <i class="fas fa-download"></i>
                            </button>
                        </div>
                    </div>
                    <div class="chart-subtitle">
                        Loan: $360,000 ‚Ä¢ Term: 30 years ‚Ä¢ Rate: 6.44%
                    </div>
                    <div class="chart-container">
                        <canvas id="mortgage-timeline-chart" width="400" height="200"></canvas>
                    </div>
                    
                    <!-- Enhanced Year Slider -->
                    <div class="year-slider-section">
                        <label for="year-range" class="slider-label">
                            <i class="fas fa-calendar-alt"></i>
                            Drag to see loan balance at any year
                        </label>
                        <input type="range" id="year-range" class="year-slider" min="1" max="30" value="15" aria-label="Select year to view loan details">
                        <div class="year-display">
                            <span id="year-label">Year 15</span>
                        </div>
                        <div class="year-details">
                            <div class="detail-item">
                                <span class="detail-label">Principal Paid</span>
                                <span class="detail-value" id="principal-paid">$125,000</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Interest Paid</span>
                                <span class="detail-value" id="interest-paid">$200,000</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Remaining Balance</span>
                                <span class="detail-value" id="remaining-balance">$195,000</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Enhanced AI Insights Tab -->
            <div id="ai-insights" class="tab-content">
                <div class="ai-insights-section">
                    <div class="insights-header">
                        <h3>
                            <i class="fas fa-brain"></i>
                            AI-Powered Insights
                            <span class="ai-badge">AI Powered</span>
                        </h3>
                        <button id="refresh-insights" class="refresh-btn" onclick="generateAIInsights()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                    
                    <div class="insights-container">
                        <div class="insight-item insight-success">
                            <div class="insight-header">
                                <div class="insight-icon">üí∞</div>
                                <div class="insight-content">
                                    <h4 class="insight-title">Smart Savings Opportunity</h4>
                                    <p class="insight-text">Adding just $100 extra monthly payment could save you $45,000 in interest and pay off your loan 4.2 years earlier!</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="insight-item insight-info gradient-rainbow">
                            <div class="insight-header">
                                <div class="insight-icon">üéØ</div>
                                <div class="insight-content">
                                    <h4 class="insight-title">Rate Optimization</h4>
                                    <p class="insight-text">Your current rate is competitive! With excellent credit, you could potentially qualify for 0.25% lower rates with different lenders.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="insight-item insight-warning">
                            <div class="insight-header">
                                <div class="insight-icon">üìä</div>
                                <div class="insight-content">
                                    <h4 class="insight-title">Down Payment Analysis</h4>
                                    <p class="insight-text">Your 20% down payment eliminates PMI, saving $225/month. Great choice for building equity faster!</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="insight-item insight-special">
                            <div class="insight-header">
                                <div class="insight-icon">üèòÔ∏è</div>
                                <div class="insight-content">
                                    <h4 class="insight-title">Market Insights</h4>
                                    <p class="insight-text">Property values in your area have increased 8.2% this year. Your investment timing looks favorable for long-term appreciation.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div id="dynamic-insights">
                            <!-- Dynamic insights will be generated here -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Payment Schedule Tab -->
            <div id="payment-schedule" class="tab-content">
                <div class="schedule-section">
                    <h3>
                        <i class="fas fa-table"></i>
                        Amortization Schedule
                    </h3>
                    
                    <div class="schedule-controls">
                        <div class="schedule-view-toggle">
                            <button class="schedule-view-btn active" onclick="setScheduleView('monthly')">Monthly</button>
                            <button class="schedule-view-btn" onclick="setScheduleView('yearly')">Yearly</button>
                        </div>
                        <div class="schedule-export">
                            <button class="export-btn" onclick="exportSchedule('csv')">
                                <i class="fas fa-download"></i> Export CSV
                            </button>
                            <button class="export-btn" onclick="exportSchedule('pdf')">
                                <i class="fas fa-file-pdf"></i> Export PDF
                            </button>
                        </div>
                    </div>
                    
                    <div class="schedule-container">
                        <div class="schedule-table-wrapper">
                            <table class="schedule-table" id="amortization-table">
                                <thead>
                                    <tr>
                                        <th>Payment</th>
                                        <th>Date</th>
                                        <th>Payment</th>
                                        <th>Principal</th>
                                        <th>Interest</th>
                                        <th>Balance</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- First 6 payments will be shown by default -->
                                    <tr class="loading-row">
                                        <td colspan="6">Auto-calculating payment schedule...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="schedule-pagination">
                            <button class="pagination-btn" id="prev-payments" onclick="showPreviousPayments()" disabled>
                                <i class="fas fa-chevron-left"></i> Previous
                            </button>
                            <span class="pagination-info" id="schedule-info">Payments 1-6 of 360</span>
                            <button class="pagination-btn" id="next-payments" onclick="showNextPayments()">
                                Next <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Enhanced Sidebar Section - 30% Width -->
        <aside class="sidebar-section" style="flex: 0 0 30%;">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-handshake"></i>
                    Lenders & Resources
                </h2>
            </div>
            
            <!-- Enhanced Sharing Options -->
            <div class="sharing-section">
                <h3>
                    <i class="fas fa-share-alt"></i>
                    Universal Sharing Options
                </h3>
                <div class="sharing-buttons">
                    <button class="share-btn primary" onclick="shareResults()" title="Share your calculation">
                        <i class="fas fa-share"></i> Share
                    </button>
                    <button class="share-btn secondary" onclick="downloadPDF()" title="Download as PDF">
                        <i class="fas fa-file-pdf"></i> Download
                    </button>
                    <button class="share-btn secondary" onclick="printResults()" title="Print results">
                        <i class="fas fa-print"></i> Print
                    </button>
                    <button class="share-btn secondary" onclick="saveResults()" title="Save for comparison">
                        <i class="fas fa-save"></i> Save Result
                    </button>
                </div>
                
                <div class="compare-section">
                    <button class="compare-btn" onclick="showLoanComparisonWindow()" title="Compare loan scenarios">
                        <i class="fas fa-balance-scale"></i> Compare Loan Scenarios
                    </button>
                    <div id="comparison-container" class="comparison-container" style="display: none;">
                        <!-- Comparison table will be shown here -->
                    </div>
                </div>
            </div>
            
            <!-- Featured Lenders -->
            <div class="lender-cards">
                <h3>
                    <i class="fas fa-star"></i>
                    Featured USA Lenders
                </h3>
                
                <div class="lender-card featured">
                    <div class="lender-header">
                        <div class="lender-logo">üöÄ</div>
                        <div class="lender-info">
                            <h4>Rocket Mortgage</h4>
                            <div class="lender-rating">
                                <span class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                <span class="rating-text">4.8/5</span>
                            </div>
                        </div>
                    </div>
                    <div class="lender-features">
                        <div class="feature-item">
                            <i class="fas fa-clock"></i>
                            Fast approval process
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-mobile-alt"></i>
                            Mobile-first experience
                        </div>
                    </div>
                    <div class="lender-rates">
                        <div class="rate-info">
                            <span class="rate-label">30-year fixed (from)</span>
                            <span class="rate-value">6.375%</span>
                        </div>
                    </div>
                    <button class="lender-cta" onclick="trackLender('rocket')">
                        Get Quote <i class="fas fa-external-link-alt"></i>
                    </button>
                </div>
                
                <div class="lender-card">
                    <div class="lender-header">
                        <div class="lender-logo">üíô</div>
                        <div class="lender-info">
                            <h4>Better Mortgage</h4>
                            <div class="lender-rating">
                                <span class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                <span class="rating-text">4.6/5</span>
                            </div>
                        </div>
                    </div>
                    <div class="lender-features">
                        <div class="feature-item">
                            <i class="fas fa-dollar-sign"></i>
                            $0 lender fees
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-shield-alt"></i>
                            Rate lock guarantee
                        </div>
                    </div>
                    <div class="lender-rates">
                        <div class="rate-info">
                            <span class="rate-label">30-year fixed (from)</span>
                            <span class="rate-value">6.425%</span>
                        </div>
                    </div>
                    <button class="lender-cta" onclick="trackLender('better')">
                        Get Quote <i class="fas fa-external-link-alt"></i>
                    </button>
                </div>
                
                <div class="lender-card">
                    <div class="lender-header">
                        <div class="lender-logo">üè¶</div>
                        <div class="lender-info">
                            <h4>Chase Home Lending</h4>
                            <div class="lender-rating">
                                <span class="stars">‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                <span class="rating-text">4.4/5</span>
                            </div>
                        </div>
                    </div>
                    <div class="lender-features">
                        <div class="feature-item">
                            <i class="fas fa-university"></i>
                            Major bank stability
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-users"></i>
                            Relationship discounts
                        </div>
                    </div>
                    <div class="lender-rates">
                        <div class="rate-info">
                            <span class="rate-label">30-year fixed (from)</span>
                            <span class="rate-value">6.500%</span>
                        </div>
                    </div>
                    <button class="lender-cta" onclick="trackLender('chase')">
                        Get Quote <i class="fas fa-external-link-alt"></i>
                    </button>
                </div>
            </div>
            
            <!-- USA Housing Market Insights -->
            <div class="market-insights">
                <h3>
                    <i class="fas fa-chart-trending-up"></i>
                    USA Housing Market
                </h3>
                <div class="market-stats">
                    <div class="stat-item">
                        <div class="stat-icon">üè†</div>
                        <div class="stat-info">
                            <div class="stat-label">Median Home Price</div>
                            <div class="stat-value">$428,700</div>
                            <div class="stat-change positive">+8.2% YoY</div>
                        </div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon">üìà</div>
                        <div class="stat-info">
                            <div class="stat-label">30-Year Fixed Rate</div>
                            <div class="stat-value">6.44%</div>
                            <div class="stat-change positive">+0.15% this week</div>
                        </div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-info">
                            <div class="stat-label">Housing Inventory</div>
                            <div class="stat-value">4.2 months</div>
                            <div class="stat-change negative">-2.1% from last month</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- USA Government Programs -->
            <div class="government-programs">
                <h3>
                    <i class="fas fa-flag-usa"></i>
                    USA Government Programs
                </h3>
                <div class="program-list">
                    <div class="program-item">
                        <div class="program-icon">üè°</div>
                        <div class="program-info">
                            <h4>FHA Loans</h4>
                            <p>3.5% down payment minimum, flexible credit requirements</p>
                            <a href="#" class="program-link">Learn More</a>
                        </div>
                    </div>
                    <div class="program-item">
                        <div class="program-icon">üá∫üá∏</div>
                        <div class="program-info">
                            <h4>VA Loans</h4>
                            <p>0% down for qualified veterans and service members</p>
                            <a href="#" class="program-link">Check Eligibility</a>
                        </div>
                    </div>
                    <div class="program-item">
                        <div class="program-icon">üåæ</div>
                        <div class="program-info">
                            <h4>USDA Rural Loans</h4>
                            <p>0% down for eligible rural and suburban areas</p>
                            <a href="#" class="program-link">See Areas</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Advertisement/Sponsor Section -->
            <div class="sponsor-section">
                <h3>
                    <i class="fas fa-ad"></i>
                    Sponsored
                </h3>
                <div class="sponsor-ad">
                    <div class="ad-content">
                        <div class="ad-logo">üè†</div>
                        <div class="ad-text">
                            <h4>First-Time Homebuyer?</h4>
                            <p>Get up to $15,000 in down payment assistance. Check your eligibility now!</p>
                        </div>
                    </div>
                    <button class="ad-cta">Learn More</button>
                </div>
                
                <div class="sponsor-ad">
                    <div class="ad-content">
                        <div class="ad-logo">üí∞</div>
                        <div class="ad-text">
                            <h4>Refinance Special</h4>
                            <p>Rates as low as 5.99% APR. No closing costs for qualified borrowers.</p>
                        </div>
                    </div>
                    <button class="ad-cta">Get Quote</button>
                </div>
            </div>
        </aside>
    </main>
    
    <!-- Enhanced Footer -->
    <footer class="site-footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>
                        <i class="fas fa-calculator"></i>
                        FinGuid USA
                    </h3>
                    <p>World's First AI-Enhanced USA Mortgage Calculator. Calculate payments instantly with live rates, taxes, insurance & PMI for all 50 states.</p>
                    <div class="footer-social">
                        <a href="#" class="social-link" aria-label="Facebook">
                            <i class="fab fa-facebook"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="LinkedIn">
                            <i class="fab fa-linkedin"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="YouTube">
                            <i class="fab fa-youtube"></i>
                        </a>
                    </div>
                </div>
                
                <div class="footer-links">
                    <div class="footer-column">
                        <h4>Calculators</h4>
                        <ul>
                            <li><a href="#">Mortgage Calculator</a></li>
                            <li><a href="#">Refinance Calculator</a></li>
                            <li><a href="#">Affordability Calculator</a></li>
                            <li><a href="#">FHA Calculator</a></li>
                            <li><a href="#">VA Loan Calculator</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h4>Resources</h4>
                        <ul>
                            <li><a href="#">Mortgage Rates</a></li>
                            <li><a href="#">First-Time Buyers</a></li>
                            <li><a href="#">Government Programs</a></li>
                            <li><a href="#">Market Analysis</a></li>
                            <li><a href="#">Blog</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h4>Tools</h4>
                        <ul>
                            <li><a href="#">Rate Comparison</a></li>
                            <li><a href="#">Lender Reviews</a></li>
                            <li><a href="#">Payment Calculator</a></li>
                            <li><a href="#">Tax Calculator</a></li>
                            <li><a href="#">Insurance Calculator</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h4>Company</h4>
                        <ul>
                            <li><a href="#">About Us</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                            <li><a href="#">Terms of Service</a></li>
                            <li><a href="#">Contact</a></li>
                            <li><a href="#">Support</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="footer-disclaimer">
                    <p><strong>Disclaimer:</strong> This calculator provides estimates only. Actual loan terms may vary. Rates and payments shown are for illustration purposes. Consult with qualified lenders for accurate quotes.</p>
                    <p><strong>Data Sources:</strong> Rates from Bankrate, Freddie Mac, and major lenders. Property tax and insurance data from state and local sources. All 41,552+ US ZIP codes supported.</p>
                </div>
                
                <div class="footer-copyright">
                    <p>&copy; 2025 FinGuid USA. All rights reserved. World's First AI Calculator Platform for Americans</p>
                    <div class="footer-badges">
                        <span class="badge">üá∫üá∏ Made in USA</span>
                        <span class="badge">üîí SSL Secure</span>
                        <span class="badge">‚ôø WCAG 2.1 AA</span>
                        <span class="badge">üì± PWA Ready</span>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Loan Comparison Modal -->
    <div id="loan-comparison-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Loan Comparison Tool</h3>
                <button class="modal-close" onclick="closeLoanComparison()">√ó</button>
            </div>
            <div class="modal-body">
                <div id="comparison-table-container">
                    <!-- Comparison table will be populated here -->
                </div>
                <div class="comparison-actions">
                    <button class="btn btn-primary" onclick="addCurrentLoan()">
                        <i class="fas fa-plus"></i> Add Current Calculation
                    </button>
                    <button class="btn btn-secondary" onclick="exportComparison()">
                        <i class="fas fa-download"></i> Export Comparison
                    </button>
                    <button class="btn btn-danger" onclick="clearAllComparisons()">
                        <i class="fas fa-trash"></i> Clear All
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Loading Indicator -->
    <div id="loading-indicator" class="loading-indicator" style="display: none;">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">Calculating...</div>
        </div>
    </div>
    
    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>
    
    <!-- Scripts -->
    <script src="mortgage-calculator.js"></script>
</body>
</html>
