<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A modern, AI-enhanced mortgage calculator with real-time insights, amortization schedules, and dynamic charts.">
    <meta name="keywords" content="mortgage calculator, home loan calculator, AI mortgage calculator, mortgage rates, real-time calculator, amortization schedule">
    <meta name="author" content="FinGuid">
    <meta name="robots" content="index, follow">

    <title>Upgraded AI Mortgage Calculator | Real-Time Rates & Smart Insights</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js" as="script">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" as="style">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">

    <link rel="stylesheet" href="mortgage-calculator.css">

    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè†</text></svg>">
</head>
<body data-theme="light">
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <div id="sr-announcements" class="sr-only" aria-live="polite" aria-atomic="true"></div>

    <header class="global-controls" role="banner">
        <div class="controls-container">
            <div class="header-brand">
                <a href="#" class="brand-link">
                    <i class="fa-solid fa-house-chimney-window"></i>
                    <strong>MortgageCalc AI</strong>
                </a>
            </div>
            <div class="accessibility-controls">
                <button id="theme-toggle" class="control-btn" aria-label="Toggle dark mode" title="Toggle dark/light theme">
                    <i id="theme-icon" class="fas fa-moon"></i>
                </button>
                <button id="voice-toggle" class="control-btn" aria-label="Toggle voice control" title="Activate voice control">
                    <i id="voice-icon" class="fas fa-microphone"></i>
                </button>
            </div>
        </div>
    </header>

    <div id="voice-status" class="voice-status" style="display: none;" role="status" aria-live="assertive">
        <div class="voice-wave">
            <span></span><span></span><span></span><span></span>
        </div>
        <div id="voice-text">Listening...</div>
    </div>
    
    <main id="main-content" class="calculator-container" role="main">
        <div class="calculator-grid">
            <aside class="input-card card" role="complementary" aria-label="Mortgage calculation inputs">
                <div class="panel-header">
                    <h2>
                        <i class="fas fa-edit"></i>
                        Mortgage Details
                    </h2>
                    <div class="header-actions">
                        <button class="btn btn--ghost btn--sm" id="reset-form" title="Reset all fields">
                            <i class="fas fa-undo"></i> Reset
                        </button>
                    </div>
                </div>

                <form class="mortgage-form" role="form" aria-label="Mortgage calculation form">
                    <fieldset class="form-section">
                        <legend class="section-title">
                            <span class="section-number">1</span> Home Price
                        </legend>
                        <div class="form-group">
                            <label for="home-price" class="form-label">Purchase Price</label>
                            <div class="input-with-prefix">
                                <span class="input-prefix">$</span>
                                <input type="text" id="home-price" class="form-control" value="400,000" required autocomplete="off" inputmode="numeric">
                            </div>
                        </div>
                    </fieldset>

                    <fieldset class="form-section">
                        <legend class="section-title">
                            <span class="section-number">2</span> Down Payment
                        </legend>
                        <div class="form-group-pair">
                            <div class="form-group">
                                <label for="down-payment" class="form-label">Amount</label>
                                <div class="input-with-prefix">
                                    <span class="input-prefix">$</span>
                                    <input type="text" id="down-payment" class="form-control" value="80,000" autocomplete="off" inputmode="numeric">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="down-payment-percent" class="form-label">Percentage</label>
                                <div class="input-with-suffix">
                                    <input type="text" id="down-payment-percent" class="form-control" value="20" autocomplete="off" inputmode="decimal">
                                    <span class="input-suffix">%</span>
                                </div>
                            </div>
                        </div>
                        <div id="pmi-warning" class="pmi-warning" style="display: none;">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span>PMI may be required with less than 20% down.</span>
                        </div>
                    </fieldset>

                    <fieldset class="form-section">
                        <legend class="section-title">
                            <span class="section-number">3</span> Loan Details
                        </legend>
                        <div class="form-group-pair">
                            <div class="form-group">
                                <label for="interest-rate" class="form-label">Interest Rate</label>
                                <div class="input-with-suffix">
                                    <input type="text" id="interest-rate" class="form-control" value="6.5" required autocomplete="off" inputmode="decimal">
                                    <span class="input-suffix">%</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="loan-term" class="form-label">Loan Term</label>
                                <div class="select-wrapper">
                                    <select id="loan-term" class="form-control">
                                        <option value="30">30 Years</option>
                                        <option value="20">20 Years</option>
                                        <option value="15">15 Years</option>
                                        <option value="10">10 Years</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </fieldset>

                    <details class="advanced-options">
                        <summary class="advanced-summary">
                            <span><i class="fas fa-plus-circle"></i> Additional Costs & Extra Payments</span>
                            <i class="fas fa-chevron-down expand-icon"></i>
                        </summary>
                        <div class="advanced-content">
                            <fieldset class="form-section-inner">
                                <legend class="section-title-inner">Annual Costs</legend>
                                <div class="form-group-pair">
                                    <div class="form-group">
                                        <label for="property-tax" class="form-label">Property Tax</label>
                                        <div class="input-with-prefix">
                                            <span class="input-prefix">$</span>
                                            <input type="text" id="property-tax" class="form-control" value="4,800" autocomplete="off" inputmode="numeric">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="home-insurance" class="form-label">Home Insurance</label>
                                        <div class="input-with-prefix">
                                            <span class="input-prefix">$</span>
                                            <input type="text" id="home-insurance" class="form-control" value="1,500" autocomplete="off" inputmode="numeric">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="pmi" class="form-label">Monthly PMI (Private Mortgage Insurance)</label>
                                    <div class="input-with-prefix">
                                        <span class="input-prefix">$</span>
                                        <input type="text" id="pmi" class="form-control" value="0" readonly>
                                    </div>
                                </div>
                            </fieldset>
                            <fieldset class="form-section-inner">
                                <legend class="section-title-inner">Extra Payments</legend>
                                <div class="form-group">
                                     <label class="form-label">Frequency</label>
                                    <div class="toggle-group">
                                        <button type="button" id="monthly-toggle" class="toggle-btn active" data-frequency="monthly">Monthly</button>
                                        <button type="button" id="weekly-toggle" class="toggle-btn" data-frequency="weekly">Weekly</button>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="extra-payment-amount" id="extra-payment-label" class="form-label">Extra Monthly Amount</label>
                                    <div class="input-with-prefix">
                                        <span class="input-prefix">$</span>
                                        <input type="text" id="extra-payment-amount" class="form-control" value="0" autocomplete="off" inputmode="numeric">
                                    </div>
                                </div>
                                <div id="savings-preview" class="savings-preview">
                                    Add extra payments to see potential savings.
                                </div>
                            </fieldset>
                        </div>
                    </details>
                </form>
            </aside>

            <section class="results-card card" role="main" aria-label="Mortgage calculation results">
                <div class="total-payment-highlight">
                    <div class="payment-header">
                        <span class="payment-label">Estimated Monthly Payment</span>
                    </div>
                    <div id="total-payment" class="payment-amount">$0</div>
                </div>

                <div class="payment-breakdown">
                    <div id="breakdown-chart-container">
                        <canvas id="breakdown-chart"></canvas>
                    </div>
                    <div class="breakdown-legend">
                        <div class="legend-item"><div class="legend-color" style="--color: var(--chart-pi);"></div><span class="legend-label">Principal & Interest</span><span id="principal-interest" class="legend-value">$0</span></div>
                        <div class="legend-item"><div class="legend-color" style="--color: var(--chart-tax);"></div><span class="legend-label">Property Tax</span><span id="monthly-tax" class="legend-value">$0</span></div>
                        <div class="legend-item"><div class="legend-color" style="--color: var(--chart-insurance);"></div><span class="legend-label">Home Insurance</span><span id="monthly-insurance" class="legend-value">$0</span></div>
                        <div class="legend-item"><div class="legend-color" style="--color: var(--chart-pmi);"></div><span class="legend-label">PMI</span><span id="monthly-pmi" class="legend-value">$0</span></div>
                    </div>
                </div>

                <div class="loan-summary-section">
                    <div class="summary-item">
                        <div class="summary-label">Loan Amount</div>
                        <div id="display-loan-amount" class="summary-value">$0</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-label">Total Interest Paid</div>
                        <div id="display-total-interest" class="summary-value">$0</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-label">Payoff Date</div>
                        <div id="display-payoff-date" class="summary-value">--</div>
                    </div>
                </div>

                <div class="tabbed-section">
                    <div class="tab-controls" role="tablist">
                        <button class="tab-btn active" data-tab="chart" role="tab" aria-selected="true"><i class="fas fa-chart-line"></i> Balance Chart</button>
                        <button class="tab-btn" data-tab="schedule" role="tab" aria-selected="false"><i class="fas fa-table"></i> Schedule</button>
                        <button class="tab-btn" data-tab="insights" role="tab" aria-selected="false"><i class="fas fa-brain"></i> AI Insights</button>
                    </div>

                    <div id="chart" class="tab-content active" role="tabpanel">
                        <div class="chart-container">
                            <canvas id="mortgage-timeline-chart"></canvas>
                        </div>
                    </div>
                    <div id="schedule" class="tab-content" role="tabpanel">
                        <div class="table-container">
                            <table class="amortization-table">
                                <thead>
                                    <tr><th>#</th><th>Payment</th><th>Principal</th><th>Interest</th><th>Balance</th></tr>
                                </thead>
                                <tbody id="amortization-table-body"></tbody>
                            </table>
                        </div>
                        <div class="table-pagination">
                            <button class="btn btn--ghost" id="prev-page" disabled><i class="fas fa-chevron-left"></i></button>
                            <span class="pagination-info">Page <span id="current-page">1</span> of <span id="total-pages">1</span></span>
                            <button class="btn btn--ghost" id="next-page" disabled><i class="fas fa-chevron-right"></i></button>
                        </div>
                    </div>
                    <div id="insights" class="tab-content" role="tabpanel">
                        <div id="ai-insights" class="insights-list"></div>
                    </div>
                </div>
            </section>

            <aside class="calculator-sponsor-column" role="complementary">
                <div class="sponsor-card card">
                    <div class="panel-header"><h3><i class="fas fa-handshake"></i> Partner Offers</h3></div>
                    <div class="sponsor-content">
                        <div class="sponsor-item featured">
                            <div class="sponsor-logo"><i class="fas fa-percentage"></i></div>
                            <h4>Get Pre-Approved Today</h4>
                            <p>Compare rates from top lenders instantly. See offers as low as 5.99% APR.</p>
                            <button class="sponsor-btn primary"><i class="fas fa-rocket"></i> Check Rates Now</button>
                        </div>
                        <div class="sponsor-item">
                            <div class="sponsor-logo"><i class="fas fa-shield-alt"></i></div>
                            <h4>Home Insurance Quotes</h4>
                            <p>Save up to $500 annually by comparing home insurance rates.</p>
                            <button class="sponsor-btn">Compare Quotes</button>
                        </div>
                    </div>
                </div>
                <div class="market-card card">
                    <div class="panel-header"><h3><i class="fas fa-chart-line"></i> Market Watch</h3></div>
                    <div class="market-content">
                        <div class="market-item">
                            <div class="market-label">30-Year Fixed</div><div class="market-rate">6.43%</div><div class="market-trend trend-up"><i class="fas fa-arrow-up"></i> +0.02%</div>
                        </div>
                        <div class="market-item">
                            <div class="market-label">15-Year Fixed</div><div class="market-rate">5.73%</div><div class="market-trend trend-up"><i class="fas fa-arrow-up"></i> +0.05%</div>
                        </div>
                        <div class="market-item">
                            <div class="market-label">5/1 ARM</div><div class="market-rate">5.90%</div><div class="market-trend trend-down"><i class="fas fa-arrow-down"></i> -0.15%</div>
                        </div>
                    </div>
                    <div class="market-update"><small id="current-date-time">Rates updated every 15 minutes</small></div>
                </div>
            </aside>
        </div>
    </main>
    
    <footer class="app-footer">
        <p>&copy; 2025 MortgageCalc AI. All rights reserved.</p>
    </footer>

    <div id="toast-container" class="toast-container" aria-live="polite"></div>

    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="spinner"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js" integrity="sha512-CQBWl4fJHWvTMCTXrGCNOSsQhKJhrpWiBJTSoMNEVAZ0OAAMYJZ+peJMWP+HFNLq19yDUxCXzPEn9oN4HGNmPw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="mortgage-calculator.js"></script>
</body>
</html>
