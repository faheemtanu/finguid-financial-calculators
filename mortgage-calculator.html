<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mortgage Calculator</title>
    <link rel="stylesheet" href="mortgage-calculator-style.css" />
</head>
<body>
    <header class="header">
        <h1>Mortgage Calculator</h1>
        <p>Enter your mortgage information for precise calculations with AI insights</p>
    </header>
    <main class="calculator-panel container">
        <section class="form-section">
            <h2>Loan Details</h2>
            <form id="mortgageForm">
                <div class="form-group">
                    <label for="homePrice">Home Price ($):</label>
                    <input type="number" id="homePrice" min="0" step="1000" placeholder="400,000" required />
                </div>
                <div class="form-group dp-tabs">
                    <button type="button" id="tabAmount" class="tab-btn active">Down Payment Amount</button>
                    <button type="button" id="tabPercent" class="tab-btn">Down Payment %</button>
                </div>
                <div class="dp-inputs">
                    <div class="dp-input-wrap" id="dpAmountWrap">
                        <label for="dpAmount">Down Payment ($):</label>
                        <input type="number" id="dpAmount" min="0" step="500" placeholder="80,000" />
                    </div>
                    <div class="dp-input-wrap hidden" id="dpPercentWrap">
                        <label for="dpPercent">Down Payment (%):</label>
                        <input type="number" id="dpPercent" min="0" max="100" step="0.1" placeholder="20.0" />
                    </div>
                </div>
                <div class="form-group">
                    <label for="interestRate">Interest Rate (%):</label>
                    <input type="number" id="interestRate" min="0" max="50" step="0.01" placeholder="6.5" required />
                </div>
                <div class="term-buttons">
                    <button type="button" class="chip active" data-term="30">30 Years</button>
                    <button type="button" class="chip" data-term="15">15 Years</button>
                    <button type="button" class="chip" data-term="20">20 Years</button>
                    <span class="or-text">or</span>
                    <input type="number" id="termCustom" placeholder="Custom Years" min="1" max="50" class="custom-term" />
                </div>
                <div class="form-group">
                    <label for="state">State:</label>
                    <select id="state" required></select>
                </div>
                <div class="form-group">
                    <label for="propertyTax">Annual Property Tax ($):</label>
                    <input type="number" id="propertyTax" min="0" step="100" placeholder="3000" />
                </div>
                <div class="form-group">
                    <label for="homeInsurance">Annual Home Insurance ($):</label>
                    <input type="number" id="homeInsurance" min="0" step="50" placeholder="1200" />
                </div>
                <div class="form-group">
                    <label for="pmiRate">PMI Rate (%):</label>
                    <input type="number" id="pmiRate" min="0" max="5" step="0.01" placeholder="0.75" />
                </div>
                <div class="form-group">
                    <label for="hoaFees">Monthly HOA Fees ($):</label>
                    <input type="number" id="hoaFees" min="0" step="25" placeholder="0" />
                </div>
                <div class="form-group">
                    <label for="extraMonthly">Extra Monthly Payment ($):</label>
                    <input type="number" id="extraMonthly" min="0" step="100" placeholder="0" />
                </div>
                <div class="form-group">
                    <label for="extraOnce">Extra One-Time Payment ($):</label>
                    <input type="number" id="extraOnce" min="0" step="100" placeholder="0" />
                </div>
                <button type="button" id="calculate-btn" class="btn btn-primary calculate-btn">
                    <i class="fas fa-calculator"></i> Calculate Payment
                </button>
                <button type="button" id="reset-form" class="btn btn-secondary">Reset</button>
            </form>
            <div id="pmi-banner" class="pmi-banner hidden"></div>
        </section>

        <section class="results-panel" id="resultsPanel" hidden>
            <div class="results-summary">
                <div class="main-result">
                    <div class="result-label">Total Monthly Payment</div>
                    <div id="total-payment" class="result-value"></div>
                </div>
                <div class="key-metrics">
                    <div class="metric">
                        <span class="metric-label">Loan Amount</span>
                        <span id="loan-amount" class="metric-value"></span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Total Interest</span>
                        <span id="total-interest" class="metric-value"></span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Principal & Interest</span>
                        <span id="pi-amount" class="metric-value"></span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Property Tax</span>
                        <span id="tax-amount" class="metric-value"></span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Insurance</span>
                        <span id="insurance-amount" class="metric-value"></span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">PMI</span>
                        <span id="pmi-amount" class="metric-value"></span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">HOA Fees</span>
                        <span id="hoa-amount" class="metric-value"></span>
                    </div>
                </div>
            </div>

            <div class="breakdown-section">
                <div class="section-header">
                    <h3>Payment Breakdown</h3>
                </div>
                <div id="legend-breakdown" class="chart-legend"></div>
                <canvas id="breakdownChart" aria-label="Payment breakdown pie chart" role="img"></canvas>
            </div>

            <div class="amortization-section">
                <div class="amortization-header">
                    <h3>Payment Schedule (First 5 Years)</h3>
                </div>
                <div class="table-container">
                    <table class="amortization-table" aria-label="Amortization schedule">
                        <thead>
                            <tr>
                                <th>Payment #</th>
                                <th>Total Payment</th>
                                <th>Principal</th>
                                <th>Interest</th>
                                <th>Balance</th>
                            </tr>
                        </thead>
                        <tbody id="amortization-body"></tbody>
                    </table>
                </div>
            </div>

            <div class="comparison-section">
                <h3>Loan Comparison Scenarios</h3>
                <div class="scenario-buttons">
                    <button type="button" class="scenario-btn" data-scenario="standard">Standard 30 Yr</button>
                    <button type="button" class="scenario-btn" data-scenario="15year">15 Year</button>
                    <button type="button" class="scenario-btn" data-scenario="extraPayments">With Extra Payments</button>
                </div>
                <div id="comparison-cards" class="comparison-cards"></div>
            </div>
        </section>

        <section class="insights-section">
            <h3>AI Insights</h3>
            <ul id="insights-list" class="insights-list"></ul>
        </section>
    </main>
    <script src="mortgage-calculator-2.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</body>
</html>
