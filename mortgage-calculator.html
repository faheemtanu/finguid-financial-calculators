<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NYBL2CDNQJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-NYBL2CDNQJ');
</script>
<!-- at the top of mortgage-calculator.html -->
<body class="page-mortgage">
  ...
</body>
  <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HomeLoan Pro - AI-Enhanced USA Mortgage Calculator | Free Home Loan Payment Estimator</title>
    <meta name="description" content="Calculate accurate mortgage payments with HomeLoan Pro's AI-enhanced calculator. Get state-specific property taxes, PMI calculations, and smart insights for all 50 US states. Free mortgage calculator with voice input.">
    <meta name="keywords" content="mortgage calculator, home loan calculator, USA mortgage rates, property tax calculator, PMI calculator, home affordability calculator">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.finguid.com/mortgage-calculator">
    <meta property="og:title" content="HomeLoan Pro - AI-Enhanced USA Mortgage Calculator">
    <meta property="og:description" content="Free mortgage calculator with AI insights, voice input, and state-specific data for all 50 US states.">
    <meta property="og:image" content="https://www.finguid.com/assets/mortgage-calculator-preview.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.finguid.com/mortgage-calculator">
    <meta property="twitter:title" content="HomeLoan Pro - AI-Enhanced USA Mortgage Calculator">
    <meta property="twitter:description" content="Free mortgage calculator with AI insights, voice input, and state-specific data for all 50 US states.">
    <meta property="twitter:image" content="https://www.finguid.com/assets/mortgage-calculator-preview.jpg">

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "HomeLoan Pro - Mortgage Calculator",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "description": "Free AI-enhanced mortgage calculator for USA home loans with state-specific property taxes and PMI calculations",
        "featureList": [
            "Voice Input Support",
            "50-State Property Tax Data", 
            "PMI Calculator",
            "AI Insights",
            "Amortization Schedule"
        ],
        "provider": {
            "@type": "Organization",
            "name": "Finguid",
            "url": "https://www.finguid.com"
        }
    }
    </script>

    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192x192.png">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <meta name="theme-color" content="#21808d">
    
    <!-- Fonts and Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* Additional styles for the left-right layout */
        .calculator-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }
        
        @media (max-width: 1024px) {
            .calculator-layout {
                grid-template-columns: 1fr;
            }
        }
        
        .inputs-panel {
            background: var(--color-bg-primary);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
        }
        
        .results-panel {
            background: var(--color-bg-primary);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
        }
        
        /* Enhanced term buttons */
        .term-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .term-buttons .chip {
            padding: 0.5rem 1rem;
            border: 2px solid var(--color-border);
            border-radius: 25px;
            background: var(--color-bg-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .term-buttons .chip:hover {
            background: var(--color-primary-light);
            border-color: var(--color-primary);
        }
        
        .term-buttons .chip.active {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }
        
        /* Enhanced advanced options button */
        .advanced-toggle.active {
            background: var(--color-primary-light);
            border-color: var(--color-primary);
        }
        
        .advanced-toggle.active .arrow {
            transform: rotate(180deg);
        }
        
        /* Enhanced chart visibility */
        .chart-container {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 1.5rem;
        }
        
        /* Enhanced scenario buttons */
        .scenario-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .scenario-card {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-left: 4px solid var(--color-primary);
            transition: transform 0.2s ease;
        }
        
        .scenario-card:hover {
            transform: translateY(-3px);
        }
        
        .scenario-card h4 {
            margin-top: 0;
            color: var(--color-primary);
        }
        
        .scenario-card p {
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }
        
        .scenario-card .scenario-btn {
            margin-top: 0.5rem;
            width: 100%;
        }
        
        /* Color variations for scenario cards */
        .scenario-card:nth-child(2n) {
            border-left-color: #a84b2f;
        }
        
        .scenario-card:nth-child(3n) {
            border-left-color: #626c71;
        }
        
        .scenario-card:nth-child(4n) {
            border-left-color: #c0152f;
        }
        
        .scenario-card:nth-child(5n) {
            border-left-color: #94a3b8;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="navbar">
            <div class="container">
                <a href="/" class="nav-brand">
                    <i class="fas fa-calculator"></i>
                    <span class="brand-text">Finguid</span>
                </a>
                <ul class="nav-menu" id="nav-menu">
                    <li><a href="/" class="nav-link">Home</a></li>
                    <li><a href="/mortgage-calculator" class="nav-link active">Mortgage</a></li>
                    <li><a href="/calculators" class="nav-link">Calculators</a></li>
                    <li><a href="/resources" class="nav-link">Resources</a></li>
                    <li><a href="/about" class="nav-link">About</a></li>
                    <li><a href="/contact" class="nav-link">Contact</a></li>
                </ul>
                <div class="hamburger" id="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Hero Section -->
        <section class="hero mortgage-hero">
            <div class="container">
                <div class="hero-content">
                    <h1 class="hero-title">
                        üè† HomeLoan Pro - AI-Enhanced 
                        <span class="highlight">Mortgage Calculator</span>
                    </h1>
                    <p class="hero-description">
                        Calculate accurate mortgage payments with state-specific taxes, PMI, insurance, and AI-powered insights. Voice input enabled for effortless calculations across all 50 US states.
                    </p>
                    <div class="hero-features">
                        <div class="feature">
                            <i class="fas fa-microphone"></i>
                            <span>Voice Input</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-map-marked-alt"></i>
                            <span>50 State Data</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-robot"></i>
                            <span>AI Insights</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-mobile-alt"></i>
                            <span>Mobile PWA</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Calculator Modes -->
        <section class="calculator-section">
            <div class="container">
                <!-- Removed mode tabs for refinance and affordability -->
                
                <div class="calculator-layout">
                    <!-- Left Panel - Inputs -->
                    <div class="calculator-panel inputs-panel">
                        <div class="panel-header">
                            <h2>Loan Details</h2>
                            <p>Enter your mortgage information for precise AI-enhanced calculations</p>
                        </div>

                        <!-- Payment Mode Inputs -->
                        <div class="mode-content" id="payment-mode">
                            <div class="form-group">
                                <label for="home-price" class="form-label">
                                    <i class="fas fa-home" data-tooltip="The total purchase price of the home"></i>
                                    Home Price ($)
                                    <button class="voice-btn" data-field="home-price" title="Voice Input">
                                        <i class="fas fa-microphone"></i>
                                    </button>
                                </label>
                                <input type="number" id="home-price" class="form-input" value="400000" min="10000" max="10000000" step="1000">
                            </div>

                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fas fa-percentage" data-tooltip="Your upfront payment - affects PMI requirements"></i>
                                    Down Payment
                                </label>
                                <div class="dp-tabs">
                                    <button class="tab-btn active" id="tab-amount" data-tab="amount">Amount $</button>
                                    <button class="tab-btn" id="tab-percent" data-tab="percent">Percent %</button>
                                </div>
                                <div class="dp-inputs">
                                    <div id="dp-amount-wrap" class="dp-input-wrap">
                                        <input type="number" id="dp-amount" class="form-input" value="80000" min="0" step="1000">
                                        <button class="voice-btn" data-field="dp-amount" title="Voice Input">
                                            <i class="fas fa-microphone"></i>
                                        </button>
                                    </div>
                                    <div id="dp-percent-wrap" class="dp-input-wrap hidden">
                                        <input type="number" id="dp-percent" class="form-input" value="20" min="0" max="100" step="0.1">
                                        <button class="voice-btn" data-field="dp-percent" title="Voice Input">
                                            <i class="fas fa-microphone"></i>
                                        </button>
                                    </div>
                                </div>
                                <!-- PMI Banner -->
                                <div id="pmi-banner" class="pmi-banner hidden">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    <span>PMI Required - Down payment is less than 20% of home value</span>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="interest-rate" class="form-label">
                                    <i class="fas fa-chart-line" data-tooltip="Annual interest rate for your mortgage loan"></i>
                                    Interest Rate (%)
                                    <button class="voice-btn" data-field="interest-rate" title="Voice Input">
                                        <i class="fas fa-microphone"></i>
                                    </button>
                                </label>
                                <input type="number" id="interest-rate" class="form-input" value="6.75" min="0.1" max="30" step="0.01">
                            </div>

                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fas fa-calendar-alt" data-tooltip="Length of your mortgage loan in years"></i>
                                    Loan Term
                                </label>
                                <div class="term-buttons" id="term-buttons">
                                    <button class="chip" data-term="10">10y</button>
                                    <button class="chip" data-term="15">15y</button>
                                    <button class="chip" data-term="20">20y</button>
                                    <button class="chip" data-term="25">25y</button>
                                    <button class="chip active" data-term="30">30y</button>
                                    <span class="or-text">or</span>
                                </div>
                                <input type="number" id="term-custom" class="form-input custom-term" placeholder="Custom years (1-40)" min="1" max="40">
                            </div>

                            <div class="form-group">
                                <label for="state" class="form-label">
                                    <i class="fas fa-map-marker-alt" data-tooltip="Select your state for accurate property tax calculations"></i>
                                    Property State
                                </label>
                                <select id="state" class="form-control">
                                    <option value="">Select State</option>
                                    <option value="AL">Alabama</option>
                                    <option value="AK">Alaska</option>
                                    <option value="AZ">Arizona</option>
                                    <option value="AR">Arkansas</option>
                                    <option value="CA">California</option>
                                    <option value="CO">Colorado</option>
                                    <option value="CT">Connecticut</option>
                                    <option value="DE">Delaware</option>
                                    <option value="FL">Florida</option>
                                    <option value="GA">Georgia</option>
                                    <option value="HI">Hawaii</option>
                                    <option value="ID">Idaho</option>
                                    <option value="IL">Illinois</option>
                                    <option value="IN">Indiana</option>
                                    <option value="IA">Iowa</option>
                                    <option value="KS">Kansas</option>
                                    <option value="KY">Kentucky</option>
                                    <option value="LA">Louisiana</option>
                                    <option value="ME">Maine</option>
                                    <option value="MD">Maryland</option>
                                    <option value="MA">Massachusetts</option>
                                    <option value="MI">Michigan</option>
                                    <option value="MN">Minnesota</option>
                                    <option value="MS">Mississippi</option>
                                    <option value="MO">Missouri</option>
                                    <option value="MT">Montana</option>
                                    <option value="NE">Nebraska</option>
                                    <option value="NV">Nebada</option>
                                    <option value="NH">New Hampshire</option>
                                    <option value="NJ">New Jersey</option>
                                    <option value="NM">New Mexico</option>
                                    <option value="NY">New York</option>
                                    <option value="NC">North Carolina</option>
                                    <option value="ND">North Dakota</option>
                                    <option value="OH">Ohio</option>
                                    <option value="OK">Oklahoma</option>
                                    <option value="OR">Oregon</option>
                                    <option value="PA">Pennsylvania</option>
                                    <option value="RI">Rhode Island</option>
                                    <option value="SC">South Carolina</option>
                                    <option value="SD">South Dakota</option>
                                    <option value="TN">Tennessee</option>
                                    <option value="TX">Texas</option>
                                    <option value="UT">Utah</option>
                                    <option value="VT">Vermont</option>
                                    <option value="VA">Virginia</option>
                                    <option value="WA">Washington</option>
                                    <option value="WV">West Virginia</option>
                                    <option value="WI">Wisconsin</option>
                                    <option value="WY">Wyoming</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="property-tax" class="form-label">
                                    <i class="fas fa-building" data-tooltip="Annual property tax - auto-calculated based on state and home value"></i>
                                    Property Tax (Annual $)
                                </label>
                                <input type="number" id="property-tax" class="form-input" value="1640" min="0" step="100">
                                <small class="help-text">Auto-calculated based on state average</small>
                            </div>

                            <!-- Advanced Options -->
                            <div class="advanced-section">
                                <button class="advanced-toggle" id="advanced-toggle">
                                    <i class="fas fa-cog"></i>
                                    <span>Advanced Options</span>
                                    <i class="fas fa-chevron-down arrow"></i>
                                </button>
                                <div id="advanced-panel" class="advanced-panel hidden">
                                    <div class="form-group">
                                        <label for="home-insurance" class="form-label">
                                            <i class="fas fa-shield-alt" data-tooltip="Annual homeowners insurance premium"></i>
                                            Home Insurance (Annual $)
                                        </label>
                                        <input type="number" id="home-insurance" class="form-input" value="960" min="0" step="50">
                                    </div>

                                    <div class="form-group">
                                        <label for="pmi-rate" class="form-label">
                                            <i class="fas fa-umbrella" data-tooltip="Private Mortgage Insurance rate (typically 0.5% - 1.5% annually)"></i>
                                            PMI Rate (Annual %)
                                        </label>
                                        <input type="number" id="pmi-rate" class="form-input" value="0.8" min="0" max="5" step="0.1">
                                    </div>

                                    <div class="form-group">
                                        <label for="hoa-fees" class="form-label">
                                            <i class="fas fa-users" data-tooltip="Monthly Homeowners Association or condo fees"></i>
                                            HOA Fees (Monthly $)
                                        </label>
                                        <input type="number" id="hoa-fees" class="form-input" value="0" min="0" step="25">
                                    </div>

                                    <div class="form-group">
                                        <label for="extra-monthly" class="form-label">
                                            <i class="fas fa-plus-circle" data-tooltip="Additional monthly payment towards principal to pay off loan faster"></i>
                                            Extra Monthly Payment ($)
                                        </label>
                                        <input type="number" id="extra-monthly" class="form-input" value="0" min="0" step="50">
                                    </div>

                                    <div class="form-group">
                                        <label for="extra-once" class="form-label">
                                            <i class="fas fa-hand-holding-usd" data-tooltip="One-time extra payment in the first month"></i>
                                            One-Time Extra Payment ($)
                                        </label>
                                        <input type="number" id="extra-once" class="form-input" value="0" min="0" step="100">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="action-buttons">
                            <button id="calculate-btn" class="btn btn-primary btn-full-width">
                                <i class="fas fa-calculator"></i>
                                Calculate Payment
                            </button>
                            <button id="reset-form" class="btn btn-secondary">
                                <i class="fas fa-undo"></i>
                                Reset
                            </button>
                        </div>
                    </div>

                    <!-- Right Panel - Results -->
                    <div class="calculator-panel results-panel">
                        <div class="panel-header">
                            <h2>Payment Results</h2>
                            <p>Your personalized mortgage calculation with AI insights</p>
                        </div>

                        <!-- Main Results -->
                        <div class="results-summary">
                            <div class="main-result">
                                <div class="result-label">Total Monthly Payment</div>
                                <div class="result-value" id="total-payment">$2,923</div>
                            </div>
                            <div class="key-metrics">
                                <div class="metric">
                                    <span class="metric-label">Loan Amount</span>
                                    <span class="metric-value" id="loan-amount">$320,000</span>
                                </div>
                                <div class="metric">
                                    <span class="metric-label">Total Interest</span>
                                    <span class="metric-value" id="total-interest">$422,983</span>
                                </div>
                            </div>
                        </div>

                        <!-- Payment Breakdown -->
                        <div class="breakdown-section">
                            <h3>Monthly Breakdown</h3>
                            <div class="breakdown-table">
                                <div class="breakdown-row">
                                    <span class="breakdown-label">P&I</span>
                                    <span class="breakdown-value" id="pi-amount">$2,590</span>
                                </div>
                                <div class="breakdown-row">
                                    <span class="breakdown-label">Taxes</span>
                                    <span class="breakdown-value" id="tax-amount">$137</span>
                                </div>
                                <div class="breakdown-row">
                                    <span class="breakdown-label">Insurance</span>
                                    <span class="breakdown-value" id="insurance-amount">$80</span>
                                </div>
                                <div class="breakdown-row" id="row-pmi">
                                    <span class="breakdown-label">PMI</span>
                                    <span class="breakdown-value" id="pmi-amount">$213</span>
                                </div>
                                <div class="breakdown-row">
                                    <span class="breakdown-label">HOA</span>
                                    <span class="breakdown-value" id="hoa-amount">$0</span>
                                </div>
                            </div>
                        </div>

                        <!-- Charts -->
                        <div class="charts-section">
                            <div class="chart-container">
                                <h4>Payment Breakdown</h4>
                                <canvas id="breakdownChart" width="300" height="200"></canvas>
                                <div id="legend-breakdown" class="chart-legend"></div>
                            </div>
                            <!-- Removed Balance Over Time chart -->
                        </div>

                        <!-- AI Insights -->
                        <div class="insights-section">
                            <h3>
                                <i class="fas fa-lightbulb"></i>
                                AI Insights
                                <small>Personalized recommendations to save money</small>
                            </h3>
                            <ul id="insights-list" class="insights-list">
                                <!-- Dynamic AI insights will be populated here -->
                            </ul>
                        </div>

                        <!-- Amortization Preview -->
                        <div class="amortization-section">
                            <div class="section-header">
                                <h3>Payment Schedule (First 5 Years)</h3>
                                <button id="view-full-schedule" class="btn btn-outline">
                                    <i class="fas fa-table"></i>
                                    View Full Schedule
                                </button>
                            </div>
                            <div class="table-container">
                                <table class="amortization-table">
                                    <thead>
                                        <tr>
                                            <th>Year</th>
                                            <th>Payment</th>
                                            <th>Principal</th>
                                            <th>Interest</th>
                                            <th>End Balance</th>
                                        </tr>
                                    </thead>
                                    <tbody id="amortization-body">
                                        <!-- Dynamic amortization data will be populated here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="result-actions">
                            <button id="email-results" class="btn btn-secondary">
                                <i class="fas fa-envelope"></i>
                                Email Results
                            </button>
                            <button id="share-results" class="btn btn-secondary">
                                <i class="fas fa-share"></i>
                                Share
                            </button>
                            <button id="print-results" class="btn btn-secondary">
                                <i class="fas fa-print"></i>
                                Print
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Comparison Section -->
                <div class="comparison-section">
                    <div class="section-header">
                        <h3>Loan Comparison Scenarios</h3>
                        <p>Compare different loan options side by side</p>
                    </div>

                    <div class="scenario-grid">
                        <div class="scenario-card">
                            <h4>15-Year vs 30-Year Mortgage</h4>
                            <p>Compare monthly payments and total interest for different loan terms</p>
                            <button class="scenario-btn btn btn-primary" data-scenario="15year">
                                Compare Terms
                            </button>
                        </div>
                        
                        <div class="scenario-card">
                            <h4>Interest Rate Impact</h4>
                            <p>See how different interest rates affect your monthly payment</p>
                            <button class="scenario-btn btn btn-primary" data-scenario="rates">
                                Compare Rates
                            </button>
                        </div>
                        
                        <div class="scenario-card">
                            <h4>Down Payment Options</h4>
                            <p>Understand how different down payments affect your loan</p>
                            <button class="scenario-btn btn btn-primary" data-scenario="downpayment">
                                Compare Down Payments
                            </button>
                        </div>
                        
                        <div class="scenario-card">
                            <h4>Extra Payment Benefits</h4>
                            <p>See how extra payments can reduce your loan term and interest</p>
                            <button class="scenario-btn btn btn-primary" data-scenario="extraPayment">
                                Show Extra Payment Impact
                            </button>
                        </div>
                        
                        <div class="scenario-card">
                            <h4>First-Time Homebuyer</h4>
                            <p>Optimized for buyers with smaller down payments</p>
                            <button class="scenario-btn btn btn-primary" data-scenario="firstTime">
                                First-Time Buyer Scenario
                            </button>
                        </div>
                        
                        <div class="scenario-card">
                            <h4>Refinance Analysis</h4>
                            <p>See if refinancing could save you money</p>
                            <button class="scenario-btn btn btn-primary" data-scenario="refinance">
                                Refinance Analysis
                            </button>
                        </div>
                    </div>

                    <div id="comparison-grid" class="comparison-grid">
                        <!-- Dynamic comparison scenarios will be populated here -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Voice Status Indicator -->
    <div id="voice-status" class="voice-status">
        <div class="voice-animation">
            <div class="voice-dot"></div>
            <div class="voice-dot"></div>
            <div class="voice-dot"></div>
        </div>
        <span>Listening... Say "home price 400000" or "calculate"</span>
        <button class="voice-close">√ó</button>
    </div>

    <!-- Full Schedule Modal -->
    <dialog id="schedule-modal" class="schedule-modal">
        <div class="modal-header">
            <h2>
                <i class="fas fa-table"></i>
                Complete Amortization Schedule
            </h2>
            <button id="close-schedule" class="modal-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="schedule-info">
                <div class="brand-info">
                    <img src="icons/icon-192x192.png" alt="Finguid Logo" class="brand-logo">
                    <div>
                        <strong>Finguid HomeLoan Pro</strong>
                        <br>www.finguid.com
                    </div>
                </div>
            </div>
            <div class="table-container full-schedule">
                <table class="schedule-table">
                    <thead>
                        <tr>
                            <th>Month</th>
                            <th>Payment</th>
                            <th>Principal</th>
                            <th>Interest</th>
                            <th>Extra</th>
                            <th>Balance</th>
                        </tr>
                    </thead>
                    <tbody id="full-schedule-body">
                        <!-- Dynamic full schedule data will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" onclick="window.print()">
                <i class="fas fa-print"></i>
                Print Schedule
            </button>
            <button class="btn btn-secondary" id="download-schedule">
                <i class="fas fa-download"></i>
                Download CSV
            </button>
        </div>
    </dialog>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-brand">
                        <i class="fas fa-calculator"></i>
                        Finguid
                    </div>
                    <p>America's first AI-enhanced financial calculator platform. Make smarter financial decisions with accurate, state-specific calculations and intelligent insights.</p>
                </div>
                <div class="footer-section">
                    <h4>Calculators</h4>
                    <ul>
                        <li><a href="/mortgage-calculator">Mortgage Calculator</a></li>
                        <li><a href="/calculators/auto-loan">Auto Loan</a></li>
                        <li><a href="/calculators/investment">Investment</a></li>
                        <li><a href="/calculators/refinance">Refinance</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="/mortgage-rates">Current Rates</a></li>
                        <li><a href="/guides">Buying Guides</a></li>
                        <li><a href="/blog">Financial Blog</a></li>
                        <li><a href="/faq">FAQ</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Company</h4>
                    <ul>
                        <li><a href="/about">About Us</a></li>
                        <li><a href="/contact">Contact</a></li>
                        <li><a href="/privacy">Privacy Policy</a></li>
                        <li><a href="/terms">Terms of Service</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Finguid. All rights reserved. | Built with ‚ù§Ô∏è for Americans</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="mortgage-calculator.js"></script>
    <script>
        // Register Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => console.log('SW registered'))
                    .catch(error => console.log('SW registration failed'));
            });
        }
        
        // Enhanced functionality for the calculator
        document.addEventListener('DOMContentLoaded', function() {
            // Enhanced term button highlighting
            const termButtons = document.querySelectorAll('.term-buttons .chip');
            termButtons.forEach(button => {
                button.addEventListener('click', function() {
                    termButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Enhanced advanced options toggle
            const advancedToggle = document.getElementById('advanced-toggle');
            if (advancedToggle) {
                advancedToggle.addEventListener('click', function() {
                    this.classList.toggle('active');
                });
            }
            
            // Enhanced property tax auto-calculation
            const stateSelect = document.getElementById('state');
            const homePriceInput = document.getElementById('home-price');
            const propertyTaxInput = document.getElementById('property-tax');
            
            if (stateSelect && homePriceInput && propertyTaxInput) {
                stateSelect.addEventListener('change', updatePropertyTax);
                homePriceInput.addEventListener('input', updatePropertyTax);
            }
            
            function updatePropertyTax() {
                // US State tax rates (%) - All 50 states
                const stateTaxRates = {
                    AL: 0.41, AK: 1.24, AZ: 0.60, AR: 0.66, CA: 0.81, CO: 0.52, CT: 2.16, DE: 0.62,
                    FL: 0.89, GA: 0.95, HI: 0.29, ID: 0.63, IL: 2.29, IN: 0.83, IA: 1.59, KS: 1.40,
                    KY: 0.89, LA: 0.62, ME: 1.29, MD: 1.07, MA: 1.19, MI: 1.53, MN: 1.10, MS: 0.81,
                    MO: 1.00, MT: 0.83, NE: 1.70, NV: 0.55, NH: 2.09, NJ: 2.46, NM: 0.84, NY: 1.73,
                    NC: 0.80, ND: 1.02, OH: 1.57, OK: 0.99, OR: 0.92, PA: 1.56, RI: 1.54, SC: 0.58,
                    SD: 1.24, TN: 0.65, TX: 1.90, UT: 0.57, VT: 1.89, VA: 0.83, WA: 0.93, WV: 0.59,
                    WI: 1.71, WY: 0.61
                };
                
                const state = stateSelect.value;
                const homePrice = parseFloat(homePriceInput.value) || 0;
                
                if (state && stateTaxRates[state] && homePrice > 0) {
                    const taxRate = stateTaxRates[state];
                    const annualTax = Math.round(homePrice * (taxRate / 100));
                    propertyTaxInput.value = annualTax;
                    
                    // Update tooltip with state info
                    const stateNames = {
                        AL: 'Alabama', AK: 'Alaska', AZ: 'Arizona', AR: 'Arkansas', CA: 'California',
                        CO: 'Colorado', CT: 'Connecticut', DE: 'Delaware', FL: 'Florida', GA: 'Georgia',
                        HI: 'Hawaii', ID: 'Idaho', IL: 'Illinois', IN: 'Indiana', IA: 'Iowa', KS: 'Kansas',
                        KY: 'Kentucky', LA: 'Louisiana', ME: 'Maine', MD: 'Maryland', MA: 'Massachusetts',
                        MI: 'Michigan', MN: 'Minnesota', MS: 'Mississippi', MO: 'Missouri', MT: 'Montana',
                        NE: 'Nebraska', NV: 'Nevada', NH: 'New Hampshire', NJ: 'New Jersey', NM: 'New Mexico',
                        NY: 'New York', NC: 'North Carolina', ND: 'North Dakota', OH: 'Ohio', OK: 'Oklahoma',
                        OR: 'Oregon', PA: 'Pennsylvania', RI: 'Rhode Island', SC: 'South Carolina', SD: 'South Dakota',
                        TN: 'Tennessee', TX: 'Texas', UT: 'Utah', VT: 'Vermont', VA: 'Virginia',
                        WA: 'Washington', WV: 'West Virginia', WI: 'Wisconsin', WY: 'Wyoming'
                    };
                    
                    propertyTaxInput.setAttribute('title', `${stateNames[state]} average: ${taxRate}%`);
                }
            }
            
            // Enhanced scenario buttons
            const scenarioButtons = document.querySelectorAll('.scenario-btn');
            scenarioButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const scenario = this.dataset.scenario;
                    loadScenario(scenario);
                });
            });
            
            function loadScenario(scenarioType) {
                // This function would be implemented in the main JS file
                console.log('Loading scenario:', scenarioType);
                // Actual implementation would go in mortgage-calculator.js
            }
        });
    </script>
</body>
</html>
