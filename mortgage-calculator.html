<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <!-- Enhanced Meta Tags for USA Market -->
    <title>🇺🇸 USA Mortgage Calculator - World's #1 AI-Powered | FinGuid</title>
    <meta name="description" content="World's #1 AI-powered USA mortgage calculator with live FRED API rates, 41,552 ZIP codes, PMI automation, and expert insights. Calculate your perfect home loan instantly!">
    <meta name="keywords" content="USA mortgage calculator, home loan calculator, FRED API rates, PMI calculator, FHA VA USDA conventional loans">
    <meta name="author" content="FinGuid - World's #1 AI Calculator Platform">
    
    <!-- Open Graph -->
    <meta property="og:title" content="🇺🇸 USA Mortgage Calculator - World's #1 AI-Powered">
    <meta property="og:description" content="Calculate your perfect home loan with live market rates, AI insights, and 41,552 ZIP code support">
    <meta property="og:url" content="https://finguid.com/mortgage-calculator">
    <meta property="og:type" content="website">
    
    <!-- Icons and Theme -->
    <link rel="icon" href="/favicon.ico" sizes="any">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="manifest" href="/app.webmanifest">
    <meta name="theme-color" content="#14b8a6">
    
    <!-- Styles -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="mortgage-calculator.css">
    
    <!-- Chart.js for Colorful Charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Schema.org for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "USA Mortgage Calculator",
        "description": "AI-powered mortgage calculator with live FRED API rates",
        "url": "https://finguid.com/mortgage-calculator",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Web",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>
</head>

<body>
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Screen Reader Announcements -->
    <div id="sr-announcements" aria-live="polite" aria-atomic="true" class="sr-only"></div>

    <!-- Header with Updated Layout as Per Requirements -->
    <header class="site-header" role="banner">
        <div class="nav-container">
            <!-- Left: Brand Logo with Flag -->
            <div class="brand-logo">
                <a href="https://finguid.com/mortgage-calculator#" class="logo-link" aria-label="FinGuid USA Mortgage Calculator Home">
                    <span class="flag-icon">🇺🇸</span>
                    <div class="logo-text">
                        <span class="logo-main">World's #1 AI Calculator</span>
                        <span class="tagline">FinGuid</span>
                    </div>
                </a>
            </div>
            
            <!-- Middle: Accessibility Controls (-A- Aa +A+ Dark Voice SR) -->
            <div class="accessibility-controls">
                <div class="font-controls">
                    <button type="button" class="control-btn" id="font-decrease" aria-label="Decrease font size" title="Decrease font size">
                        <span class="control-text">-A-</span>
                    </button>
                    <button type="button" class="control-btn" id="font-reset" aria-label="Reset font size" title="Reset font size">
                        <span class="control-text">Aa</span>
                    </button>
                    <button type="button" class="control-btn" id="font-increase" aria-label="Increase font size" title="Increase font size">
                        <span class="control-text">+A+</span>
                    </button>
                </div>
                <button type="button" class="control-btn" id="theme-toggle" aria-label="Toggle dark mode" title="Toggle theme">
                    <span class="control-text">Dark</span>
                </button>
                <button type="button" class="control-btn" id="voice-toggle" aria-label="Toggle voice control" title="Voice control">
                    <i class="fas fa-microphone"></i>
                    <span class="control-text">Voice</span>
                </button>
                <button type="button" class="control-btn" id="screen-reader-toggle" aria-label="Toggle screen reader mode" title="Screen reader mode">
                    <span class="control-text">SR</span>
                </button>
            </div>
            
            <!-- Right: Navigation Links -->
            <nav class="nav-links" role="navigation" aria-label="Main navigation">
                <a href="https://finguid.com/" class="nav-link">Home</a>
                <a href="https://finguid.com/calculators" class="nav-link">Calculators</a>
                <a href="https://finguid.com/resources" class="nav-link">Resources</a>
                <a href="https://finguid.com/partners" class="nav-link">Partners</a>
                <a href="https://finguid.com/contact" class="nav-link">Contact</a>
            </nav>

            <!-- Mobile Menu Toggle -->
            <button class="mobile-menu-toggle" aria-expanded="false" aria-controls="mobile-menu" aria-label="Toggle mobile menu">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
        </div>

        <!-- Mobile Menu -->
        <div class="mobile-menu" id="mobile-menu">
            <div class="mobile-menu-content">
                <a href="https://finguid.com/" class="mobile-nav-link">Home</a>
                <a href="https://finguid.com/calculators" class="mobile-nav-link">Calculators</a>
                <a href="https://finguid.com/resources" class="mobile-nav-link">Resources</a>
                <a href="https://finguid.com/partners" class="mobile-nav-link">Partners</a>
                <a href="https://finguid.com/contact" class="mobile-nav-link">Contact</a>
            </div>
        </div>
    </header>

    <!-- USA Hero Section (50% Height Reduction) -->
    <section class="usa-hero" role="banner">
        <div class="hero-container">
            <h1 class="hero-title">
                <span class="flag-icon">🇺🇸</span>
                USA Mortgage Calculator
                <span class="ai-badge">AI Powered</span>
            </h1>
            <p class="hero-description">
                World's most advanced mortgage calculator with live FRED API rates, AI insights, and support for all 41,552 US ZIP codes
            </p>
        </div>
    </section>

    <!-- Main Calculator Container with Updated Layout (30%-40%-30%) -->
    <main id="main-content" class="calculator-container">
        
        <!-- Input Section (30% width) -->
        <section class="input-section" role="form" aria-labelledby="loan-details-title">
            <div class="section-header">
                <h2 class="section-title" id="loan-details-title">
                    <i class="fas fa-home"></i>
                    USA Loan Details
                </h2>
            </div>

            <!-- 1. Primary Information -->
            <div class="form-section">
                <h3 class="subsection-title">
                    <span class="step-number">1</span>
                    Primary Information
                </h3>

                <!-- Home Price -->
                <div class="form-group">
                    <label for="home-price" class="form-label">
                        <i class="fas fa-dollar-sign"></i>
                        Home Price
                        <span class="usa-context">Average USA home price: $428,700 (Oct 2025)</span>
                    </label>
                    <div class="input-group">
                        <span class="input-prefix">$</span>
                        <input type="text" id="home-price" class="form-control" value="450,000" aria-describedby="home-price-help">
                    </div>
                    <div class="suggestion-chips">
                        <button class="suggestion-chip" onclick="setQuickValue('home-price', 200000)">$200K</button>
                        <button class="suggestion-chip" onclick="setQuickValue('home-price', 400000)">$400K</button>
                        <button class="suggestion-chip" onclick="setQuickValue('home-price', 600000)">$600K</button>
                        <button class="suggestion-chip" onclick="setQuickValue('home-price', 800000)">$800K</button>
                    </div>
                </div>

                <!-- Down Payment with Toggle -->
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-piggy-bank"></i>
                        Down Payment
                    </label>
                    
                    <div class="input-toggle">
                        <button type="button" class="toggle-btn active" onclick="showDownPaymentType('dollar')">Dollar Amount</button>
                        <button type="button" class="toggle-btn" onclick="showDownPaymentType('percent')">Percentage</button>
                    </div>

                    <div class="input-variant active" id="down-payment-dollar">
                        <div class="input-group">
                            <span class="input-prefix">$</span>
                            <input type="text" id="down-payment" class="form-control" value="90,000">
                        </div>
                    </div>

                    <div class="input-variant" id="down-payment-percent">
                        <div class="input-group">
                            <input type="number" id="down-payment-percent" class="form-control" min="0" max="100" step="0.1" value="20">
                            <span class="input-suffix">%</span>
                        </div>
                    </div>

                    <div class="suggestion-chips">
                        <button class="suggestion-chip" onclick="setQuickValue('down-payment-percent', 3)">3%</button>
                        <button class="suggestion-chip" onclick="setQuickValue('down-payment-percent', 10)">10%</button>
                        <button class="suggestion-chip" onclick="setQuickValue('down-payment-percent', 20)">20%</button>
                        <button class="suggestion-chip" onclick="setQuickValue('down-payment-percent', 25)">25%</button>
                    </div>
                </div>

                <!-- ZIP Code with Full 41,552 Support -->
                <div class="form-group">
                    <label for="zip-code" class="form-label">
                        <i class="fas fa-map-marker-alt"></i>
                        ZIP Code
                        <span class="usa-context">Enter 5-digit ZIP code for accurate local rates & taxes (All 41,552 ZIP codes supported)</span>
                    </label>
                    <input type="text" id="zip-code" class="form-control" placeholder="Enter ZIP code" maxlength="5" pattern="[0-9]{5}">
                    <div id="zip-code-status" class="zip-status" style="display: none;"></div>
                    <div id="city-state-display" class="city-state-display" style="display: none;"></div>
                </div>

                <!-- Credit Score -->
                <div class="form-group">
                    <label for="credit-score" class="form-label">
                        <i class="fas fa-chart-line"></i>
                        Credit Score
                        <span class="rate-impact-text">Your credit score significantly impacts your interest rate</span>
                    </label>
                    <select id="credit-score" class="form-control">
                        <option value="580">Poor (580 or below)</option>
                        <option value="630">Fair (580-669)</option>
                        <option value="700" selected>Good (670-739)</option>
                        <option value="780">Very Good (740-799)</option>
                        <option value="820">Excellent (800+)</option>
                    </select>
                    <div id="credit-impact" class="credit-impact" style="display: none;"></div>
                </div>

                <!-- Interest Rate -->
                <div class="form-group">
                    <label for="interest-rate" class="form-label">
                        <i class="fas fa-percentage"></i>
                        Interest Rate
                        <span class="rate-impact-text">Current average rate updated live from FRED API</span>
                    </label>
                    <div class="input-group">
                        <input type="number" id="interest-rate" class="form-control" value="6.44" min="0.1" max="20" step="0.01">
                        <span class="input-suffix">%</span>
                    </div>
                </div>

                <!-- Loan Term -->
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-calendar-alt"></i>
                        Loan Term
                    </label>
                    
                    <div class="term-selector">
                        <button type="button" class="term-chip" data-term="15" onclick="selectTerm(15)">
                            <span class="term-years">15</span>
                            <span class="term-label">Years</span>
                            <small class="term-note">Higher payment, less interest</small>
                        </button>
                        <button type="button" class="term-chip active" data-term="30" onclick="selectTerm(30)">
                            <span class="term-years">30</span>
                            <span class="term-label">Years</span>
                            <small class="term-note">Most popular</small>
                        </button>
                    </div>

                    <div class="form-group">
                        <label for="custom-term" class="form-label">
                            <i class="fas fa-edit"></i>
                            Custom Term
                            <span class="optional-text">Custom loan term between 5-50 years (overrides above selections)</span>
                        </label>
                        <div class="input-group">
                            <input type="number" id="custom-term" class="form-control" min="5" max="50" placeholder="Enter custom term">
                            <span class="input-suffix">Years</span>
                        </div>
                    </div>
                </div>

                <!-- Half-Size Loan Type Cards -->
                <div class="loan-type-group">
                    <h3 class="subsection-title">
                        <span class="step-number">🏦</span>
                        Loan Type
                    </h3>
                    
                    <div class="loan-type-selector">
                        <button type="button" class="loan-type-btn active" data-loan-type="conventional" onclick="selectLoanType('conventional')">
                            <i class="fas fa-university"></i>
                            <span>Conventional</span>
                            <small>Best rates for good credit</small>
                        </button>
                        <button type="button" class="loan-type-btn" data-loan-type="fha" onclick="selectLoanType('fha')">
                            <i class="fas fa-home"></i>
                            <span>FHA</span>
                            <small>3.5% down minimum</small>
                        </button>
                        <button type="button" class="loan-type-btn" data-loan-type="va" onclick="selectLoanType('va')">
                            <i class="fas fa-medal"></i>
                            <span>VA</span>
                            <small>For veterans & military</small>
                        </button>
                        <button type="button" class="loan-type-btn" data-loan-type="usda" onclick="selectLoanType('usda')">
                            <i class="fas fa-tractor"></i>
                            <span>USDA</span>
                            <small>Rural area homes</small>
                        </button>
                    </div>
                </div>
            </div>

            <!-- 2. Property & Insurance Details -->
            <div class="form-section">
                <h3 class="subsection-title">
                    <span class="step-number">2</span>
                    Property & Insurance Details
                </h3>

                <!-- Property State -->
                <div class="form-group">
                    <label for="property-state" class="form-label">
                        <i class="fas fa-map-marked-alt"></i>
                        Property State
                        <span class="auto-calc-text">Select your state for accurate local rates</span>
                    </label>
                    <select id="property-state" class="form-control">
                        <option value="">Select State</option>
                    </select>
                </div>

                <!-- Property Tax -->
                <div class="form-group">
                    <label for="property-tax" class="form-label">
                        <i class="fas fa-receipt"></i>
                        Property Tax (Annual)
                        <span class="auto-calc-text">Calculated automatically when state is selected</span>
                    </label>
                    <div class="input-group">
                        <span class="input-prefix">$</span>
                        <input type="text" id="property-tax" class="form-control" value="9,000">
                    </div>
                    <small class="help-text" id="property-tax-help">Property tax varies by location and is typically 0.5% to 2.5% of home value</small>
                </div>

                <!-- Home Insurance -->
                <div class="form-group">
                    <label for="home-insurance" class="form-label">
                        <i class="fas fa-shield-alt"></i>
                        Home Insurance (Annual)
                        <span class="auto-calc-text">Calculated automatically when state is selected</span>
                    </label>
                    <div class="input-group">
                        <span class="input-prefix">$</span>
                        <input type="text" id="home-insurance" class="form-control" value="1,800">
                    </div>
                    <small class="help-text" id="home-insurance-help">Home insurance typically costs 0.3% to 0.8% of home value annually</small>
                </div>

                <!-- PMI with Auto-Sync -->
                <div class="form-group">
                    <label for="pmi" class="form-label">
                        <i class="fas fa-umbrella"></i>
                        PMI (Private Mortgage Insurance)
                        <span class="auto-calc-text">Required for conventional loans with less than 20% down</span>
                    </label>
                    <div class="input-group">
                        <span class="input-prefix">$</span>
                        <input type="text" id="pmi" class="form-control" value="0">
                    </div>
                    <div id="pmi-status" class="pmi-status inactive" style="display: none;">
                        <i class="fas fa-check-circle"></i>
                        No PMI Required: 20%+ Down Payment
                    </div>
                </div>

                <!-- HOA Fees -->
                <div class="form-group">
                    <label for="hoa-fees" class="form-label">
                        <i class="fas fa-building"></i>
                        HOA Fees (Monthly)
                        <span class="optional-text">Monthly fees for community amenities and maintenance</span>
                    </label>
                    <div class="input-group">
                        <span class="input-prefix">$</span>
                        <input type="text" id="hoa-fees" class="form-control" value="0">
                    </div>
                </div>
            </div>

            <!-- 3. Extra Payments (Updated as requested) -->
            <div class="form-section">
                <h3 class="subsection-title">
                    <span class="step-number">3</span>
                    Extra Payments (Optional)
                </h3>

                <!-- Extra Monthly Payment -->
                <div class="form-group">
                    <label for="extra-monthly" class="form-label">
                        <i class="fas fa-plus-circle"></i>
                        Extra Monthly Payment
                        <span class="savings-preview">Extra payments directly reduce your loan principal</span>
                    </label>
                    <div class="input-group">
                        <span class="input-prefix">$</span>
                        <input type="text" id="extra-monthly" class="form-control" value="0">
                    </div>
                </div>

                <!-- Extra Weekly Payment -->
                <div class="form-group">
                    <label for="extra-weekly" class="form-label">
                        <i class="fas fa-calendar-week"></i>
                        Extra Weekly Payment
                        <span class="savings-preview">Applied weekly to reduce principal faster</span>
                    </label>
                    <div class="input-group">
                        <span class="input-prefix">$</span>
                        <input type="text" id="extra-weekly" class="form-control" value="0">
                    </div>
                </div>
            </div>

            <!-- 4. Closing Costs -->
            <div class="form-section">
                <h3 class="subsection-title">
                    <span class="step-number">4</span>
                    Closing Costs Estimation
                </h3>

                <div class="form-group">
                    <label for="closing-costs-percentage" class="form-label">
                        <i class="fas fa-file-contract"></i>
                        Closing Costs
                    </label>
                    <div class="input-group">
                        <input type="number" id="closing-costs-percentage" class="form-control" value="3" min="0" max="10" step="0.1">
                        <span class="input-suffix">%</span>
                    </div>
                    <div id="closing-costs-amount" class="closing-costs-amount">= $13,500</div>
                    <small class="help-text">Typical closing costs range from 2-5% of home price</small>
                </div>
            </div>

            <div class="calculation-note">
                <i class="fas fa-info-circle"></i>
                All calculations update automatically as you type - no calculate button needed!
            </div>
        </section>

        <!-- Results Section (40% width) -->
        <section class="results-section" role="main" aria-labelledby="payment-results-title">
            <div class="section-header">
                <h2 class="section-title" id="payment-results-title">
                    <i class="fas fa-calculator"></i>
                    Monthly Payment Breakdown
                </h2>
            </div>

            <!-- Results Tabs -->
            <div class="results-tabs">
                <button class="tab-btn active" data-tab="payment-summary" onclick="showTab('payment-summary')">
                    <i class="fas fa-chart-pie"></i>
                    Payment Summary
                </button>
                <button class="tab-btn" data-tab="loan-analysis" onclick="showTab('loan-analysis')">
                    <i class="fas fa-chart-line"></i>
                    Loan Analysis
                </button>
                <button class="tab-btn" data-tab="ai-insights" onclick="showTab('ai-insights')">
                    <i class="fas fa-brain"></i>
                    AI Insights
                </button>
                <button class="tab-btn" data-tab="schedule" onclick="showTab('schedule')">
                    <i class="fas fa-table"></i>
                    Schedule
                </button>
            </div>

            <!-- Payment Summary Tab -->
            <div class="tab-content active" id="payment-summary">
                <!-- Main Payment Card -->
                <div class="main-payment-card">
                    <div class="payment-header">
                        <h3>Total Monthly Payment</h3>
                        <span class="loan-type-badge" id="loan-type-badge">Conventional Loan</span>
                    </div>
                    <div class="payment-amount">
                        <span class="amount-value" id="total-payment">$2,768</span>
                        <div class="payment-breakdown-summary">
                            <span id="pi-summary">$2,025 P&I</span>
                            <span class="separator">+</span>
                            <span id="escrow-summary">$743 Escrow</span>
                        </div>
                    </div>
                </div>

                <!-- Payment Components -->
                <div class="payment-breakdown">
                    <h3>Payment Components</h3>
                    
                    <div class="breakdown-items">
                        <div class="breakdown-item">
                            <div class="item-info">
                                <span class="item-label">Principal & Interest</span>
                                <span class="item-amount" id="pi-amount">$2,025</span>
                            </div>
                            <div class="item-bar">
                                <div class="item-fill" id="pi-fill" style="width: 73%"></div>
                            </div>
                            <span class="item-percentage" id="pi-percent">73%</span>
                        </div>

                        <div class="breakdown-item">
                            <div class="item-info">
                                <span class="item-label">Property Tax</span>
                                <span class="item-amount" id="tax-amount">$750</span>
                            </div>
                            <div class="item-bar">
                                <div class="item-fill" id="tax-fill" style="width: 27%"></div>
                            </div>
                            <span class="item-percentage" id="tax-percent">27%</span>
                        </div>

                        <div class="breakdown-item">
                            <div class="item-info">
                                <span class="item-label">Home Insurance</span>
                                <span class="item-amount" id="insurance-amount">$150</span>
                            </div>
                            <div class="item-bar">
                                <div class="item-fill" id="insurance-fill" style="width: 5%"></div>
                            </div>
                            <span class="item-percentage" id="insurance-percent">5%</span>
                        </div>

                        <!-- PMI (shown/hidden based on calculation) -->
                        <div class="breakdown-item" id="pmi-amount-display" style="display: none;">
                            <div class="item-info">
                                <span class="item-label">PMI</span>
                                <span class="item-amount" id="pmi-chart-amount">$0</span>
                            </div>
                            <div class="item-bar">
                                <div class="item-fill" id="pmi-chart-fill" style="width: 0%"></div>
                            </div>
                            <span class="item-percentage" id="pmi-chart-percent">0%</span>
                        </div>

                        <!-- HOA (shown/hidden based on calculation) -->
                        <div class="breakdown-item" id="hoa-amount-display" style="display: none;">
                            <div class="item-info">
                                <span class="item-label">HOA Fees</span>
                                <span class="item-amount" id="hoa-chart-amount">$0</span>
                            </div>
                            <div class="item-bar">
                                <div class="item-fill" id="hoa-chart-fill" style="width: 0%"></div>
                            </div>
                            <span class="item-percentage" id="hoa-chart-percent">0%</span>
                        </div>
                    </div>
                </div>

                <!-- Colorful Payment Components Chart -->
                <div class="chart-section">
                    <div class="chart-header">
                        <h3>Payment Components</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="payment-components-chart"></canvas>
                    </div>
                </div>

                <!-- Loan Summary -->
                <div class="loan-summary">
                    <h3>Loan Summary</h3>
                    <div class="summary-grid">
                        <div class="summary-item">
                            <span class="summary-label">Loan Amount</span>
                            <span class="summary-value" id="loan-amount-summary">$360,000</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Total Interest</span>
                            <span class="summary-value" id="total-interest-summary">$367,520</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Total Cost</span>
                            <span class="summary-value" id="total-cost-summary">$727,520</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Payoff Date</span>
                            <span class="summary-value" id="payoff-date-summary">Oct 2054</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Closing Costs</span>
                            <span class="summary-value" id="closing-costs-summary">$13,500</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Loan Analysis Tab -->
            <div class="tab-content" id="loan-analysis">
                <!-- Mortgage Timeline Chart -->
                <div class="chart-section">
                    <div class="chart-header">
                        <h3>Mortgage Balance Over Time</h3>
                    </div>
                    <p class="chart-subtitle">Loan: $360,000 | Term: 30 years | Rate: 6.44%</p>
                    
                    <div class="chart-container">
                        <canvas id="mortgage-timeline-chart"></canvas>
                    </div>
                    
                    <!-- Year Slider -->
                    <div class="year-slider-section">
                        <label for="year-range" class="slider-label">
                            <i class="fas fa-calendar-alt"></i>
                            Select Year for Details
                        </label>
                        <input type="range" id="year-range" class="year-slider" min="1" max="30" value="15">
                    </div>

                    <div class="year-display">
                        <h4 id="year-label">Year 15</h4>
                        <div class="year-details">
                            <div class="detail-item">
                                <span class="detail-label">Principal Paid</span>
                                <span class="detail-value" id="principal-paid">$125,000</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Interest Paid</span>
                                <span class="detail-value" id="interest-paid">$200,000</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Remaining Balance</span>
                                <span class="detail-value" id="remaining-balance">$195,000</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Insights Tab -->
            <div class="tab-content" id="ai-insights">
                <div class="ai-insights-section">
                    <div class="insights-header">
                        <h3>
                            <i class="fas fa-brain"></i>
                            AI-Powered Insights
                            <span class="ai-badge">AI Powered</span>
                        </h3>
                        <button class="refresh-btn" onclick="generateAIInsights()">
                            <i class="fas fa-sync-alt"></i>
                            Refresh
                        </button>
                    </div>

                    <div class="insights-container" id="insights-container">
                        <!-- Smart Savings Opportunity -->
                        <div class="insight-item insight-success">
                            <div class="insight-header">
                                <div class="insight-icon">
                                    <i class="fas fa-piggy-bank"></i>
                                </div>
                                <div class="insight-content">
                                    <h4 class="insight-title">Smart Savings Opportunity</h4>
                                    <p class="insight-text">Adding just $100 extra monthly payment could save you $45,000 in interest and pay off your loan 4.2 years earlier!</p>
                                </div>
                            </div>
                        </div>

                        <!-- Rate Optimization -->
                        <div class="insight-item insight-info">
                            <div class="insight-header">
                                <div class="insight-icon">
                                    <i class="fas fa-percentage"></i>
                                </div>
                                <div class="insight-content">
                                    <h4 class="insight-title">Rate Optimization</h4>
                                    <p class="insight-text">Your current rate is competitive! With excellent credit, you could potentially qualify for 0.25% lower rates with different lenders.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Down Payment Analysis -->
                        <div class="insight-item insight-success">
                            <div class="insight-header">
                                <div class="insight-icon">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <div class="insight-content">
                                    <h4 class="insight-title">Down Payment Analysis</h4>
                                    <p class="insight-text">Your 20% down payment eliminates PMI, saving $225/month. Great choice for building equity faster!</p>
                                </div>
                            </div>
                        </div>

                        <!-- Market Insights -->
                        <div class="insight-item insight-info">
                            <div class="insight-header">
                                <div class="insight-icon">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div class="insight-content">
                                    <h4 class="insight-title">Market Insights</h4>
                                    <p class="insight-text">Property values in your area have increased 8.2% this year. Your investment timing looks favorable for long-term appreciation.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Amortization Schedule Tab -->
            <div class="tab-content" id="schedule">
                <div class="schedule-section">
                    <h3>
                        <i class="fas fa-table"></i>
                        Amortization Schedule
                    </h3>

                    <!-- Schedule Type Toggle -->
                    <div class="frequency-toggle">
                        <button class="frequency-btn active schedule-type-btn" onclick="toggleScheduleType('monthly')">
                            <i class="fas fa-calendar-alt"></i>
                            Monthly
                        </button>
                        <button class="frequency-btn schedule-type-btn" onclick="toggleScheduleType('yearly')">
                            <i class="fas fa-calendar"></i>
                            Yearly
                        </button>
                    </div>

                    <div class="schedule-container">
                        <div class="schedule-table-wrapper">
                            <table class="schedule-table" id="amortization-table">
                                <thead>
                                    <tr>
                                        <th>Payment</th>
                                        <th>Date</th>
                                        <th>Payment</th>
                                        <th>Principal</th>
                                        <th>Interest</th>
                                        <th>Balance</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="6">Auto-calculating payment schedule...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="schedule-pagination">
                            <button class="pagination-btn" id="prev-payments" onclick="showPreviousPayments()">
                                <i class="fas fa-chevron-left"></i>
                                Previous
                            </button>

                            <span class="pagination-info" id="schedule-info">Payments 1-6 of 360</span>

                            <button class="pagination-btn" id="next-payments" onclick="showNextPayments()">
                                Next
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>

                        <!-- Export Options -->
                        <div class="action-buttons">
                            <button class="action-btn secondary" onclick="exportScheduleCSV()">
                                <i class="fas fa-file-csv"></i>
                                Export CSV
                            </button>
                            <button class="action-btn secondary" onclick="exportSchedulePDF()">
                                <i class="fas fa-file-pdf"></i>
                                Export PDF
                            </button>
                            <button class="action-btn secondary" onclick="printSchedule()">
                                <i class="fas fa-print"></i>
                                Print
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Universal Sharing Options (Below Results Section as Requested) -->
            <div class="sharing-section">
                <h3>
                    <i class="fas fa-share-alt"></i>
                    Universal Sharing Options
                </h3>
                
                <div class="sharing-buttons">
                    <button class="share-btn primary" onclick="shareResults()">
                        <i class="fas fa-share"></i>
                        Share Results
                    </button>
                    <button class="share-btn secondary" onclick="downloadPDF()">
                        <i class="fas fa-download"></i>
                        Download PDF
                    </button>
                    <button class="share-btn secondary" onclick="printResults()">
                        <i class="fas fa-print"></i>
                        Print
                    </button>
                    <button class="share-btn secondary" onclick="saveResults()">
                        <i class="fas fa-bookmark"></i>
                        Save
                    </button>
                </div>

                <div class="compare-section">
                    <button class="compare-btn" onclick="openComparisonPage()">
                        <i class="fas fa-balance-scale"></i>
                        Compare Loan Scenarios
                    </button>
                </div>
            </div>
        </section>

        <!-- Sidebar Section (30% width) -->
        <section class="sidebar-section" role="complementary" aria-labelledby="sidebar-title">
            <!-- Lender Cards -->
            <div class="lender-cards">
                <h3 id="sidebar-title">
                    <i class="fas fa-university"></i>
                    Featured USA Lenders
                </h3>

                <!-- Featured Lender -->
                <div class="lender-card featured">
                    <div class="lender-header">
                        <div class="lender-logo">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="lender-info">
                            <h4>Quicken Loans</h4>
                            <div class="lender-rating">
                                <span class="stars">★★★★★</span>
                                <span class="rating-text">4.8/5 (12,547 reviews)</span>
                            </div>
                        </div>
                    </div>

                    <div class="lender-features">
                        <div class="feature-item">
                            <i class="fas fa-check"></i>
                            Online application in minutes
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check"></i>
                            24/7 customer support
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check"></i>
                            No hidden fees
                        </div>
                    </div>

                    <div class="lender-rates">
                        <div class="rate-info">
                            <span class="rate-label">30-Year Fixed</span>
                            <span class="rate-value">6.42%</span>
                        </div>
                    </div>

                    <button class="lender-cta" onclick="trackLender('Quicken Loans')">
                        <i class="fas fa-external-link-alt"></i>
                        Get Quote
                    </button>
                </div>

                <!-- Additional Lenders -->
                <div class="lender-card">
                    <div class="lender-header">
                        <div class="lender-logo">
                            <i class="fas fa-home"></i>
                        </div>
                        <div class="lender-info">
                            <h4>Better.com</h4>
                            <div class="lender-rating">
                                <span class="stars">★★★★☆</span>
                                <span class="rating-text">4.6/5 (8,234 reviews)</span>
                            </div>
                        </div>
                    </div>

                    <div class="lender-features">
                        <div class="feature-item">
                            <i class="fas fa-check"></i>
                            Digital-first process
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check"></i>
                            Competitive rates
                        </div>
                    </div>

                    <div class="lender-rates">
                        <div class="rate-info">
                            <span class="rate-label">30-Year Fixed</span>
                            <span class="rate-value">6.45%</span>
                        </div>
                    </div>

                    <button class="lender-cta" onclick="trackLender('Better.com')">
                        <i class="fas fa-external-link-alt"></i>
                        Get Quote
                    </button>
                </div>

                <div class="lender-card">
                    <div class="lender-header">
                        <div class="lender-logo">
                            <i class="fas fa-building"></i>
                        </div>
                        <div class="lender-info">
                            <h4>Chase Bank</h4>
                            <div class="lender-rating">
                                <span class="stars">★★★★☆</span>
                                <span class="rating-text">4.5/5 (15,678 reviews)</span>
                            </div>
                        </div>
                    </div>

                    <div class="lender-features">
                        <div class="feature-item">
                            <i class="fas fa-check"></i>
                            Nationwide branches
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check"></i>
                            DreamMaker℠ program
                        </div>
                    </div>

                    <div class="lender-rates">
                        <div class="rate-info">
                            <span class="rate-label">30-Year Fixed</span>
                            <span class="rate-value">6.48%</span>
                        </div>
                    </div>

                    <button class="lender-cta" onclick="trackLender('Chase Bank')">
                        <i class="fas fa-external-link-alt"></i>
                        Get Quote
                    </button>
                </div>
            </div>

            <!-- Market Insights -->
            <div class="market-insights">
                <h3>
                    <i class="fas fa-chart-bar"></i>
                    USA Market Insights
                </h3>

                <div class="market-stats">
                    <div class="stat-item">
                        <div class="stat-icon">
                            <i class="fas fa-home"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-label">Median Home Price</span>
                            <span class="stat-value">$428,700</span>
                            <span class="stat-change positive">+8.2%</span>
                        </div>
                    </div>

                    <div class="stat-item">
                        <div class="stat-icon">
                            <i class="fas fa-percentage"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-label">Average Rate</span>
                            <span class="stat-value">6.44%</span>
                            <span class="stat-change positive">+0.15%</span>
                        </div>
                    </div>

                    <div class="stat-item">
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-label">Avg. Days on Market</span>
                            <span class="stat-value">28 days</span>
                            <span class="stat-change negative">-5 days</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Government Programs -->
            <div class="government-programs">
                <h3>
                    <i class="fas fa-flag-usa"></i>
                    USA Government Programs
                </h3>

                <div class="program-list">
                    <div class="program-item">
                        <div class="program-icon">
                            <i class="fas fa-home"></i>
                        </div>
                        <div class="program-info">
                            <h4>FHA Loans</h4>
                            <p>Low down payment (3.5%) for first-time and existing homebuyers</p>
                            <a href="https://www.fha.gov/" class="program-link" target="_blank">Learn More</a>
                        </div>
                    </div>

                    <div class="program-item">
                        <div class="program-icon">
                            <i class="fas fa-medal"></i>
                        </div>
                        <div class="program-info">
                            <h4>VA Loans</h4>
                            <p>No down payment for eligible veterans and service members</p>
                            <a href="https://www.va.gov/housing-assistance/" class="program-link" target="_blank">Learn More</a>
                        </div>
                    </div>

                    <div class="program-item">
                        <div class="program-icon">
                            <i class="fas fa-tractor"></i>
                        </div>
                        <div class="program-info">
                            <h4>USDA Rural Loans</h4>
                            <p>Zero down payment for eligible rural and suburban areas</p>
                            <a href="https://www.rd.usda.gov/programs-services/single-family-housing-programs" class="program-link" target="_blank">Learn More</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FRED API Data Source -->
            <div class="data-source-section">
                <h3>
                    <i class="fas fa-database"></i>
                    Data Sources
                </h3>
                <div class="data-source-info">
                    <p><strong>Live Mortgage Rates:</strong> Federal Reserve Economic Data (FRED) API</p>
                    <p><strong>Market Data:</strong> U.S. Bureau of Economic Analysis</p>
                    <p><strong>Tax Rates:</strong> State & Local Government Finance</p>
                    <p><small>Data updated every 5 minutes during market hours. Rates subject to change and lender approval.</small></p>
                </div>
            </div>

            <!-- Sponsor Section -->
            <div class="sponsor-section">
                <h3>
                    <i class="fas fa-handshake"></i>
                    Sponsored Content
                </h3>

                <div class="sponsor-ad">
                    <div class="ad-content">
                        <div class="ad-logo">
                            <i class="fas fa-percentage"></i>
                        </div>
                        <div class="ad-text">
                            <h4>Compare Rates from Top Lenders</h4>
                            <p>Get personalized rate quotes from multiple lenders in minutes</p>
                        </div>
                    </div>
                    <button class="ad-cta">Compare Rates</button>
                </div>

                <div class="sponsor-ad">
                    <div class="ad-content">
                        <div class="ad-logo">
                            <i class="fas fa-credit-card"></i>
                        </div>
                        <div class="ad-text">
                            <h4>Improve Your Credit Score</h4>
                            <p>Free credit monitoring and improvement tools</p>
                        </div>
                    </div>
                    <button class="ad-cta">Check Score</button>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="site-footer" role="contentinfo">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>
                        <span class="flag-icon">🇺🇸</span>
                        FinGuid USA
                    </h3>
                    <p>World's #1 AI-powered mortgage calculator platform, helping Americans make smarter home buying decisions with advanced calculations, live market data, and expert insights.</p>
                    
                    <div class="footer-social">
                        <a href="#" class="social-link" aria-label="Follow us on Facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="Follow us on Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="Follow us on LinkedIn">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="Follow us on Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                    </div>
                </div>

                <div class="footer-links">
                    <div class="footer-column">
                        <h4>Calculators</h4>
                        <ul>
                            <li><a href="/mortgage-calculator">Mortgage Calculator</a></li>
                            <li><a href="/refinance-calculator">Refinance Calculator</a></li>
                            <li><a href="/affordability-calculator">Affordability Calculator</a></li>
                            <li><a href="/rent-vs-buy">Rent vs Buy Calculator</a></li>
                        </ul>
                    </div>

                    <div class="footer-column">
                        <h4>Resources</h4>
                        <ul>
                            <li><a href="/mortgage-guide">Mortgage Guide</a></li>
                            <li><a href="/first-time-buyers">First-Time Buyers</a></li>
                            <li><a href="/loan-types">Loan Types</a></li>
                            <li><a href="/market-trends">Market Trends</a></li>
                        </ul>
                    </div>

                    <div class="footer-column">
                        <h4>Company</h4>
                        <ul>
                            <li><a href="/about">About Us</a></li>
                            <li><a href="/contact">Contact</a></li>
                            <li><a href="/careers">Careers</a></li>
                            <li><a href="/press">Press</a></li>
                        </ul>
                    </div>

                    <div class="footer-column">
                        <h4>Legal</h4>
                        <ul>
                            <li><a href="/privacy">Privacy Policy</a></li>
                            <li><a href="/terms">Terms of Service</a></li>
                            <li><a href="/disclaimer">Disclaimer</a></li>
                            <li><a href="/cookies">Cookie Policy</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <div class="footer-disclaimer">
                    <p><strong>Disclaimer:</strong> This calculator is for educational purposes only. Actual loan terms and rates may vary based on credit score, income, and other factors. All calculations are estimates. Consult with a qualified mortgage professional for personalized advice.</p>
                    <p><strong>FRED API:</strong> Live mortgage rates provided by Federal Reserve Economic Data (FRED), Federal Reserve Bank of St. Louis. https://fred.stlouisfed.org/</p>
                </div>

                <div class="footer-copyright">
                    <p>&copy; 2025 FinGuid. All rights reserved. World's #1 AI Calculator Platform.</p>
                    
                    <div class="footer-badges">
                        <span class="badge">NMLS Licensed</span>
                        <span class="badge">SSL Secured</span>
                        <span class="badge">WCAG 2.1 AA</span>
                        <span class="badge">PWA Ready</span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Loading Indicator -->
    <div id="loading-indicator" class="loading-indicator" style="display: none;">
        <div class="loading-spinner"></div>
        <p>Loading live market data...</p>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Voice Status -->
    <div id="voice-status" class="voice-status">
        <i class="fas fa-microphone"></i>
        <span>Voice control active - speak your commands</span>
    </div>

    <!-- Scripts -->
    <script src="mortgage-calculator.js"></script>
</body>
</html>
