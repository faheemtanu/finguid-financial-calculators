<!DOCTYPE html>
<html lang="en" data-color-scheme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Loan Pro ‚Äî AI‚ÄëPowered Mortgage Calculator | FinGuid</title>
    <meta name="description" content="World's First AI-Powered Mortgage Calculator. Get instant loan payments, live Federal Reserve rates, and intelligent insights for American home buyers.">
    <meta name="keywords" content="mortgage calculator, home loan calculator, AI mortgage, FRED rates, USA property loans">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè†</text></svg>">
    
    <!-- External CSS -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <!-- Main CSS -->
    <link rel="stylesheet" href="mortgage-calculator-2.css">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FinancialService",
        "name": "FinGuid AI Mortgage Calculator",
        "description": "World's First AI-Powered Mortgage Calculator with live Federal Reserve rates",
        "url": "https://finguid.com/mortgage-calculator",
        "serviceType": "Mortgage Calculator",
        "areaServed": "United States",
        "provider": {
            "@type": "Organization",
            "name": "FinGuid",
            "url": "https://finguid.com"
        }
    }
    </script>
</head>
<body>
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Enhanced Header with FinGuid Branding -->
    <header class="site-header" id="site-header">
        <div class="header-container">
            <!-- Brand Section -->
            <div class="brand-section">
                <a href="https://finguid.com/" class="logo-link" aria-label="FinGuid Home">
                    <div class="logo-container">
                        <div class="usa-flag" aria-hidden="true">üá∫üá∏</div>
                        <div class="logo-content">
                            <div class="logo-main">FinGuid</div>
                            <div class="logo-subtitle">
                                <a href="https://finguid.com/mortgage-calculator#" target="_blank" rel="noopener" class="ai-link">
                                    World's First AI Calculator
                                </a>
                            </div>
                        </div>
                    </div>
                </a>
            </div>

            <!-- Navigation -->
            <nav class="nav-links animated-nav" role="navigation" aria-label="Main navigation">
                <a href="#calculator" class="nav-link" aria-current="page">Calculator</a>
                <a href="#insights" class="nav-link">AI Insights</a>
                <a href="#schedule" class="nav-link">Payment Schedule</a>
            </nav>

            <!-- Accessibility Controls -->
            <div class="accessibility-controls animated-controls">
                <!-- Font Controls -->
                <div class="font-controls">
                    <button type="button" class="control-btn font-btn" id="font-decrease" 
                            onclick="adjustFontSize('decrease')" aria-label="Decrease font size">
                        <i class="fas fa-minus control-icon" aria-hidden="true"></i>
                        <span class="control-label sr-only">Smaller</span>
                    </button>
                    <button type="button" class="control-btn font-btn" id="font-reset" 
                            onclick="adjustFontSize('reset')" aria-label="Reset font size to default">
                        <i class="fas fa-font control-icon" aria-hidden="true"></i>
                        <span class="control-label sr-only">Default</span>
                    </button>
                    <button type="button" class="control-btn font-btn" id="font-increase" 
                            onclick="adjustFontSize('increase')" aria-label="Increase font size">
                        <i class="fas fa-plus control-icon" aria-hidden="true"></i>
                        <span class="control-label sr-only">Larger</span>
                    </button>
                </div>

                <!-- Theme Toggle -->
                <button type="button" class="control-btn theme-btn" id="theme-toggle" 
                        onclick="toggleTheme()" aria-label="Toggle dark mode" aria-pressed="false">
                    <i class="fas fa-moon theme-icon" aria-hidden="true"></i>
                    <span class="control-label">Dark</span>
                </button>

                <!-- Voice Control -->
                <button type="button" class="control-btn voice-btn" id="voice-toggle" 
                        onclick="toggleVoiceControl()" aria-label="Toggle voice control" aria-pressed="false">
                    <i class="fas fa-microphone voice-icon" aria-hidden="true"></i>
                    <span class="control-label">Voice</span>
                </button>

                <!-- Screen Reader Mode -->
                <button type="button" class="control-btn reader-btn" id="reader-toggle" 
                        onclick="toggleScreenReader()" aria-label="Toggle screen reader mode" aria-pressed="false">
                    <i class="fas fa-assistive-listening-systems reader-icon" aria-hidden="true"></i>
                    <span class="control-label">Reader</span>
                </button>
            </div>

            <!-- Mobile Menu Toggle -->
            <button type="button" class="mobile-menu-toggle" id="mobile-menu-toggle" 
                    aria-label="Toggle mobile menu" aria-expanded="false">
                <span class="hamburger"></span>
                <span class="hamburger"></span>
                <span class="hamburger"></span>
            </button>
        </div>

        <!-- Animated Middle Section -->
        <div class="header-middle animated-middle" aria-hidden="true">
            <div class="header-middle-content">
                <div class="tagline">üè† AI-Powered Home Loan Calculations for American Homebuyers</div>
                <div class="features-quick">
                    <span class="feature-quick">‚ú® Live Federal Reserve Rates</span>
                    <span class="feature-quick">üéØ Instant AI Insights</span>
                    <span class="feature-quick">üìä Complete Loan Analysis</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section with Animation -->
    <main class="calculator-main" id="main-content">
        <section class="hero-section" aria-labelledby="hero-title">
            <div class="hero-content">
                <h1 id="hero-title" class="hero-title">Home Loan Pro ‚Äî AI‚ÄëPowered Mortgage Calculator</h1>
                <p class="hero-subtitle">Get instant loan payments with live Federal Reserve rates and intelligent insights</p>
                <div class="hero-features">
                    <div class="hero-feature">
                        <i class="fas fa-chart-line" aria-hidden="true"></i>
                        <span>Live FRED Rates</span>
                    </div>
                    <div class="hero-feature">
                        <i class="fas fa-brain" aria-hidden="true"></i>
                        <span>AI Insights</span>
                    </div>
                    <div class="hero-feature">
                        <i class="fas fa-calculator" aria-hidden="true"></i>
                        <span>Smart Analysis</span>
                    </div>
                </div>
            </div>
            <div class="hero-animation" aria-hidden="true">
                <canvas id="hero-canvas"></canvas>
            </div>
        </section>

        <!-- Main Calculator Grid: 30% - 40% - 30% -->
        <div class="calculator-container">
            <!-- Left Section (30%) - Input Controls -->
            <aside class="input-section" role="form" aria-labelledby="input-section-title">
                <div class="section-header">
                    <h2 id="input-section-title" class="section-title">
                        <i class="fas fa-home section-icon" aria-hidden="true"></i>
                        USA Loan Details
                    </h2>
                    <p class="section-subtitle">Enter your American home loan information</p>
                </div>

                <!-- Primary Information -->
                <div class="form-section">
                    <h3 class="subsection-title">
                        <span class="step-number" aria-hidden="true">1</span>
                        Primary Information
                    </h3>

                    <!-- Home Price -->
                    <div class="input-group">
                        <label for="home-price" class="input-label">
                            <i class="fas fa-home" aria-hidden="true"></i>
                            Home Price
                        </label>
                        <div class="input-wrapper currency-input">
                            <input type="text" id="home-price" class="input-field large-input" 
                                   value="$450,000" aria-describedby="home-price-help"
                                   oninput="handleCurrencyInput(this); syncDownPaymentDollar(); updateCalculation();">
                            <div class="input-suffix">USD</div>
                        </div>
                        <div id="home-price-help" class="input-help">Total purchase price of the home</div>
                    </div>

                    <!-- Down Payment Section -->
                    <div class="input-group">
                        <label for="down-payment" class="input-label">
                            <i class="fas fa-piggy-bank" aria-hidden="true"></i>
                            Down Payment
                        </label>
                        
                        <!-- Down Payment Amount -->
                        <div class="input-wrapper currency-input">
                            <input type="text" id="down-payment" class="input-field large-input" 
                                   value="$90,000" aria-describedby="down-payment-help"
                                   oninput="handleCurrencyInput(this); syncDownPaymentDollar();">
                            <div class="input-suffix">USD</div>
                        </div>

                        <!-- Down Payment Percentage -->
                        <div class="input-wrapper percentage-input">
                            <input type="number" id="down-payment-percent" class="input-field" 
                                   value="20" min="0" max="50" step="0.1"
                                   oninput="syncDownPaymentPercent();">
                            <div class="input-suffix">%</div>
                        </div>

                        <!-- Down Payment Chips -->
                        <div class="percentage-chips">
                            <button type="button" class="percentage-chip" onclick="setDownPaymentChip(5)">
                                <span class="chip-value">5</span>%
                            </button>
                            <button type="button" class="percentage-chip" onclick="setDownPaymentChip(10)">
                                <span class="chip-value">10</span>%
                            </button>
                            <button type="button" class="percentage-chip" onclick="setDownPaymentChip(15)">
                                <span class="chip-value">15</span>%
                            </button>
                            <button type="button" class="percentage-chip active" onclick="setDownPaymentChip(20)">
                                <span class="chip-value">20</span>%
                            </button>
                            <button type="button" class="percentage-chip" onclick="setDownPaymentChip(25)">
                                <span class="chip-value">25</span>%
                            </button>
                        </div>
                        <div id="down-payment-help" class="input-help">Amount paid upfront to reduce loan size</div>
                    </div>

                    <!-- Interest Rate with Live FRED Integration -->
                    <div class="input-group">
                        <label for="interest-rate" class="input-label">
                            <i class="fas fa-percentage" aria-hidden="true"></i>
                            Interest Rate
                            <div class="live-rate-badge">
                                <i class="fas fa-wifi" aria-hidden="true"></i>
                                LIVE: 6.44%
                            </div>
                        </label>
                        <div class="rate-input-wrapper">
                            <div class="input-wrapper percentage-input">
                                <input type="number" id="interest-rate" class="input-field large-input" 
                                       value="6.44" min="0" max="20" step="0.01"
                                       oninput="updateCalculation();">
                                <div class="input-suffix">%</div>
                            </div>
                            <button type="button" class="refresh-rate-btn" id="refresh-rate" 
                                    onclick="fredAPI.manualRefresh()" aria-label="Refresh live rate">
                                <i class="fas fa-sync-alt" aria-hidden="true"></i>
                            </button>
                        </div>
                        <div class="federal-attribution">
                            Source: Federal Reserve Economic Data (FRED), Federal Reserve Bank of St. Louis
                        </div>
                        <div class="auto-update-status">
                            <i class="fas fa-clock" aria-hidden="true"></i>
                            Automatic updates every hour
                        </div>
                        <div class="next-refresh-time"></div>
                    </div>

                    <!-- Loan Term -->
                    <div class="input-group">
                        <label class="input-label">
                            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
                            Loan Term
                        </label>
                        <div class="term-chips">
                            <button type="button" class="term-chip" data-term="15" onclick="selectTerm(15)">
                                15 years
                            </button>
                            <button type="button" class="term-chip active" data-term="30" onclick="selectTerm(30)">
                                30 years
                            </button>
                            <input type="number" id="custom-term" class="custom-term-input" 
                                   placeholder="Custom" min="5" max="40" 
                                   oninput="selectCustomTerm();">
                        </div>
                        <div class="input-help">Length of the loan in years</div>
                    </div>

                    <!-- Credit Score -->
                    <div class="input-group">
                        <label for="credit-score" class="input-label">
                            <i class="fas fa-chart-bar" aria-hidden="true"></i>
                            Credit Score
                        </label>
                        <select id="credit-score" class="input-field" onchange="updateRateFromCredit();">
                            <option value="800">Excellent (800+)</option>
                            <option value="740">Very Good (740-799)</option>
                            <option value="700" selected>Good (670-739)</option>
                            <option value="630">Fair (580-669)</option>
                            <option value="550">Poor (300-579)</option>
                        </select>
                        <div id="credit-impact" class="credit-impact" style="display: none;"></div>
                    </div>
                </div>

                <!-- Loan Type Selection -->
                <div class="form-section">
                    <h3 class="subsection-title">
                        <i class="fas fa-university" aria-hidden="true"></i>
                        üè¶ Loan Type
                        <span class="subtitle-small">Choose the best loan program</span>
                    </h3>
                    
                    <div class="loan-type-grid">
                        <button type="button" class="loan-type-btn active" data-loan-type="conventional"
                                onclick="selectLoanType('conventional')" aria-pressed="true">
                            <div class="loan-type-icon">üè†</div>
                            <div class="loan-type-content">
                                <div class="loan-type-name">Conventional</div>
                                <div class="loan-type-desc">Most common, flexible terms</div>
                            </div>
                        </button>
                        <button type="button" class="loan-type-btn" data-loan-type="fha"
                                onclick="selectLoanType('fha')" aria-pressed="false">
                            <div class="loan-type-icon">üèõÔ∏è</div>
                            <div class="loan-type-content">
                                <div class="loan-type-name">FHA</div>
                                <div class="loan-type-desc">3.5% down, easier qualifying</div>
                            </div>
                        </button>
                        <button type="button" class="loan-type-btn" data-loan-type="va"
                                onclick="selectLoanType('va')" aria-pressed="false">
                            <div class="loan-type-icon">üéñÔ∏è</div>
                            <div class="loan-type-content">
                                <div class="loan-type-name">VA</div>
                                <div class="loan-type-desc">Veterans, 0% down</div>
                            </div>
                        </button>
                        <button type="button" class="loan-type-btn" data-loan-type="jumbo"
                                onclick="selectLoanType('jumbo')" aria-pressed="false">
                            <div class="loan-type-icon">üíé</div>
                            <div class="loan-type-content">
                                <div class="loan-type-name">Jumbo</div>
                                <div class="loan-type-desc">High-value properties</div>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- Property & Insurance Details -->
                <div class="form-section">
                    <h3 class="subsection-title">
                        <span class="step-number" aria-hidden="true">2</span>
                        Property & Insurance Details
                    </h3>

                    <!-- ZIP Code with Auto-complete -->
                    <div class="input-group">
                        <label for="zip-code" class="input-label">
                            <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
                            ZIP Code
                        </label>
                        <div class="input-wrapper">
                            <input type="text" id="zip-code" class="input-field" 
                                   value="41552" maxlength="5" pattern="[0-9]{5}"
                                   oninput="handleZipCodeInput(this)" onblur="lookupZipCode()">
                            <div class="zip-status" id="zip-status"></div>
                        </div>
                    </div>

                    <!-- City and State (Auto-populated) -->
                    <div class="location-row">
                        <div class="input-group">
                            <label for="city" class="input-label">
                                <i class="fas fa-city" aria-hidden="true"></i>
                                City
                            </label>
                            <input type="text" id="city" class="input-field" readonly>
                        </div>
                        <div class="input-group">
                            <label for="state" class="input-label">
                                <i class="fas fa-flag-usa" aria-hidden="true"></i>
                                State
                            </label>
                            <select id="state" class="input-field" onchange="updatePropertyDefaults();">
                                <option value="">Select State</option>
                                <!-- All 50 states will be populated by JavaScript -->
                            </select>
                        </div>
                    </div>

                    <!-- Property Tax -->
                    <div class="input-group">
                        <label for="property-tax" class="input-label">
                            <i class="fas fa-receipt" aria-hidden="true"></i>
                            Annual Property Tax
                        </label>
                        <div class="input-wrapper currency-input">
                            <input type="text" id="property-tax" class="input-field" 
                                   value="$9,000" oninput="handleCurrencyInput(this); updateCalculation();">
                            <div class="input-suffix">USD</div>
                        </div>
                        <div class="input-help">Estimated annual property tax based on location</div>
                    </div>

                    <!-- Home Insurance -->
                    <div class="input-group">
                        <label for="home-insurance" class="input-label">
                            <i class="fas fa-shield-alt" aria-hidden="true"></i>
                            Annual Home Insurance
                        </label>
                        <div class="input-wrapper currency-input">
                            <input type="text" id="home-insurance" class="input-field" 
                                   value="$1,800" oninput="handleCurrencyInput(this); updateCalculation();">
                            <div class="input-suffix">USD</div>
                        </div>
                        <div class="input-help">Estimated annual homeowner's insurance premium</div>
                    </div>

                    <!-- PMI (Auto-calculated) -->
                    <div class="input-group">
                        <label for="pmi" class="input-label">
                            <i class="fas fa-umbrella" aria-hidden="true"></i>
                            Private Mortgage Insurance (PMI)
                        </label>
                        <div class="input-wrapper currency-input">
                            <input type="text" id="pmi" class="input-field" 
                                   value="$0" readonly>
                            <div class="input-suffix">USD</div>
                        </div>
                        <div id="pmi-status" class="pmi-status" style="display: none;"></div>
                    </div>

                    <!-- HOA Fees -->
                    <div class="input-group">
                        <label for="hoa-fees" class="input-label">
                            <i class="fas fa-building" aria-hidden="true"></i>
                            HOA Fees (Monthly)
                        </label>
                        <div class="input-wrapper currency-input">
                            <input type="text" id="hoa-fees" class="input-field" 
                                   value="$0" oninput="handleCurrencyInput(this); updateCalculation();">
                            <div class="input-suffix">USD</div>
                        </div>
                        <div class="input-help">Monthly homeowner association fees (if applicable)</div>
                    </div>
                </div>

                <!-- Extra Payments -->
                <div class="form-section">
                    <h3 class="subsection-title">
                        <span class="step-number" aria-hidden="true">3</span>
                        Extra Payments (Optional)
                    </h3>

                    <div class="extra-payments-row">
                        <div class="input-group">
                            <label for="extra-monthly" class="input-label">
                                <i class="fas fa-plus-circle" aria-hidden="true"></i>
                                Extra Monthly
                            </label>
                            <div class="input-wrapper currency-input">
                                <input type="text" id="extra-monthly" class="input-field" 
                                       value="$0" oninput="handleCurrencyInput(this); updateCalculation();">
                                <div class="input-suffix">USD</div>
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="extra-weekly" class="input-label">
                                <i class="fas fa-plus-circle" aria-hidden="true"></i>
                                Extra Weekly
                            </label>
                            <div class="input-wrapper currency-input">
                                <input type="text" id="extra-weekly" class="input-field" 
                                       value="$0" oninput="handleCurrencyInput(this); updateCalculation();">
                                <div class="input-suffix">USD</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Closing Costs -->
                <div class="form-section">
                    <h3 class="subsection-title">
                        <span class="step-number" aria-hidden="true">4</span>
                        Closing Costs Estimation
                    </h3>

                    <div class="input-group">
                        <label for="closing-costs-percentage" class="input-label">
                            <i class="fas fa-handshake" aria-hidden="true"></i>
                            Closing Costs Percentage
                        </label>
                        <div class="input-wrapper percentage-input">
                            <input type="number" id="closing-costs-percentage" class="input-field" 
                                   value="3" min="1" max="6" step="0.1" 
                                   oninput="updateCalculation();">
                            <div class="input-suffix">%</div>
                        </div>
                        <div class="closing-cost-display">
                            = <span id="closing-cost-amount">$13,500</span>
                        </div>
                        <div class="input-help">Typical closing costs range from 2-5% of home price</div>
                    </div>
                </div>

                <div class="calculation-note">
                    <i class="fas fa-info-circle" aria-hidden="true"></i>
                    All calculations update automatically as you type - no calculate button needed!
                </div>
            </aside>

            <!-- Middle Section (40%) - Results Display -->
            <main class="results-section" role="main" aria-labelledby="results-section-title">
                <div class="section-header">
                    <h2 id="results-section-title" class="section-title">
                        <i class="fas fa-calculator section-icon" aria-hidden="true"></i>
                        Monthly Payment Breakdown
                    </h2>
                    <p class="section-subtitle">Your personalized mortgage calculation</p>
                </div>

                <!-- Primary Payment Display -->
                <div class="payment-display-main">
                    <div class="payment-header">
                        <h3 class="payment-title">Total Monthly Payment<span class="loan-type-indicator">Conventional Loan</span></h3>
                        <div class="payment-amount" id="total-monthly-payment">$2,768</div>
                        <div class="payment-breakdown" id="payment-breakdown">$2,025 P&I + $743 Escrow</div>
                    </div>
                </div>

                <!-- Payment Components Chart -->
                <div class="chart-section">
                    <h3 class="chart-title">
                        <i class="fas fa-chart-pie" aria-hidden="true"></i>
                        Payment Components
                    </h3>
                    <div class="chart-container">
                        <canvas id="payment-components-chart" aria-label="Payment components chart"></canvas>
                    </div>
                </div>

                <!-- Loan Summary Cards -->
                <div class="summary-section">
                    <h3 class="summary-title">
                        <i class="fas fa-list" aria-hidden="true"></i>
                        Loan Summary
                    </h3>
                    <div class="summary-grid">
                        <div class="summary-item loan-amount">
                            <div class="summary-icon">
                                <i class="fas fa-dollar-sign" aria-hidden="true"></i>
                            </div>
                            <div class="summary-details">
                                <div class="summary-label">Loan Amount</div>
                                <div class="summary-value" id="loan-amount-display">$360,000</div>
                            </div>
                        </div>
                        
                        <div class="summary-item total-interest">
                            <div class="summary-icon">
                                <i class="fas fa-chart-line" aria-hidden="true"></i>
                            </div>
                            <div class="summary-details">
                                <div class="summary-label">Total Interest</div>
                                <div class="summary-value" id="total-interest-display">$367,520</div>
                            </div>
                        </div>
                        
                        <div class="summary-item total-cost">
                            <div class="summary-icon">
                                <i class="fas fa-calculator" aria-hidden="true"></i>
                            </div>
                            <div class="summary-details">
                                <div class="summary-label">Total Cost</div>
                                <div class="summary-value" id="total-cost-display">$727,520</div>
                            </div>
                        </div>
                        
                        <div class="summary-item payoff-date">
                            <div class="summary-icon">
                                <i class="fas fa-calendar-check" aria-hidden="true"></i>
                            </div>
                            <div class="summary-details">
                                <div class="summary-label">Payoff Date</div>
                                <div class="summary-value" id="payoff-date-display">Oct 2054</div>
                            </div>
                        </div>
                        
                        <div class="summary-item closing-costs">
                            <div class="summary-icon">
                                <i class="fas fa-handshake" aria-hidden="true"></i>
                            </div>
                            <div class="summary-details">
                                <div class="summary-label">Closing Costs</div>
                                <div class="summary-value" id="closing-costs-display">$13,500</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mortgage Timeline Chart -->
                <div class="loan-analysis-section">
                    <h3 class="analysis-title">
                        <i class="fas fa-chart-area" aria-hidden="true"></i>
                        Mortgage Balance Over Time
                    </h3>
                    <div class="chart-subtitle">Loan: $360,000 | Term: 30 years | Rate: 6.44%</div>
                    
                    <!-- Year Selector -->
                    <div class="year-selector-section">
                        <label for="year-slider" class="year-selector-label">Select Year to View Details:</label>
                        <input type="range" id="year-slider" class="year-slider" 
                               min="1" max="30" value="15" 
                               oninput="updateYearDetails(this.value)">
                    </div>

                    <!-- Chart Container -->
                    <div class="chart-container">
                        <canvas id="mortgage-timeline-chart" aria-label="Mortgage balance over time chart"></canvas>
                    </div>

                    <!-- Year Details -->
                    <div class="year-details colorful" id="year-details">
                        <h4 class="year-title">Year 15</h4>
                        <div class="details-grid">
                            <div class="detail-item principal-paid">
                                <div class="detail-icon">
                                    <i class="fas fa-home" aria-hidden="true"></i>
                                </div>
                                <div class="detail-content">
                                    <span class="detail-label">Principal Paid</span>
                                    <span class="detail-value" id="principal-paid-display">$125,000</span>
                                </div>
                            </div>
                            <div class="detail-item interest-paid">
                                <div class="detail-icon">
                                    <i class="fas fa-percentage" aria-hidden="true"></i>
                                </div>
                                <div class="detail-content">
                                    <span class="detail-label">Interest Paid</span>
                                    <span class="detail-value" id="interest-paid-display">$200,000</span>
                                </div>
                            </div>
                            <div class="detail-item remaining-balance">
                                <div class="detail-icon">
                                    <i class="fas fa-balance-scale" aria-hidden="true"></i>
                                </div>
                                <div class="detail-content">
                                    <span class="detail-label">Remaining Balance</span>
                                    <span class="detail-value" id="remaining-balance-display">$195,000</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AI-Powered Insights -->
                <div class="ai-insights-section" id="insights">
                    <h3 class="insights-title">
                        <i class="fas fa-brain insights-icon" aria-hidden="true"></i>
                        AI-Powered Insights
                        <span class="ai-badge">AI Powered</span>
                    </h3>
                    <div class="insights-container" id="ai-insights-container">
                        <!-- Insights will be dynamically generated -->
                        <div class="insight-card savings">
                            <div class="insight-icon">
                                <i class="fas fa-piggy-bank" aria-hidden="true"></i>
                            </div>
                            <div class="insight-content">
                                <h4 class="insight-title">Smart Savings Opportunity</h4>
                                <p class="insight-text">Adding just $100 extra monthly payment could save you $45,000 in interest and pay off your loan 4.2 years earlier!</p>
                            </div>
                        </div>
                        
                        <div class="insight-card rate">
                            <div class="insight-icon">
                                <i class="fas fa-chart-line" aria-hidden="true"></i>
                            </div>
                            <div class="insight-content">
                                <h4 class="insight-title">Rate Optimization</h4>
                                <p class="insight-text">Your current rate is competitive! With excellent credit, you could potentially qualify for 0.25% lower rates with different lenders.</p>
                            </div>
                        </div>
                        
                        <div class="insight-card downpayment">
                            <div class="insight-icon">
                                <i class="fas fa-home" aria-hidden="true"></i>
                            </div>
                            <div class="insight-content">
                                <h4 class="insight-title">Down Payment Analysis</h4>
                                <p class="insight-text">Your 20% down payment eliminates PMI, saving $225/month. Great choice for building equity faster!</p>
                            </div>
                        </div>
                        
                        <div class="insight-card market">
                            <div class="insight-icon">
                                <i class="fas fa-trending-up" aria-hidden="true"></i>
                            </div>
                            <div class="insight-content">
                                <h4 class="insight-title">Market Insights</h4>
                                <p class="insight-text">Property values in your area have increased 8.2% this year. Your investment timing looks favorable for long-term appreciation.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Payment Schedule -->
                <div class="payment-schedule-section" id="schedule">
                    <div class="schedule-title">
                        <h3>
                            <i class="fas fa-table schedule-icon" aria-hidden="true"></i>
                            Payment Schedule
                        </h3>
                        <div class="schedule-options">
                            <button type="button" class="schedule-btn active" data-schedule="monthly" 
                                    onclick="toggleScheduleType('monthly')">Monthly</button>
                            <button type="button" class="schedule-btn" data-schedule="yearly" 
                                    onclick="toggleScheduleType('yearly')">Yearly</button>
                            <button type="button" class="export-btn" onclick="exportScheduleCSV()">
                                <i class="fas fa-download" aria-hidden="true"></i>
                                Export CSV
                            </button>
                        </div>
                    </div>
                    
                    <div class="schedule-container">
                        <div class="schedule-table-wrapper">
                            <table class="schedule-table" id="payment-schedule-table">
                                <thead>
                                    <tr>
                                        <th>Payment</th>
                                        <th>Date</th>
                                        <th>Payment</th>
                                        <th>Principal</th>
                                        <th>Interest</th>
                                        <th>Balance</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="6" class="schedule-loading">Auto-calculating payment schedule...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Pagination -->
                        <div class="schedule-pagination" id="schedule-pagination">
                            <button type="button" class="pagination-btn" id="prev-page" onclick="changePage(-1)">
                                <i class="fas fa-chevron-left" aria-hidden="true"></i>
                                Previous
                            </button>
                            <span class="pagination-info" id="pagination-info">
                                Payments 1-6 of 360
                            </span>
                            <button type="button" class="pagination-btn" id="next-page" onclick="changePage(1)">
                                Next
                                <i class="fas fa-chevron-right" aria-hidden="true"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </main>

            <!-- Right Section (30%) - Sidebar/Ads -->
            <aside class="sidebar-section" role="complementary" aria-labelledby="sidebar-title">
                <div class="section-header">
                    <h2 id="sidebar-title" class="section-title">
                        <i class="fas fa-handshake section-icon" aria-hidden="true"></i>
                        Our Partners
                    </h2>
                    <p class="section-subtitle">Trusted financial partners and tools</p>
                </div>

                <!-- Advertising/Sponsor Section -->
                <div class="ad-section">
                    <div class="ad-slot primary">
                        <div class="ad-label">Featured Partner</div>
                        <div class="ad-content">
                            <h3>Get Pre-Approved Today</h3>
                            <p>Connect with top-rated lenders in your area</p>
                            <button class="ad-cta">Learn More</button>
                        </div>
                    </div>
                    
                    <div class="ad-slot secondary">
                        <div class="ad-label">Recommended Tool</div>
                        <div class="ad-content">
                            <h3>Home Insurance Calculator</h3>
                            <p>Find the best coverage for your new home</p>
                            <button class="ad-cta">Calculate</button>
                        </div>
                    </div>
                    
                    <div class="ad-slot tertiary">
                        <div class="ad-label">Partner Offer</div>
                        <div class="ad-content">
                            <h3>Real Estate Agent Network</h3>
                            <p>Connect with local professionals</p>
                            <button class="ad-cta">Find Agent</button>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="quick-actions">
                    <h3>Quick Actions</h3>
                    <button type="button" class="action-btn" onclick="exportToPDF()">
                        <i class="fas fa-file-pdf" aria-hidden="true"></i>
                        Export Report
                    </button>
                    <button type="button" class="action-btn" onclick="shareCalculation()">
                        <i class="fas fa-share-alt" aria-hidden="true"></i>
                        Share Results
                    </button>
                    <button type="button" class="action-btn" onclick="saveCalculation()">
                        <i class="fas fa-save" aria-hidden="true"></i>
                        Save Calculation
                    </button>
                </div>
            </aside>
        </div>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>FinGuid</h3>
                <p>World's First AI-Powered Financial Calculators</p>
                <div class="footer-social">
                    <a href="#" aria-label="Follow us on Twitter">
                        <i class="fab fa-twitter" aria-hidden="true"></i>
                    </a>
                    <a href="#" aria-label="Follow us on Facebook">
                        <i class="fab fa-facebook" aria-hidden="true"></i>
                    </a>
                    <a href="#" aria-label="Follow us on LinkedIn">
                        <i class="fab fa-linkedin" aria-hidden="true"></i>
                    </a>
                </div>
            </div>
            <div class="footer-section">
                <h4>Calculators</h4>
                <ul>
                    <li><a href="https://finguid.com/mortgage-calculator">Mortgage Calculator</a></li>
                    <li><a href="#">Auto Loan Calculator</a></li>
                    <li><a href="#">Investment Calculator</a></li>
                    <li><a href="#">Retirement Calculator</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Resources</h4>
                <ul>
                    <li><a href="#">Home Buying Guide</a></li>
                    <li><a href="#">Rate Trends</a></li>
                    <li><a href="#">Financial Tips</a></li>
                    <li><a href="#">API Documentation</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Legal</h4>
                <ul>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms of Service</a></li>
                    <li><a href="#">Disclaimer</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 FinGuid. All rights reserved. | Made with ‚ù§Ô∏è for American homebuyers</p>
        </div>
    </footer>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container" aria-live="polite"></div>

    <!-- Voice Status -->
    <div id="voice-status" class="voice-status" aria-hidden="true">
        <div class="voice-animation">
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
        </div>
        <span class="voice-text">Listening...</span>
    </div>

    <!-- Loading Indicator -->
    <div id="loading-indicator" class="loading-indicator" aria-hidden="true">
        <div class="loading-spinner"></div>
        <span class="loading-text">Loading...</span>
    </div>

    <!-- Screen Reader Live Region -->
    <div id="screen-reader-announcements" class="sr-only" aria-live="polite" aria-atomic="true"></div>

    <!-- Main JavaScript -->
    <script src="mortgage-calculator-2.js"></script>
    
    <!-- Initialize Application -->
    <script>
        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ FinGuid Mortgage Calculator v25.0 Loading...');
            initializeMortgageCalculator();
        });

        // Initialize hero animation
        document.addEventListener('DOMContentLoaded', function() {
            initializeHeroAnimation();
        });

        // Service Worker Registration (for PWA)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js').then(function(registration) {
                    console.log('SW registered: ', registration);
                }, function(registrationError) {
                    console.log('SW registration failed: ', registrationError);
                });
            });
        }
    </script>
</body>
</html>
