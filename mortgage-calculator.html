<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinGuid - World's #1 AI-Enhanced Mortgage Calculator</title>
    <meta name="description" content="Calculate your mortgage payments with AI insights, voice control, and real-time market data. The most advanced mortgage calculator with personalized recommendations.">
    <meta name="keywords" content="mortgage calculator, AI mortgage, home loan calculator, mortgage payment, interest rate, PMI calculator">

    <!-- Preload critical resources -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;550;600;700&display=swap" as="style">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.min.js" as="script">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" as="script">

    <!-- External stylesheets -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;550;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="mortgage-calculator.css">

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "FinGuid Mortgage Calculator",
        "description": "AI-enhanced mortgage calculator with voice control and personalized insights",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0"
        }
    }
    </script>
</head>
<body>
    <!-- Skip link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Screen reader announcements -->
    <div id="sr-announcements" class="sr-only" aria-live="polite" aria-atomic="true"></div>

    <!-- Global Controls Header -->
    <header class="global-controls" role="banner">
        <div class="controls-container">
            <!-- Left Navigation -->
            <nav class="header-nav" role="navigation" aria-label="Main navigation">
                <a href="#" class="nav-link" aria-label="View calculator features">
                    <i class="fas fa-calculator" aria-hidden="true"></i>
                    <span>Calculator</span>
                </a>
                <a href="#" class="nav-link" aria-label="View market rates">
                    <i class="fas fa-chart-line" aria-hidden="true"></i>
                    <span>Rates</span>
                </a>
                <a href="#" class="nav-link" aria-label="Access learning resources">
                    <i class="fas fa-graduation-cap" aria-hidden="true"></i>
                    <span>Learn</span>
                </a>
            </nav>

            <!-- Center Brand -->
            <div class="header-brand">
                <a href="#" class="brand-link" aria-label="FinGuid Home">
                    <i class="fas fa-home" aria-hidden="true"></i>
                    <span>FinGuid</span>
                </a>
            </div>

            <!-- Right Accessibility Controls -->
            <div class="accessibility-controls" role="group" aria-label="Accessibility and theme controls">
                <div class="font-size-controls" role="group" aria-label="Font size controls">
                    <button id="font-decrease" class="control-btn" aria-label="Decrease font size" title="Decrease font size">
                        <i class="fas fa-minus" aria-hidden="true"></i>
                        <span>A-</span>
                    </button>
                    <button id="font-increase" class="control-btn" aria-label="Increase font size" title="Increase font size">
                        <i class="fas fa-plus" aria-hidden="true"></i>
                        <span>A+</span>
                    </button>
                </div>
                <button id="theme-toggle" class="control-btn" aria-label="Toggle dark mode" title="Toggle theme">
                    <i class="fas fa-moon" aria-hidden="true"></i>
                    <span>Theme</span>
                </button>
                <button id="voice-toggle" class="control-btn" aria-label="Toggle voice control" title="Voice control">
                    <i class="fas fa-microphone" aria-hidden="true"></i>
                    <span>Voice</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content">
        <!-- Hero Section - Reduced height to 80% -->
        <section class="hero-section" role="banner">
            <div class="hero-background" aria-hidden="true">
                <div class="hero-gradient"></div>
                <div class="hero-pattern"></div>
            </div>

            <div class="header-content">
                <div class="title-container">
                    <div class="ai-badge-container">
                        <div class="ai-badge" role="img" aria-label="AI Powered Calculator">
                            <i class="fas fa-robot ai-pulse" aria-hidden="true"></i>
                            <span class="ai-text">AI</span>
                        </div>
                    </div>
                    <div class="title-text">
                        <h1 class="title-main">Mortgage Calculator</h1>
                        <span class="title-subtitle">AI-Enhanced & Voice-Controlled</span>
                    </div>
                </div>

                <p class="header-description">
                    Get instant mortgage calculations with AI-powered insights, voice control, and personalized recommendations. 
                    The most advanced mortgage calculator with real-time market data and accessibility features.
                </p>

                <!-- Hero Statistics -->
                <div class="header-stats-section">
                    <div class="stats-container">
                        <div class="stat-item">
                            <div class="stat-icon">
                                <i class="fas fa-users" aria-hidden="true"></i>
                            </div>
                            <div class="stat-content">
                                <span class="stat-number" data-target="2500000">2.5M+</span>
                                <span class="stat-label">Users Trust FinGuid</span>
                                <div class="live-indicator">
                                    <i class="fas fa-circle" aria-hidden="true"></i>
                                    <span>Live Data</span>
                                </div>
                            </div>
                        </div>

                        <div class="stat-item">
                            <div class="stat-icon">
                                <i class="fas fa-calculator" aria-hidden="true"></i>
                            </div>
                            <div class="stat-content">
                                <span class="stat-number" data-target="15000000">15M+</span>
                                <span class="stat-label">Calculations Completed</span>
                                <div class="live-indicator">
                                    <i class="fas fa-circle" aria-hidden="true"></i>
                                    <span>Updated Daily</span>
                                </div>
                            </div>
                        </div>

                        <div class="stat-item">
                            <div class="stat-icon">
                                <i class="fas fa-piggy-bank" aria-hidden="true"></i>
                            </div>
                            <div class="stat-content">
                                <span class="stat-number" data-target="890000000">$890M+</span>
                                <span class="stat-label">Savings Identified</span>
                                <div class="live-indicator">
                                    <i class="fas fa-circle" aria-hidden="true"></i>
                                    <span>AI Powered</span>
                                </div>
                            </div>
                        </div>

                        <div class="stat-item">
                            <div class="stat-icon">
                                <i class="fas fa-shield-alt" aria-hidden="true"></i>
                            </div>
                            <div class="stat-content">
                                <span class="stat-number">99.9%</span>
                                <span class="stat-label">Accuracy Guaranteed</span>
                                <div class="live-indicator">
                                    <i class="fas fa-circle" aria-hidden="true"></i>
                                    <span>Verified</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Hero Actions -->
                <div class="hero-actions">
                    <button class="hero-cta-btn" onclick="document.getElementById('home-price').focus()" aria-describedby="cta-description">
                        <i class="fas fa-calculator" aria-hidden="true"></i>
                        <span>Start Calculating</span>
                        <div class="btn-shine" aria-hidden="true"></div>
                    </button>
                    <a href="#ai-insights" class="hero-secondary-btn" aria-describedby="insights-description">
                        <i class="fas fa-lightbulb" aria-hidden="true"></i>
                        <span>See AI Insights</span>
                    </a>
                </div>
                <div class="sr-only">
                    <p id="cta-description">Click to focus on home price input and start your mortgage calculation</p>
                    <p id="insights-description">View AI-powered insights and recommendations</p>
                </div>
            </div>
        </section>

        <!-- Main Calculator Container -->
        <div class="calculator-container">
            <div class="calculator-grid">
                <!-- Left Column: Input Form -->
                <aside class="input-card card" role="complementary">
                    <header class="panel-header">
                        <h2>
                            <i class="fas fa-edit" aria-hidden="true"></i>
                            Loan Details
                        </h2>
                        <div class="header-actions">
                            <button id="reset-form" class="btn btn--ghost btn--sm" aria-label="Reset all form values">
                                <i class="fas fa-undo" aria-hidden="true"></i>
                                Reset
                            </button>
                        </div>
                    </header>

                    <form class="mortgage-form" role="form" aria-label="Mortgage calculation form">
                        <!-- Home Price Section -->
                        <fieldset class="form-section">
                            <legend>
                                <span class="section-number" aria-hidden="true">1</span>
                                <span>Home Details</span>
                                <i class="fas fa-home section-icon" aria-hidden="true"></i>
                            </legend>

                            <div class="form-group">
                                <label for="home-price" class="form-label">
                                    Home Price <span class="required" aria-label="required">*</span>
                                </label>
                                <div class="input-with-prefix">
                                    <span class="input-prefix" aria-hidden="true">$</span>
                                    <input 
                                        type="text" 
                                        id="home-price" 
                                        name="homePrice" 
                                        class="form-control" 
                                        value="400,000"
                                        required 
                                        aria-describedby="home-price-help"
                                        aria-label="Home purchase price in dollars"
                                    >
                                </div>
                                <div class="input-suggestions">
                                    <button type="button" class="suggestion-chip" data-input="home-price" data-value="300000" aria-label="Set home price to $300,000">$300k</button>
                                    <button type="button" class="suggestion-chip" data-input="home-price" data-value="500000" aria-label="Set home price to $500,000">$500k</button>
                                    <button type="button" class="suggestion-chip" data-input="home-price" data-value="750000" aria-label="Set home price to $750,000">$750k</button>
                                </div>
                                <small id="home-price-help" class="form-help">Enter the total purchase price of the home</small>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Property State</label>
                                <div class="select-wrapper">
                                    <select id="property-state" name="propertyState" class="form-control" aria-describedby="state-help">
                                        <option value="">Select your state</option>
                                        <!-- States populated by JavaScript -->
                                    </select>
                                    <i class="fas fa-chevron-down select-icon" aria-hidden="true"></i>
                                </div>
                                <small id="state-help" class="form-help">Used to estimate property tax and insurance costs</small>
                            </div>
                        </fieldset>

                        <!-- Down Payment Section -->
                        <fieldset class="form-section">
                            <legend>
                                <span class="section-number" aria-hidden="true">2</span>
                                <span>Down Payment</span>
                                <i class="fas fa-hand-holding-usd section-icon" aria-hidden="true"></i>
                            </legend>

                            <div class="toggle-group" role="radiogroup" aria-labelledby="down-payment-mode">
                                <button type="button" id="amount-toggle" class="toggle-btn active" role="radio" aria-checked="true" aria-describedby="amount-description">
                                    Dollar Amount
                                </button>
                                <button type="button" id="percent-toggle" class="toggle-btn" role="radio" aria-checked="false" aria-describedby="percent-description">
                                    Percentage
                                </button>
                            </div>
                            <div class="sr-only">
                                <p id="amount-description">Enter down payment as a dollar amount</p>
                                <p id="percent-description">Enter down payment as a percentage of home price</p>
                            </div>

                            <div id="amount-input" class="form-group">
                                <label for="down-payment" class="form-label">
                                    Down Payment Amount
                                </label>
                                <div class="input-with-prefix">
                                    <span class="input-prefix" aria-hidden="true">$</span>
                                    <input 
                                        type="text" 
                                        id="down-payment" 
                                        name="downPayment" 
                                        class="form-control" 
                                        value="80,000"
                                        aria-describedby="down-payment-help"
                                        aria-label="Down payment amount in dollars"
                                    >
                                </div>
                                <div class="input-suggestions">
                                    <button type="button" class="suggestion-chip" data-input="down-payment" data-value="50000" aria-label="Set down payment to $50,000">$50k</button>
                                    <button type="button" class="suggestion-chip" data-input="down-payment" data-value="100000" aria-label="Set down payment to $100,000">$100k</button>
                                    <button type="button" class="suggestion-chip" data-input="down-payment" data-value="150000" aria-label="Set down payment to $150,000">$150k</button>
                                </div>
                            </div>

                            <div id="percent-input" class="form-group" style="display: none;">
                                <label for="down-payment-percent" class="form-label">
                                    Down Payment Percentage
                                </label>
                                <div class="input-with-suffix">
                                    <input 
                                        type="text" 
                                        id="down-payment-percent" 
                                        name="downPaymentPercent" 
                                        class="form-control" 
                                        value="20"
                                        aria-describedby="down-payment-percent-help"
                                        aria-label="Down payment percentage"
                                    >
                                    <span class="input-suffix" aria-hidden="true">%</span>
                                </div>
                                <div class="input-suggestions">
                                    <button type="button" class="suggestion-chip" data-input="down-payment-percent" data-value="5" aria-label="Set down payment to 5%">5%</button>
                                    <button type="button" class="suggestion-chip" data-input="down-payment-percent" data-value="10" aria-label="Set down payment to 10%">10%</button>
                                    <button type="button" class="suggestion-chip" data-input="down-payment-percent" data-value="20" aria-label="Set down payment to 20%">20%</button>
                                </div>
                            </div>

                            <small class="form-help">Minimum 3-5% for conventional loans, 3.5% for FHA</small>
                        </fieldset>

                        <!-- Loan Terms Section -->
                        <fieldset class="form-section">
                            <legend>
                                <span class="section-number" aria-hidden="true">3</span>
                                <span>Loan Terms</span>
                                <i class="fas fa-percent section-icon" aria-hidden="true"></i>
                            </legend>

                            <div class="form-group">
                                <label for="interest-rate" class="form-label">
                                    Interest Rate <span class="required" aria-label="required">*</span>
                                </label>
                                <div class="input-with-suffix">
                                    <input 
                                        type="text" 
                                        id="interest-rate" 
                                        name="interestRate" 
                                        class="form-control" 
                                        value="6.43"
                                        required
                                        aria-describedby="interest-rate-help rate-status"
                                        aria-label="Annual interest rate percentage"
                                    >
                                    <span class="input-suffix" aria-hidden="true">%</span>
                                </div>
                                <div class="rate-status rate-high" id="rate-status" role="status" aria-live="polite">
                                    Slightly above market average
                                </div>
                                <small id="interest-rate-help" class="form-help">Current market rates updated Sep 30, 2025</small>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Loan Term</label>
                                <div class="term-chips" role="radiogroup" aria-labelledby="loan-term-label">
                                    <button type="button" class="term-chip" data-term="15" role="radio" aria-checked="false">15 Years</button>
                                    <button type="button" class="term-chip active" data-term="30" role="radio" aria-checked="true">30 Years</button>
                                    <button type="button" class="term-chip" data-term="40" role="radio" aria-checked="false">40 Years</button>
                                </div>
                                <input type="hidden" id="loan-term" name="loanTerm" value="30">
                                <input 
                                    type="text" 
                                    id="custom-term" 
                                    name="customTerm" 
                                    class="form-control" 
                                    placeholder="Custom term (years)"
                                    aria-label="Custom loan term in years"
                                    style="margin-top: 8px;"
                                >
                                <small class="form-help">Choose a standard term or enter a custom term</small>
                            </div>
                        </fieldset>

                        <!-- Property Costs Section -->
                        <fieldset class="form-section">
                            <legend>
                                <span class="section-number" aria-hidden="true">4</span>
                                <span>Property Costs</span>
                                <i class="fas fa-home section-icon" aria-hidden="true"></i>
                            </legend>

                            <div class="form-group">
                                <label for="property-tax" class="form-label">Annual Property Tax</label>
                                <div class="input-with-prefix">
                                    <span class="input-prefix" aria-hidden="true">$</span>
                                    <input 
                                        type="text" 
                                        id="property-tax" 
                                        name="propertyTax" 
                                        class="form-control" 
                                        value="7,240"
                                        aria-describedby="tax-help"
                                        aria-label="Annual property tax in dollars"
                                    >
                                </div>
                                <small id="tax-help" class="form-help">Select your state above for estimated property tax</small>
                            </div>

                            <div class="form-group">
                                <label for="home-insurance" class="form-label">Annual Home Insurance</label>
                                <div class="input-with-prefix">
                                    <span class="input-prefix" aria-hidden="true">$</span>
                                    <input 
                                        type="text" 
                                        id="home-insurance" 
                                        name="homeInsurance" 
                                        class="form-control" 
                                        value="1,600"
                                        aria-describedby="insurance-help"
                                        aria-label="Annual home insurance in dollars"
                                    >
                                </div>
                                <small id="insurance-help" class="form-help">Covers property damage and liability</small>
                            </div>

                            <div class="form-group">
                                <label for="pmi" class="form-label">PMI (Private Mortgage Insurance)</label>
                                <div class="input-with-prefix">
                                    <span class="input-prefix" aria-hidden="true">$</span>
                                    <input 
                                        type="text" 
                                        id="pmi" 
                                        name="pmi" 
                                        class="form-control" 
                                        value="0" 
                                        readonly
                                        aria-describedby="pmi-help pmi-percentage"
                                        aria-label="Monthly PMI amount in dollars"
                                    >
                                </div>
                                <div id="pmi-percentage" class="pmi-percentage">
                                    <small>PMI Rate: <span id="pmi-percentage-display">0%</span> annually</small>
                                    <small style="display: block; margin-top: 4px; color: var(--color-text-secondary);">
                                        Typical range: 0.2% - 1.5% of loan amount
                                    </small>
                                </div>
                                <div id="pmi-warning" class="pmi-warning" style="display: none;">
                                    <i class="fas fa-exclamation-triangle" aria-hidden="true"></i>
                                    <span>PMI required for down payments less than 20%</span>
                                </div>
                                <small id="pmi-help" class="form-help">Auto-calculated based on your down payment. Required if down payment is less than 20%</small>
                            </div>
                        </fieldset>

                        <!-- Extra Payments Section -->
                        <details class="advanced-options">
                            <summary class="advanced-summary" aria-expanded="false">
                                <span>
                                    <i class="fas fa-plus-circle" aria-hidden="true"></i>
                                    Extra Payments (Optional)
                                </span>
                                <i class="fas fa-chevron-down expand-icon" aria-hidden="true"></i>
                            </summary>

                            <div class="advanced-content">
                                <fieldset class="form-section">
                                    <legend class="sr-only">Extra Payments Configuration</legend>

                                    <div class="form-group">
                                        <label for="extra-monthly" class="form-label">Extra Payment Amount</label>

                                        <!-- Payment Frequency Toggle -->
                                        <div class="toggle-group" role="radiogroup" aria-labelledby="payment-frequency-label">
                                            <button type="button" id="monthly-toggle" class="toggle-btn active" role="radio" aria-checked="true">
                                                Monthly
                                            </button>
                                            <button type="button" id="weekly-toggle" class="toggle-btn" role="radio" aria-checked="false">
                                                Weekly
                                            </button>
                                        </div>
                                        <div class="sr-only" id="payment-frequency-label">Extra payment frequency</div>

                                        <div class="input-with-prefix">
                                            <span class="input-prefix" aria-hidden="true">$</span>
                                            <input 
                                                type="text" 
                                                id="extra-monthly" 
                                                name="extraMonthly" 
                                                class="form-control" 
                                                value="0"
                                                aria-describedby="extra-help"
                                                aria-label="Extra payment amount"
                                            >
                                        </div>
                                        <div class="input-suggestions">
                                            <button type="button" class="suggestion-chip" data-input="extra-monthly" data-value="100" aria-label="Set extra payment to $100">$100</button>
                                            <button type="button" class="suggestion-chip" data-input="extra-monthly" data-value="200" aria-label="Set extra payment to $200">$200</button>
                                            <button type="button" class="suggestion-chip" data-input="extra-monthly" data-value="500" aria-label="Set extra payment to $500">$500</button>
                                        </div>
                                        <small id="extra-help" class="form-help">Additional amount paid toward principal</small>
                                    </div>

                                    <div class="form-group">
                                        <label for="extra-onetime" class="form-label">One-time Extra Payment (Year 1)</label>
                                        <div class="input-with-prefix">
                                            <span class="input-prefix" aria-hidden="true">$</span>
                                            <input 
                                                type="text" 
                                                id="extra-onetime" 
                                                name="extraOnetime" 
                                                class="form-control" 
                                                value="0"
                                                aria-describedby="onetime-help"
                                                aria-label="One-time extra payment amount"
                                            >
                                        </div>
                                        <small id="onetime-help" class="form-help">Extra payment applied in the first year (e.g., tax refund, bonus)</small>
                                    </div>

                                    <div id="savings-preview" class="savings-preview">
                                        Add extra payments to see potential savings
                                    </div>
                                </fieldset>
                            </div>
                        </details>

                        <!-- Form Actions -->
                        <div class="form-actions">
                            <button type="button" id="calculate-btn" class="btn btn--primary btn--large btn--full" aria-describedby="calculate-description">
                                <i class="fas fa-calculator" aria-hidden="true"></i>
                                Calculate Payment
                            </button>
                            <div class="sr-only">
                                <p id="calculate-description">Calculate your mortgage payment and view detailed breakdown</p>
                            </div>
                        </div>
                    </form>
                </aside>

                <!-- Middle Column: Results -->
                <section class="results-card card" role="main">
                    <!-- Payment Highlight -->
                    <div class="total-payment-highlight">
                        <div class="payment-header">
                            <h2 class="payment-label">Monthly Payment</h2>
                            <button class="payment-info" aria-label="Payment information and breakdown details" title="View payment details">
                                <i class="fas fa-info" aria-hidden="true"></i>
                            </button>
                        </div>
                        <div id="total-payment" class="payment-amount" role="status" aria-live="polite">$2,506</div>
                        <div class="payment-change" role="status" aria-live="polite">
                            <i class="fas fa-calendar-alt" aria-hidden="true"></i>
                            <span>Rates updated Sep 30, 2025</span>
                        </div>
                    </div>

                    <!-- Tabbed Results Section -->
                    <div class="tabbed-section">
                        <!-- Tab Controls -->
                        <div class="tab-controls" role="tablist" aria-label="Mortgage calculation results">
                            <button class="tab-btn active" role="tab" aria-selected="true" aria-controls="payment-breakdown-tab" id="payment-breakdown-btn" data-tab="payment-breakdown">
                                <i class="fas fa-chart-pie" aria-hidden="true"></i>
                                Payment Breakdown
                            </button>
                            <button class="tab-btn" role="tab" aria-selected="false" aria-controls="mortgage-chart-tab" id="mortgage-chart-btn" data-tab="mortgage-chart">
                                <i class="fas fa-chart-line" aria-hidden="true"></i>
                                Mortgage Over Time
                            </button>
                            <button class="tab-btn" role="tab" aria-selected="false" aria-controls="ai-insights-tab" id="ai-insights-btn" data-tab="ai-insights">
                                <i class="fas fa-lightbulb" aria-hidden="true"></i>
                                AI Insights
                            </button>
                            <button class="tab-btn" role="tab" aria-selected="false" aria-controls="amortization-tab" id="amortization-btn" data-tab="amortization">
                                <i class="fas fa-table" aria-hidden="true"></i>
                                Amortization
                            </button>
                        </div>

                        <!-- Tab Content: Payment Breakdown (Default) -->
                        <div id="payment-breakdown-tab" class="tab-content active" role="tabpanel" aria-labelledby="payment-breakdown-btn">
                            <div class="payment-breakdown">
                                <h3 class="breakdown-title">Payment Breakdown</h3>

                                <div class="breakdown-list">
                                    <div class="breakdown-item">
                                        <div class="breakdown-label">
                                            <i class="fas fa-home" aria-hidden="true"></i>
                                            Principal & Interest
                                        </div>
                                        <div id="principal-interest" class="breakdown-value">$2,045</div>
                                        <div id="pi-fill" class="breakdown-bar">
                                            <div class="breakdown-fill"></div>
                                        </div>
                                    </div>

                                    <div class="breakdown-item">
                                        <div class="breakdown-label">
                                            <i class="fas fa-landmark" aria-hidden="true"></i>
                                            Property Tax
                                        </div>
                                        <div id="monthly-tax" class="breakdown-value">$603</div>
                                        <div id="tax-fill" class="breakdown-bar">
                                            <div class="breakdown-fill"></div>
                                        </div>
                                    </div>

                                    <div class="breakdown-item">
                                        <div class="breakdown-label">
                                            <i class="fas fa-shield-alt" aria-hidden="true"></i>
                                            Home Insurance
                                        </div>
                                        <div id="monthly-insurance" class="breakdown-value">$133</div>
                                        <div id="insurance-fill" class="breakdown-bar">
                                            <div class="breakdown-fill"></div>
                                        </div>
                                    </div>

                                    <div class="breakdown-item">
                                        <div class="breakdown-label">
                                            <i class="fas fa-umbrella" aria-hidden="true"></i>
                                            PMI
                                        </div>
                                        <div id="monthly-pmi" class="breakdown-value">$0</div>
                                        <div id="pmi-fill" class="breakdown-bar">
                                            <div class="breakdown-fill"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Loan Summary -->
                            <div class="loan-summary-section">
                                <div class="summary-grid">
                                    <div class="summary-item">
                                        <div class="summary-label">Loan Amount</div>
                                        <div id="display-loan-amount" class="summary-value">$320,000</div>
                                    </div>
                                    <div class="summary-item">
                                        <div class="summary-label">Total Interest</div>
                                        <div id="display-total-interest" class="summary-value">$416,200</div>
                                    </div>
                                    <div class="summary-item">
                                        <div class="summary-label">Total Cost</div>
                                        <div id="display-total-cost" class="summary-value">$736,200</div>
                                    </div>
                                    <div class="summary-item">
                                        <div class="summary-label">Payoff Date</div>
                                        <div id="display-payoff-date" class="summary-value">Sep 2055</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Tab Content: Mortgage Over Time Chart -->
                        <div id="mortgage-chart-tab" class="tab-content" role="tabpanel" aria-labelledby="mortgage-chart-btn">
                            <div class="chart-header">
                                <h4>Mortgage Balance Over Time</h4>
                                <p id="chart-loan-amount">Based on a $320,000 mortgage</p>
                            </div>

                            <div class="chart-controls">
                                <label for="year-range" class="slider-label">Interactive Year Slider</label>
                                <input 
                                    type="range" 
                                    id="year-range" 
                                    class="year-slider" 
                                    min="1" 
                                    max="30" 
                                    value="1"
                                    aria-describedby="year-details"
                                    aria-label="Select year to view mortgage details"
                                >
                                <div class="year-details">
                                    <span id="year-label" class="current-year">Year 1</span>
                                    <span id="year-details" role="status" aria-live="polite">Viewing Year 1 details</span>
                                </div>
                            </div>

                            <div class="chart-container">
                                <canvas id="mortgage-timeline-chart" role="img" aria-label="Mortgage balance over time chart"></canvas>
                            </div>

                            <div class="chart-legend-values">
                                <div class="legend-item">
                                    <div class="legend-color" style="background-color: var(--chart-balance);" aria-hidden="true"></div>
                                    <span class="legend-label">Remaining Balance</span>
                                    <span id="remaining-balance" class="legend-value">$312,000</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-color" style="background-color: var(--chart-principal);" aria-hidden="true"></div>
                                    <span class="legend-label">Principal Paid</span>
                                    <span id="principal-paid" class="legend-value">$8,000</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-color" style="background-color: var(--chart-interest);" aria-hidden="true"></div>
                                    <span class="legend-label">Interest Paid</span>
                                    <span id="interest-paid" class="legend-value">$20,200</span>
                                </div>
                            </div>
                        </div>

                        <!-- Tab Content: AI-Powered Insights -->
                        <div id="ai-insights-tab" class="tab-content" role="tabpanel" aria-labelledby="ai-insights-btn">
                            <div class="insights-header">
                                <h4>
                                    <i class="fas fa-robot" aria-hidden="true"></i>
                                    AI-Powered Insights
                                </h4>
                                <span class="ai-badge">
                                    <i class="fas fa-magic" aria-hidden="true"></i>
                                    AI Powered
                                </span>
                            </div>

                            <div id="ai-insights" class="insights-list">
                                <div class="insight-item success">
                                    <i class="fas fa-check-circle insight-icon" aria-hidden="true"></i>
                                    <div class="insight-content">
                                        <h5>Great Down Payment!</h5>
                                        <p>Your 20% down payment eliminates PMI, saving you money each month and showing lenders you're a lower-risk borrower.</p>
                                    </div>
                                </div>

                                <div class="insight-item info">
                                    <i class="fas fa-lightbulb insight-icon" aria-hidden="true"></i>
                                    <div class="insight-content">
                                        <h5>Consider Extra Payments</h5>
                                        <p>Adding just $200/month extra could save you over $89,000 in interest and pay off your loan 8 years early.</p>
                                    </div>
                                </div>

                                <div class="insight-item warning">
                                    <i class="fas fa-search insight-icon" aria-hidden="true"></i>
                                    <div class="insight-content">
                                        <h5>Rate Shopping Opportunity</h5>
                                        <p>Your current rate is slightly above market average. Shopping with 3-5 lenders could potentially save you 0.25-0.5%.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Tab Content: Amortization Schedule -->
                        <div id="amortization-tab" class="tab-content" role="tabpanel" aria-labelledby="amortization-btn">
                            <div class="table-container">
                                <table class="amortization-table" role="table" aria-label="Loan amortization schedule">
                                    <thead>
                                        <tr>
                                            <th scope="col">Payment #</th>
                                            <th scope="col">Date</th>
                                            <th scope="col">Payment</th>
                                            <th scope="col">Principal</th>
                                            <th scope="col">Interest</th>
                                            <th scope="col">Balance</th>
                                        </tr>
                                    </thead>
                                    <tbody id="amortization-table-body">
                                        <tr>
                                            <td colspan="6" class="empty-state">Calculate to view payment schedule</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div class="table-pagination">
                                <div class="pagination-info" role="status" aria-live="polite">
                                    <span id="pagination-text">Page 1 of 1</span>
                                </div>
                                <div class="pagination-controls">
                                    <button id="prev-page" class="btn btn--ghost btn--sm" disabled aria-label="Previous page">
                                        <i class="fas fa-chevron-left" aria-hidden="true"></i>
                                        Previous
                                    </button>
                                    <button id="next-page" class="btn btn--ghost btn--sm" disabled aria-label="Next page">
                                        Next
                                        <i class="fas fa-chevron-right" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Universal Share/Export Section -->
                        <div class="sharing-section">
                            <div class="share-actions">
                                <button id="share-url" class="btn btn--secondary" aria-label="Share calculation via URL">
                                    <i class="fas fa-share-alt" aria-hidden="true"></i>
                                    Share
                                </button>
                                <button id="export-pdf" class="btn btn--secondary" aria-label="Export all results to PDF">
                                    <i class="fas fa-file-pdf" aria-hidden="true"></i>
                                    Export PDF
                                </button>
                                <button id="print-results" class="btn btn--secondary" aria-label="Print all results">
                                    <i class="fas fa-print" aria-hidden="true"></i>
                                    Print
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Right Column: Sponsor & Market Data -->
                <aside class="calculator-sponsor-column" role="complementary">
                    <!-- Sponsor Card -->
                    <div class="sponsor-card card">
                        <header class="panel-header">
                            <h3>
                                <i class="fas fa-handshake" aria-hidden="true"></i>
                                Trusted Lenders
                            </h3>
                        </header>

                        <div class="sponsor-content">
                            <div class="sponsor-item featured">
                                <div class="sponsor-logo">
                                    <i class="fas fa-university" aria-hidden="true"></i>
                                </div>
                                <h4>QuickenLoans</h4>
                                <p>America's largest mortgage lender. Get pre-approved in minutes with our digital process.</p>
                                <div class="sponsor-features">
                                    <div class="feature">
                                        <i class="fas fa-check" aria-hidden="true"></i>
                                        <span>Digital mortgage experience</span>
                                    </div>
                                    <div class="feature">
                                        <i class="fas fa-check" aria-hidden="true"></i>
                                        <span>Expert loan officers</span>
                                    </div>
                                    <div class="feature">
                                        <i class="fas fa-check" aria-hidden="true"></i>
                                        <span>Competitive rates</span>
                                    </div>
                                </div>
                                <button class="sponsor-btn primary" aria-label="Get started with QuickenLoans">
                                    <i class="fas fa-rocket" aria-hidden="true"></i>
                                    Get Started
                                </button>
                            </div>

                            <div class="sponsor-item">
                                <div class="sponsor-logo">
                                    <i class="fas fa-building" aria-hidden="true"></i>
                                </div>
                                <h4>Better Mortgage</h4>
                                <p>Get a mortgage in as little as 3 weeks. No hidden fees, competitive rates.</p>
                                <div class="sponsor-features">
                                    <div class="feature">
                                        <i class="fas fa-check" aria-hidden="true"></i>
                                        <span>No origination fees</span>
                                    </div>
                                    <div class="feature">
                                        <i class="fas fa-check" aria-hidden="true"></i>
                                        <span>Fast approval process</span>
                                    </div>
                                </div>
                                <button class="sponsor-btn" aria-label="Learn more about Better Mortgage">
                                    Learn More
                                    <i class="fas fa-arrow-right" aria-hidden="true"></i>
                                </button>
                            </div>

                            <div class="sponsor-item">
                                <div class="sponsor-logo">
                                    <i class="fas fa-home" aria-hidden="true"></i>
                                </div>
                                <h4>LoanDepot</h4>
                                <p>Streamlined digital mortgage process with personalized service from local experts.</p>
                                <div class="sponsor-features">
                                    <div class="feature">
                                        <i class="fas fa-check" aria-hidden="true"></i>
                                        <span>Local loan experts</span>
                                    </div>
                                    <div class="feature">
                                        <i class="fas fa-check" aria-hidden="true"></i>
                                        <span>Multiple loan programs</span>
                                    </div>
                                </div>
                                <button class="sponsor-btn" aria-label="Compare rates with LoanDepot">
                                    Compare Rates
                                    <i class="fas fa-chart-line" aria-hidden="true"></i>
                                </button>
                            </div>
                        </div>

                        <div class="sponsor-disclaimer">
                            <p>
                                <strong>Disclaimer:</strong> FinGuid may receive compensation from featured lenders. 
                                This does not influence our calculator results or recommendations. Always compare 
                                multiple lenders and read terms carefully.
                            </p>
                        </div>
                    </div>

                    <!-- Market Data Card -->
                    <div class="market-card card">
                        <header class="panel-header">
                            <h3>
                                <i class="fas fa-chart-line" aria-hidden="true"></i>
                                Market Rates
                            </h3>
                        </header>

                        <div class="market-content">
                            <div class="market-item">
                                <span class="market-label">30-Year Fixed</span>
                                <span class="market-rate">6.43%</span>
                                <div class="market-trend trend-up">
                                    <i class="fas fa-arrow-up" aria-hidden="true"></i>
                                    <span>+0.12%</span>
                                </div>
                            </div>

                            <div class="market-item">
                                <span class="market-label">15-Year Fixed</span>
                                <span class="market-rate">5.73%</span>
                                <div class="market-trend trend-up">
                                    <i class="fas fa-arrow-up" aria-hidden="true"></i>
                                    <span>+0.08%</span>
                                </div>
                            </div>

                            <div class="market-item">
                                <span class="market-label">5/1 ARM</span>
                                <span class="market-rate">5.90%</span>
                                <div class="market-trend trend-down">
                                    <i class="fas fa-arrow-down" aria-hidden="true"></i>
                                    <span>-0.05%</span>
                                </div>
                            </div>

                            <div class="market-item">
                                <span class="market-label">FHA 30-Year</span>
                                <span class="market-rate">6.44%</span>
                                <div class="market-trend trend-up">
                                    <i class="fas fa-arrow-up" aria-hidden="true"></i>
                                    <span>+0.15%</span>
                                </div>
                            </div>
                        </div>

                        <div class="market-update">
                            <small>
                                <i class="fas fa-clock" aria-hidden="true"></i>
                                Last updated: Sep 30, 2025 at 2:00 PM EST
                            </small>
                        </div>
                    </div>
                </aside>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="app-footer" role="contentinfo">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <i class="fas fa-home" aria-hidden="true"></i>
                        <span>FinGuid</span>
                    </div>
                    <p>
                        The world's most advanced mortgage calculator with AI insights, voice control, 
                        and real-time market data. Trusted by millions of homebuyers.
                    </p>
                    <div class="footer-social">
                        <a href="#" aria-label="Follow FinGuid on Twitter">
                            <i class="fab fa-twitter" aria-hidden="true"></i>
                        </a>
                        <a href="#" aria-label="Follow FinGuid on Facebook">
                            <i class="fab fa-facebook" aria-hidden="true"></i>
                        </a>
                        <a href="#" aria-label="Follow FinGuid on LinkedIn">
                            <i class="fab fa-linkedin" aria-hidden="true"></i>
                        </a>
                        <a href="#" aria-label="Follow FinGuid on YouTube">
                            <i class="fab fa-youtube" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>

                <div class="footer-section">
                    <h4>Calculators</h4>
                    <ul>
                        <li><a href="#">Mortgage Calculator</a></li>
                        <li><a href="#">Refinance Calculator</a></li>
                        <li><a href="#">Affordability Calculator</a></li>
                        <li><a href="#">PMI Calculator</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="#">Learning Center</a></li>
                        <li><a href="#">Market Reports</a></li>
                        <li><a href="#">Rate Trends</a></li>
                        <li><a href="#">Buyer's Guide</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Company</h4>
                    <ul>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Contact</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <div class="footer-copyright">
                    <p>
                         2025 FinGuid. All rights reserved. 
                        <span class="disclaimer">
                            Mortgage calculations are estimates. Actual terms may vary based on lender requirements and market conditions.
                        </span>
                    </p>
                </div>
                <div class="footer-badges">
                    <span class="badge">SSL Secured</span>
                    <span class="badge">Privacy Protected</span>
                    <span class="badge">GDPR Compliant</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container" aria-live="polite" aria-label="Notifications"></div>

    <!-- Voice Status -->
    <div id="voice-status" class="voice-status" style="display: none;" role="status" aria-live="polite">
        <div class="voice-wave" aria-hidden="true">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
        </div>
        <span id="voice-text">Listening...</span>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;" role="status" aria-label="Loading">
        <div class="spinner-container">
            <div class="spinner" aria-hidden="true"></div>
            <p>Calculating your mortgage...</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="mortgage-calculator.js"></script>
</body>
</html>
