<!-- mortgage-calculator.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>FinGuid Mortgage Calculator</title>
  <link rel="stylesheet" href="mortgage-calculator.css">
  <link rel="icon" type="image/png" href="https://www.finguid.com/favicon.ico">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700&display=swap" rel="stylesheet">
  <script defer src="mortgage-calculator.js"></script>
</head>
<body>

  <header class="fg-header">
    <div class="fg-header-left">
      <img src="https://www.finguid.com/logo.svg" alt="FinGuid Logo" class="fg-logo" />
      <nav class="fg-nav fg-nav-left" aria-label="Main navigation">
        <a href="/" class="fg-nav-link active">Home</a>
        <a href="/calculators" class="fg-nav-link">Calculators</a>
        <a href="/resources" class="fg-nav-link">Resources</a>
      </nav>
    </div>
    <nav class="fg-nav fg-nav-right" aria-label="Secondary navigation">
      <a href="/partners" class="fg-nav-link">Partners</a>
      <a href="/contact" class="fg-nav-link">Contact</a>
      <button id="voice-btn" class="fg-voice-btn" aria-label="Start voice input" tabindex="0" title="Enter loan information via voice">
        <span class="fg-voice-icon" aria-hidden="true"></span>Voice Input
      </button>
    </nav>
  </header>
  
  <main>
    <section class="calculator-container" aria-labelledby="calc-title">
      <h1 id="calc-title" class="calculator-title">Mortgage Calculator</h1>
      <form id="mortgage-form" autocomplete="off">
        <div class="fg-input-group">
          <label for="state" class="fg-label">
            State
            <span class="tooltip" tabindex="0" data-tooltip="Select your location to fetch current average rates.">?</span>
          </label>
          <select id="state" name="state" required aria-describedby="state-tooltip">
            <!-- dynamically populated by JS -->
          </select>
        </div>
        <div class="fg-input-group">
          <label for="amount" class="fg-label">
            Home Price
            <span class="tooltip" tabindex="0" data-tooltip="Total purchase price of the property.">?</span>
          </label>
          <input id="amount" name="amount" type="number" min="10000" max="10000000" step="1000" required placeholder="e.g., 400000">
        </div>
        <div class="fg-input-group">
          <label for="downpayment" class="fg-label">
            Down Payment
            <span class="tooltip" tabindex="0" data-tooltip="Amount paid upfront. At least 20% helps avoid mortgage insurance.">?</span>
          </label>
          <input id="downpayment" name="downpayment" type="number" min="0" max="10000000" step="1000" required placeholder="e.g., 40000">
        </div>
        <div class="fg-input-group">
          <label class="fg-label">
            Loan Term (years)
            <span class="tooltip" tabindex="0" data-tooltip="Choose a standard term or enter your own (5–40 years).">?</span>
          </label>
          <div class="term-select-group">
            <button type="button" class="term-btn" data-term="10">10</button>
            <button type="button" class="term-btn" data-term="15">15</button>
            <button type="button" class="term-btn" data-term="20">20</button>
            <button type="button" class="term-btn" data-term="30">30</button>
            <input id="term" name="term" type="number" min="5" max="40" class="term-custom-input" aria-label="Custom loan term in years" required placeholder="Or enter years">
          </div>
        </div>
        <div class="fg-input-group">
          <label for="rate" class="fg-label">
            Interest Rate (% APR)
            <span class="tooltip" tabindex="0" id="avg-rate-tooltip" data-tooltip="Current state average rate shown below. Adjust if your lender offers a different rate.">?</span>
          </label>
          <input id="rate" name="rate" type="number" min="0.1" max="20" step="0.01" required>
          <span id="avg-rate-display" class="rate-hint"></span>
        </div>
        <div class="fg-btn-group">
          <button type="submit" id="calculate-btn" class="fg-calc-btn">Calculate</button>
          <button type="reset" id="reset-btn" class="fg-reset-btn">Reset</button>
        </div>
      </form>

      <div id="calc-summaries" class="calc-summaries" style="display: none;">
        <div class="fg-summary-card">
          <div>
            <span class="summary-label">Monthly Payment</span>
            <span id="summary-monthly" class="summary-value"></span>
            <span class="tooltip" tabindex="0" data-tooltip="Principal & interest only; taxes, insurance, HOA not included.">?</span>
          </div>
          <div>
            <span class="summary-label">Total Interest Paid</span>
            <span id="summary-interest" class="summary-value"></span>
          </div>
          <div>
            <span class="summary-label">Total of Payments</span>
            <span id="summary-total" class="summary-value"></span>
          </div>
        </div>
      </div>

      <div id="amortization-schedule" class="amortization-section" style="display: none;">
        <h2 class="amortization-title">Amortization Schedule</h2>
        <div class="amort-tabs">
          <button type="button" class="amort-tab active" data-view="monthly" aria-controls="amort-table-monthly">Monthly (First 12 Months)</button>
          <button type="button" class="amort-tab" data-view="yearly" aria-controls="amort-table-yearly">Yearly Summary</button>
        </div>
        <div id="amort-table-monthly" class="amort-table" aria-live="polite"></div>
        <div id="amort-table-yearly" class="amort-table" aria-live="polite" style="display:none;"></div>
      </div>
    </section>
  </main>

  <footer class="fg-footer">
    <div class="footer-brand">
      <img src="https://www.finguid.com/logo-light.svg" alt="FinGuid Logo" class="footer-logo"/>
      <span>© 2025 FinGuid. All rights reserved.</span>
    </div>
    <nav class="footer-nav" aria-label="Footer navigation">
      <a href="/privacy" class="footer-link">Privacy</a>
      <a href="/terms" class="footer-link">Terms</a>
      <a href="/contact" class="footer-link">Contact</a>
    </nav>
  </footer>

  <!-- Tooltip popover (singleton) -->
  <div id="global-tooltip" class="global-tooltip" role="tooltip" aria-hidden="true"></div>
</body>
</html>
