/* ==========================================================================
   AI MORTGAGE CALCULATOR - V3 STYLES
   ========================================================================== */

/*--------------------------------*\
  #ROOT & THEME VARIABLES
\*--------------------------------*/

:root {
  /* Font Families */
  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  
  /* Color Palette (Light Mode) */
  --color-text: #27272a;
  --color-text-muted: #71717a;
  --color-background: #f4f4f5;
  --color-surface: #ffffff;
  --color-border: #e4e4e7;
  --color-border-hover: #d4d4d8;
  
  --color-primary: #1D9A9A;
  --color-primary-hover: #177c7c;
  --color-primary-accent: #37b5b5;
  --color-primary-text: #ffffff;
  
  --color-secondary: #e4e4e7;
  --color-secondary-hover: #d4d4d8;
  --color-secondary-text: #3f3f46;
  
  --color-success: #16a34a;
  --color-warning: #f97316;
  --color-error: #dc2626;
  --color-info: #3b82f6;

  /* Spacing & Sizing */
  --space-1: 0.25rem; --space-2: 0.5rem; --space-3: 0.75rem;
  --space-4: 1rem; --space-5: 1.25rem; --space-6: 1.5rem;

  /* Borders & Radius */
  --radius-md: 0.5rem; --radius-lg: 0.75rem; --radius-full: 9999px;
  --focus-ring: 0 0 0 3px color-mix(in srgb, var(--color-primary) 25%, transparent);

  /* Shadows & Transitions */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
}

[data-theme="dark"] {
  --color-text: #e4e4e7;
  --color-text-muted: #a1a1aa;
  --color-background: #18181b;
  --color-surface: #27272a;
  --color-border: #3f3f46;
  --color-border-hover: #52525b;
  --color-secondary: #3f3f46;
  --color-secondary-hover: #52525b;
  --color-secondary-text: #e4e4e7;
}

/*--------------------------------*\
  #BASE & GLOBAL STYLES
\*--------------------------------*/

*, *::before, *::after { box-sizing: border-box; }
* { margin: 0; padding: 0; font: inherit; }
html { font-size: 16px; scroll-behavior: smooth; }
body {
  font-family: var(--font-sans);
  color: var(--color-text);
  background-color: var(--color-background);
  -webkit-font-smoothing: antialiased;
  line-height: 1.5;
  transition: background-color var(--transition-fast), color var(--transition-fast);
}
:focus-visible { outline: 2px solid var(--color-primary); outline-offset: 2px; }
.sr-only {
  position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0;
}
.skip-link {
    position: absolute; top: -100px; left: var(--space-4); z-index: 9999;
    padding: var(--space-2) var(--space-4); background: var(--color-primary);
    color: var(--color-primary-text); border-radius: var(--radius-md);
    transition: top var(--transition-fast); text-decoration: none; font-weight: 600;
}
.skip-link:focus { top: var(--space-4); }

/*--------------------------------*\
  #HEADER & FOOTER
\*--------------------------------*/
.app-header {
  position: sticky; top: 0; z-index: 1000;
  background-color: color-mix(in srgb, var(--color-surface) 85%, transparent);
  backdrop-filter: blur(8px);
  border-bottom: 1px solid var(--color-border);
}
.header-container {
  max-width: 1280px; margin: 0 auto;
  padding: 0 var(--space-4); height: 60px;
  display: flex; justify-content: space-between; align-items: center;
}
.logo { font-weight: 700; font-size: 1.125rem; display: flex; align-items: center; gap: var(--space-2); color: var(--color-primary); }
.logo span { display: none; }
@media (min-width: 640px) { .logo span { display: inline; color: var(--color-text); } }

.control-group { display: flex; align-items: center; gap: var(--space-1); }
.control-btn {
  display: inline-flex; align-items: center; justify-content: center;
  gap: var(--space-2);
  height: 40px; padding: 0 var(--space-3);
  border-radius: var(--radius-md);
  font-size: 0.875rem; font-weight: 500;
  color: var(--color-text-muted);
  transition: background-color var(--transition-fast), color var(--transition-fast);
}
.control-btn:hover, .control-btn.active { background-color: var(--color-secondary); color: var(--color-text); }
.control-btn .control-text { display: none; }
@media (min-width: 768px) { .control-btn .control-text { display: inline; } }
.font-size-controls { display: flex; border: 1px solid var(--color-border); border-radius: var(--radius-md); overflow: hidden; margin-left: var(--space-2); }
.font-btn { height: 40px; width: 40px; color: var(--color-text-muted); }
.font-btn:first-child { border-right: 1px solid var(--color-border); }
.font-btn:hover { background-color: var(--color-secondary); color: var(--color-text); }

.app-footer {
    padding: var(--space-6) var(--space-4);
    margin-top: var(--space-6);
    background-color: var(--color-surface);
    border-top: 1px solid var(--color-border);
}
.footer-container {
    max-width: 1280px; margin: 0 auto;
    text-align: center; color: var(--color-text-muted);
}
.disclaimer { font-size: 0.75rem; }

/*--------------------------------*\
  #HERO SECTION (COMPACT)
\*--------------------------------*/

.hero {
    background-color: var(--color-surface);
    text-align: center;
    padding: var(--space-5) var(--space-4);
    border-bottom: 1px solid var(--color-border);
}
.hero-content { display: flex; flex-direction: column; align-items: center; gap: var(--space-3); }
.ai-badge {
    background-color: color-mix(in srgb, var(--color-primary) 15%, transparent);
    color: var(--color-primary);
    padding: var(--space-1) var(--space-2); border-radius: var(--radius-full);
    font-size: 0.75rem; font-weight: 600; letter-spacing: 0.5px;
}
h1 { font-size: 1.875rem; font-weight: 700; letter-spacing: -0.025em; }
.subtitle { font-size: 1rem; color: var(--color-text-muted); max-width: 600px; }
.market-rates-hero { display: flex; flex-wrap: wrap; justify-content: center; gap: var(--space-5); margin-top: var(--space-3); }
.market-item-hero { text-align: center; }
.market-item-hero span { font-size: 0.75rem; color: var(--color-text-muted); }
.market-item-hero strong { font-size: 1rem; font-weight: 600; color: var(--color-text); display: block; }

@media (min-width: 768px) {
    .hero { padding: var(--space-6) var(--space-4); }
    h1 { font-size: 2.25rem; }
}

/*--------------------------------*\
  #BUTTONS & FORM STYLES
\*--------------------------------*/

.btn {
  display: inline-flex; align-items: center; justify-content: center;
  gap: var(--space-2); height: 44px; padding: 0 var(--space-4);
  border-radius: var(--radius-md); font-size: 0.875rem; font-weight: 600;
  transition: var(--transition-fast);
}
.btn-primary { background-color: var(--color-primary); color: var(--color-primary-text); }
.btn-primary:hover { background-color: var(--color-primary-hover); }
.btn-large { height: 52px; font-size: 1rem; }
.btn-tertiary { color: var(--color-text-muted); }
.btn-tertiary:hover { background-color: var(--color-secondary); color: var(--color-text); }
.btn-sm { height: 36px; padding: 0 var(--space-3); }

.form-section { border: none; }
.section-legend {
    font-size: 0.75rem; font-weight: 600; color: var(--color-text-muted);
    text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: var(--space-3);
    padding-bottom: var(--space-2); border-bottom: 1px solid var(--color-border); width: 100%;
}
.form-group { display: flex; flex-direction: column; gap: var(--space-1); }
.mortgage-form { display: flex; flex-direction: column; gap: var(--space-4); }
.form-group label { font-size: 0.875rem; font-weight: 500; color: var(--color-text-muted); }
.form-control {
    width: 100%; height: 44px; padding: 0 var(--space-3);
    border: 1px solid var(--color-border); background-color: var(--color-surface);
    border-radius: var(--radius-md); color: var(--color-text);
    font-size: 1rem; transition: var(--transition-fast);
}
.form-control:hover { border-color: var(--color-border-hover); }
.form-control:focus { border-color: var(--color-primary); box-shadow: var(--focus-ring); outline: none; }
.form-control[readonly] { background-color: var(--color-background); color: var(--color-text-muted); }

.input-group { display: flex; }
.input-group .form-control { border-radius: 0 var(--radius-md) var(--radius-md) 0; }
.input-group .input-adornment {
    display: inline-flex; align-items: center; padding: 0 var(--space-3);
    background-color: var(--color-background); border: 1px solid var(--color-border); border-right: 0;
    border-radius: var(--radius-md) 0 0 var(--radius-md); color: var(--color-text-muted); font-size: 0.875rem;
}
.input-group .rate-adornment { border-right: 1px solid var(--color-border); border-left: 0; border-radius: 0 var(--radius-md) var(--radius-md) 0; font-weight: 600; padding: 0 var(--space-2); }
.input-group:focus-within .input-adornment { border-color: var(--color-primary); z-index: 1; }
.input-group > :not(:first-child) { margin-left: -1px; }

.toggle-group { display: flex; border: 1px solid var(--color-border); border-radius: var(--radius-md); padding: var(--space-1); }
.toggle-btn { flex: 1; height: 34px; border-radius: var(--radius-md); font-size: 0.875rem; font-weight: 500; }
.toggle-btn.active { background-color: var(--color-primary); color: var(--color-primary-text); }

.term-chips { display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-2); }
.term-chip { height: 44px; border: 1px solid var(--color-border); border-radius: var(--radius-md); font-weight: 600; transition: var(--transition-fast); }
.term-chip.active { background-color: var(--color-primary); color: var(--color-primary-text); border-color: var(--color-primary); }
.term-chip:not(.active):hover { border-color: var(--color-primary); }

.select-wrapper { position: relative; }
.select-arrow { position: absolute; right: var(--space-3); top: 50%; transform: translateY(-50%); pointer-events: none; color: var(--color-text-muted); }
select.form-control { -webkit-appearance: none; appearance: none; padding-right: var(--space-6); }

.advanced-options summary { list-style: none; cursor: pointer; display: flex; justify-content: space-between; align-items: center; padding: var(--space-2) 0; font-weight: 600; }
.advanced-options .expand-icon { transition: transform var(--transition-fast); }
.advanced-options[open] .expand-icon { transform: rotate(180deg); }
.advanced-content { padding-top: var(--space-3); border-top: 1px solid var(--color-border); display: flex; flex-direction: column; gap: var(--space-3); }

.pmi-warning { font-size: 0.75rem; color: var(--color-warning); display: flex; align-items: center; gap: var(--space-1); margin-top: var(--space-1); }
.form-help { font-size: 0.75rem; color: var(--color-text-muted); }
.form-actions { margin-top: var(--space-4); }

/*--------------------------------*\
  #MAIN LAYOUT & CARDS
\*--------------------------------*/

.calculator-grid-container {
    max-width: 1280px; margin: var(--space-6) auto;
    padding: 0 var(--space-4); display: grid; grid-template-columns: 1fr;
    gap: var(--space-6); align-items: flex-start;
}
@media (min-width: 768px) { .calculator-grid-container { grid-template-columns: 350px 1fr; } }
@media (min-width: 1024px) { .calculator-grid-container { grid-template-columns: 350px 1fr 300px; } }

.card {
    background-color: var(--color-surface); border: 1px solid var(--color-border);
    border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); overflow: hidden;
}
.input-card, .right-column .card { position: sticky; top: 84px; }
.right-column { display: none; flex-direction: column; gap: var(--space-6); }
@media (min-width: 1024px) { .right-column { display: flex; } }
.card-header { padding: var(--space-3) var(--space-4); border-bottom: 1px solid var(--color-border); display: flex; justify-content: space-between; align-items: center; }
.card-header h3 { font-size: 1.125rem; font-weight: 600; display: flex; align-items: center; gap: var(--space-2); }
.card-body { padding: var(--space-4); }
.card-footer { padding: var(--space-3) var(--space-4); border-top: 1px solid var(--color-border); background-color: var(--color-background); display: flex; gap: var(--space-2); }

/*--------------------------------*\
  #RESULTS & CHARTS
\*--------------------------------*/

.total-payment-section { text-align: center; padding-bottom: var(--space-4); }
.total-payment-section label { font-size: 1rem; font-weight: 600; color: var(--color-text-muted); }
.total-payment-amount {
    font-size: 2.5rem; font-weight: 700; line-height: 1.1; color: var(--color-primary);
    animation: result-fade-in 0.5s ease-out;
}
@keyframes result-fade-in { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

.payment-breakdown { padding: var(--space-4) 0; border-top: 1px solid var(--color-border); }
.breakdown-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-1); }
.breakdown-label { font-size: 0.875rem; color: var(--color-text-muted); display: flex; align-items: center; gap: var(--space-2); }
.breakdown-value { font-weight: 600; }
.breakdown-bar { height: 6px; background-color: var(--color-background); border-radius: var(--radius-full); overflow: hidden; margin-top: var(--space-1); display: flex;}
.breakdown-fill { height: 100%; transition: width 0.5s ease-out; }

.cost-breakdown-section { display: flex; flex-direction: column; gap: var(--space-4); border-top: 1px solid var(--color-border); }
.cost-chart-container { position: relative; width: 180px; height: 180px; margin: 0 auto; }
.cost-chart-center-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; }
.cost-chart-center-text label { font-size: 0.75rem; color: var(--color-text-muted); }
.cost-chart-center-text strong { display: block; font-size: 1.25rem; font-weight: 700; line-height: 1.2; }

.loan-summary { display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-4); border-top: 1px solid var(--color-border); padding-top: var(--space-4); }
.loan-summary .summary-item:last-child { grid-column: 1 / -1; }
.summary-item { text-align: center; }
.summary-item label { display: flex; justify-content: center; align-items: center; gap: var(--space-2); font-size: 0.75rem; color: var(--color-text-muted); margin-bottom: var(--space-1); }
.summary-item strong { font-size: 1.125rem; font-weight: 600; }

.market-rate-value .trend-up { color: var(--color-success); }
.market-rate-value .trend-down { color: var(--color-error); }
.market-item-hero.flash-update { animation: flash-update 1s ease-out; }
@keyframes flash-update { 50% { background-color: color-mix(in srgb, var(--color-primary) 10%, transparent); } }

.tab-container, .tab-controls, .tab-btn, .tab-content, .chart-container, .year-slider-group, .insights-list, .insight-item, .table-container { /* Unchanged styles */ }

.loading-overlay, .spinner, .toast-container, .toast, .voice-status, .voice-wave { /* Unchanged styles */ }

/*--------------------------------*\
  #PRINT STYLES
\*--------------------------------*/
@media print {
    body { background-color: #fff; color: #000; font-size: 12pt; }
    .app-header, .app-footer, .input-card, .right-column, .hero, .card-footer, .tab-controls { display: none !important; }
    main, .calculator-grid-container, .results-card { display: block !important; box-shadow: none !important; border: none !important; margin: 0 !important; padding: 0 !important; }
    .card-body { padding: 0 0 1rem 0 !important; }
    .tab-content { display: block !important; page-break-inside: avoid; }
    a { text-decoration: none; color: #000; }
}
