/* ========================================================================== */
/* HOME LOAN PRO - AI MORTGAGE CALCULATOR - ENHANCED CSS v26.0              */
/* PRESERVING ALL ORIGINAL STYLES + NEW FEATURES IMPLEMENTED                */
/* Tabs, Functional Dark Mode, ZIP Code Integration, Chart Fixes            */
/* ========================================================================== */

:root {
    /* Color System */
    --color-white: #ffffff;
    --color-black: #000000;
    --color-gray-50: #f9fafb;
    --color-gray-100: #f3f4f6;
    --color-gray-200: #e5e7eb;
    --color-gray-300: #d1d5db;
    --color-gray-400: #9ca3af;
    --color-gray-500: #6b7280;
    --color-gray-600: #4b5563;
    --color-gray-700: #374151;
    --color-gray-800: #1f2937;
    --color-gray-900: #111827;
    
    /* Primary & Accent Colors */
    --color-teal-50: #f0fdfa;
    --color-teal-100: #ccfbf1;
    --color-teal-400: #2dd4bf;
    --color-teal-500: #14b8a6;
    --color-teal-600: #0d9488;
    --color-teal-700: #0f766e;

    /* Status Colors */
    --color-success-50: #f0fdf4; --color-success-500: #22c55e; --color-success-600: #16a34a;
    --color-error-50: #fef2f2; --color-error-500: #ef4444; --color-error-600: #dc2626;
    --color-warning-50: #fffbeb; --color-warning-500: #f59e0b; --color-warning-600: #d97706;
    --color-info-50: #eff6ff; --color-info-500: #3b82f6; --color-info-600: #2563eb;
    
    /* Light Mode Semantic Colors */
    --color-background: var(--color-gray-50);
    --color-surface: var(--color-white);
    --color-surface-secondary: var(--color-gray-100);
    --color-text: var(--color-gray-900);
    --color-text-secondary: var(--color-gray-600);
    --color-text-muted: var(--color-gray-500);
    --color-primary: var(--color-teal-600);
    --color-primary-hover: var(--color-teal-700);
    --color-primary-light: var(--color-teal-50);
    --color-border: var(--color-gray-200);
    --color-border-strong: var(--color-gray-300);
    
    /* Typography */
    --font-family-primary: 'Inter', system-ui, sans-serif;
    --font-scale: 1;
    --font-size-xs: calc(0.75rem * var(--font-scale));
    --font-size-sm: calc(0.875rem * var(--font-scale));
    --font-size-base: calc(1rem * var(--font-scale));
    --font-size-lg: calc(1.125rem * var(--font-scale));
    --font-size-xl: calc(1.25rem * var(--font-scale));
    --font-size-2xl: calc(1.5rem * var(--font-scale));
    --font-size-3xl: calc(1.875rem * var(--font-scale));
    --font-size-4xl: calc(2.25rem * var(--font-scale));
    
    /* Spacing & Sizing */
    --space-1: 0.25rem; --space-2: 0.5rem; --space-3: 0.75rem; --space-4: 1rem; --space-5: 1.25rem; --space-6: 1.5rem; --space-8: 2rem;
    
    /* Borders & Shadows */
    --radius-md: 0.375rem; --radius-lg: 0.5rem; --radius-xl: 0.75rem; --radius-2xl: 1rem; --radius-full: 9999px;
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
    --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
    
    /* Transitions */
    --transition-fast: 150ms ease-out;
    --transition-normal: 200ms ease-in-out;
    --transition-slow: 300ms ease-in-out;
    
    /* Z-Index */
    --z-sticky: 1020; --z-modal: 1050; --z-toast: 1080;
}

/* Dark Mode Theme */
[data-color-scheme="dark"] {
    --color-background: var(--color-gray-900);
    --color-surface: var(--color-gray-800);
    --color-surface-secondary: var(--color-gray-700);
    --color-text: var(--color-gray-100);
    --color-text-secondary: var(--color-gray-400);
    --color-text-muted: var(--color-gray-500);
    --color-primary: var(--color-teal-400);
    --color-primary-hover: var(--color-teal-500);
    --color-primary-light: rgba(45, 212, 191, 0.1);
    --color-border: var(--color-gray-700);
    --color-border-strong: var(--color-gray-600);
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.2);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.3), 0 2px 4px -2px rgb(0 0 0 / 0.3);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.4), 0 4px 6px -4px rgb(0 0 0 / 0.4);
    --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.4), 0 8px 10px -6px rgb(0 0 0 / 0.4);
}

/* Font Scale Classes */
.font-scale-75 { --font-scale: 0.75; } .font-scale-87 { --font-scale: 0.875; } .font-scale-100 { --font-scale: 1; } .font-scale-112 { --font-scale: 1.125; } .font-scale-125 { --font-scale: 1.25; }

/* Base Styles */
*, *::before, *::after { box-sizing: border-box; }
body { margin: 0; font-family: var(--font-family-primary); font-size: var(--font-size-base); color: var(--color-text); background-color: var(--color-background); min-height: 100vh; transition: background-color var(--transition-normal), color var(--transition-normal); -webkit-font-smoothing: antialiased; }
.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }
.skip-link { position: absolute; top: var(--space-4); left: var(--space-4); z-index: var(--z-modal); padding: var(--space-3) var(--space-6); background: var(--color-primary); color: var(--color-white); text-decoration: none; border-radius: var(--radius-lg); transform: translateY(-200%); transition: transform var(--transition-fast); }
.skip-link:focus { transform: translateY(0); }

/* Header */
.site-header { background: var(--color-surface); border-bottom: 1px solid var(--color-border); box-shadow: var(--shadow-sm); position: sticky; top: 0; z-index: var(--z-sticky); }
.header-container { max-width: 1400px; margin: 0 auto; padding: 0 var(--space-4); display: flex; align-items: center; justify-content: space-between; min-height: 4rem; gap: var(--space-4); }
.brand-section, .logo-link, .logo-container { display: flex; align-items: center; gap: var(--space-3); }
.logo-link { text-decoration: none; color: var(--color-text); }
.usa-flag { font-size: var(--font-size-2xl); }
.logo-content { display: flex; flex-direction: column; }
.logo-main { font-size: var(--font-size-lg); font-weight: 700; line-height: 1.2; }
.logo-subtitle { font-size: var(--font-size-xs); color: var(--color-text-secondary); }
.accessibility-controls { display: flex; align-items: center; gap: var(--space-2); }
.font-controls { display: flex; gap: var(--space-1); padding-right: var(--space-2); border-right: 1px solid var(--color-border); }
.control-btn { display: flex; align-items: center; justify-content: center; gap: var(--space-2); width: 2.5rem; height: 2.5rem; border: 1px solid var(--color-border); border-radius: var(--radius-lg); background: var(--color-surface); color: var(--color-text-secondary); font-size: var(--font-size-sm); cursor: pointer; transition: all var(--transition-fast); }
.control-btn:hover { border-color: var(--color-primary); color: var(--color-primary); background: var(--color-primary-light); }
.control-btn.active { background: var(--color-primary); color: var(--color-white); border-color: var(--color-primary); }
.control-label { display: none; } /* Simplified for this version */
.header-middle { background: linear-gradient(135deg, var(--color-primary), var(--color-teal-700)); color: var(--color-white); overflow: hidden; position: relative; }
@keyframes slideInFromTop { 0% { transform: translateY(-100%); opacity: 0; } 100% { transform: translateY(0); opacity: 1; } }
.animated-middle { animation: slideInFromTop 700ms ease-out; }
.header-middle-content { position: relative; z-index: 1; text-align: center; padding: var(--space-3) var(--space-4); }
.tagline { font-size: var(--font-size-lg); font-weight: 600; margin-bottom: var(--space-2); }
.features-quick { display: flex; justify-content: center; gap: var(--space-4); flex-wrap: wrap; }
.feature-quick { font-size: var(--font-size-sm); background: rgba(255, 255, 255, 0.15); padding: var(--space-1) var(--space-3); border-radius: var(--radius-full); }

/* Main Layout */
.calculator-main { background: var(--color-background); }
.calculator-container { max-width: 1400px; margin: 0 auto; padding: var(--space-8) var(--space-4); display: grid; grid-template-columns: 30% 40% 30%; gap: var(--space-6); align-items: start; }
.input-section, .results-section, .sidebar-section { background: var(--color-surface); border-radius: var(--radius-2xl); border: 1px solid var(--color-border); box-shadow: var(--shadow-lg); padding: var(--space-6); }
.section-header { padding-bottom: var(--space-4); border-bottom: 1px solid var(--color-border); margin-bottom: var(--space-6); }
.section-title { display: flex; align-items: center; gap: var(--space-3); font-size: var(--font-size-xl); font-weight: 700; color: var(--color-text); margin: 0; }
.section-icon { color: var(--color-primary); }
.section-subtitle { color: var(--color-text-muted); font-size: var(--font-size-sm); margin: 0; }

/* Form Elements */
.form-section { margin-bottom: var(--space-6); }
.subsection-title { display: flex; align-items: center; gap: var(--space-3); font-size: var(--font-size-lg); font-weight: 600; color: var(--color-text); margin-bottom: var(--space-5); padding: var(--space-3); background: var(--color-primary-light); border-radius: var(--radius-xl); border-left: 4px solid var(--color-primary); }
.step-number { display: flex; align-items: center; justify-content: center; width: 1.75rem; height: 1.75rem; background: var(--color-primary); color: var(--color-white); border-radius: var(--radius-full); font-size: var(--font-size-sm); font-weight: 700; flex-shrink: 0; }
.form-group { margin-bottom: var(--space-5); }
.form-label { display: flex; align-items: center; justify-content: space-between; margin-bottom: var(--space-2); }
.label-content { display: flex; align-items: center; gap: var(--space-2); font-weight: 600; color: var(--color-text); font-size: var(--font-size-sm); }
.label-icon { color: var(--color-primary); }
.input-group { position: relative; display: flex; align-items: center; }
.form-control { width: 100%; padding: var(--space-3) var(--space-4); border: 2px solid var(--color-border); border-radius: var(--radius-xl); font-size: var(--font-size-base); color: var(--color-text); background-color: var(--color-surface); transition: all var(--transition-fast); }
.form-control:focus { outline: none; border-color: var(--color-primary); box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-primary) 15%, transparent); }
.input-prefix, .input-suffix { position: absolute; display: flex; align-items: center; height: 100%; padding: 0 var(--space-3); color: var(--color-text-muted); font-weight: 600; font-size: var(--font-size-sm); pointer-events: none; }
.input-prefix { left: 2px; }
.input-suffix { right: 2px; }
.input-group:has(.input-prefix) .form-control { padding-left: 2.75rem; }
.input-group:has(.input-suffix) .form-control { padding-right: 2.75rem; }
select.form-control { appearance: none; background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e"); background-position: right 0.5rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em; padding-right: 2.5rem; }
[data-color-scheme="dark"] select.form-control { background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%239ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e"); }
.help-text { font-size: var(--font-size-xs); color: var(--color-text-muted); margin-top: var(--space-1); }

/* Specific Inputs */
.percentage-input { margin-top: var(--space-2); }
.percentage-chips { display: flex; gap: var(--space-2); flex-wrap: wrap; margin-top: var(--space-3); }
.percentage-chip { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: var(--space-2); border: 2px solid var(--color-border); border-radius: var(--radius-xl); background: var(--color-surface); cursor: pointer; transition: all var(--transition-fast); flex: 1; min-width: 4rem; }
.percentage-chip:hover { border-color: var(--color-primary); transform: translateY(-2px); box-shadow: var(--shadow-md); }
.percentage-chip.active { border-color: var(--color-primary); background: var(--color-primary); color: var(--color-white); }
.chip-value { font-weight: 700; } .chip-label { font-size: var(--font-size-xs); opacity: 0.8; }
.credit-impact { margin-top: var(--space-2); padding: var(--space-2) var(--space-3); border-radius: var(--radius-lg); font-size: var(--font-size-xs); font-weight: 500; display: none; align-items: center; gap: var(--space-2); }
.credit-impact.show { display: flex; }
.credit-impact.positive { background: var(--color-success-50); color: var(--color-success-600); }
.credit-impact.negative { background: var(--color-error-50); color: var(--color-error-600); }
.credit-impact.neutral { background: var(--color-info-50); color: var(--color-info-600); }
[data-color-scheme="dark"] .credit-impact.positive { background: rgba(34, 197, 94, 0.15); color: var(--color-success-500); }
[data-color-scheme="dark"] .credit-impact.negative { background: rgba(239, 68, 68, 0.15); color: var(--color-error-500); }
[data-color-scheme="dark"] .credit-impact.neutral { background: rgba(59, 130, 246, 0.15); color: var(--color-info-500); }
.live-rate-badge { display: inline-flex; align-items: center; gap: var(--space-2); font-size: var(--font-size-xs); padding: var(--space-1) var(--space-2); background: var(--color-success-500); color: var(--color-white); border-radius: var(--radius-full); font-weight: 600; }
@keyframes livePulse { 50% { opacity: 0.5; } }
.live-icon { font-size: 0.5rem; animation: livePulse 1.5s ease-in-out infinite; }
.federal-attribution { font-size: var(--font-size-xs); color: var(--color-text-muted); margin-top: var(--space-2); font-style: italic; }
.term-chips { display: flex; gap: var(--space-2); margin-bottom: var(--space-4); }
.term-chip { flex: 1; padding: var(--space-2); border: 2px solid var(--color-border); border-radius: var(--radius-xl); cursor: pointer; text-align: center; transition: all var(--transition-fast); }
.term-chip:hover { border-color: var(--color-primary); transform: translateY(-2px); box-shadow: var(--shadow-md); }
.term-chip.active { border-color: var(--color-primary); background: var(--color-primary); color: var(--color-white); }
.term-years { font-size: var(--font-size-lg); font-weight: 700; }
.term-label { font-size: var(--font-size-xs); opacity: 0.8; }
.loan-type-section { background: var(--color-primary-light); padding: var(--space-4); border-radius: var(--radius-2xl); border: 1px solid var(--color-border); }
.loan-type-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-3); }
.loan-type-btn { display: flex; align-items: center; gap: var(--space-2); padding: var(--space-3); border: 2px solid var(--color-border); border-radius: var(--radius-xl); background: var(--color-surface); cursor: pointer; transition: all var(--transition-fast); font-weight: 600; }
.loan-type-btn:hover { border-color: var(--color-primary); transform: translateY(-2px); box-shadow: var(--shadow-md); }
.loan-type-btn.active { border-color: var(--color-primary); background: var(--color-primary-light); color: var(--color-primary); }
.loan-icon { font-size: 1.2rem; }
.pmi-status { margin-top: var(--space-2); padding: var(--space-2) var(--space-3); border-radius: var(--radius-lg); font-size: var(--font-size-xs); font-weight: 500; display: none; align-items: center; gap: var(--space-2); }
.pmi-status.show { display: flex; }
.pmi-status.active { background: var(--color-warning-50); color: var(--color-warning-600); }
.pmi-status.inactive { background: var(--color-success-50); color: var(--color-success-600); }
[data-color-scheme="dark"] .pmi-status.active { background: rgba(245, 158, 11, 0.15); color: var(--color-warning-500); }
[data-color-scheme="dark"] .pmi-status.inactive { background: rgba(34, 197, 94, 0.15); color: var(--color-success-500); }
.subsection-title.no-step-number { padding-left: 0; }

/* Results Section */
.main-payment-card { background: linear-gradient(135deg, var(--color-primary), var(--color-teal-700)); color: var(--color-white); padding: var(--space-6); border-radius: var(--radius-2xl); margin-bottom: var(--space-6); text-align: center; }
.payment-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-4); }
.payment-title { font-size: var(--font-size-lg); font-weight: 600; }
.loan-type-badge { background: rgba(255, 255, 255, 0.2); padding: var(--space-1) var(--space-3); border-radius: var(--radius-full); font-size: var(--font-size-xs); font-weight: 500; }
.payment-value { font-size: var(--font-size-4xl); font-weight: 700; line-height: 1.1; }
.payment-breakdown { font-size: var(--font-size-lg); opacity: 0.9; display: flex; justify-content: center; gap: var(--space-2); }
.breakdown-separator { opacity: 0.7; }
.chart-section, .loan-summary, .loan-analysis-section, .ai-insights-section, .payment-schedule-section { padding: var(--space-4); border-radius: var(--radius-xl); }
.chart-container { position: relative; height: 280px; }

/* Tabs */
.tabs-nav { display: flex; flex-wrap: wrap; gap: var(--space-1); border-bottom: 2px solid var(--color-border); margin-bottom: var(--space-4); }
.tab-btn { padding: var(--space-3) var(--space-4); border: none; background: transparent; color: var(--color-text-secondary); font-size: var(--font-size-sm); font-weight: 600; cursor: pointer; transition: all var(--transition-fast); border-bottom: 2px solid transparent; margin-bottom: -2px; }
.tab-btn:hover { color: var(--color-primary); }
.tab-btn.active { color: var(--color-primary); border-color: var(--color-primary); }
.tab-pane { display: none; }
.tab-pane.active { display: block; animation: fadeIn 0.5s; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

/* Loan Summary */
.loan-summary.colorful { background: var(--color-surface); }
.summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: var(--space-4); }
.summary-item { display: flex; align-items: center; gap: var(--space-3); padding: var(--space-4); border-radius: var(--radius-xl); color: var(--color-white); }
.summary-item.loan-amount { background: linear-gradient(135deg, var(--color-info-500), var(--color-teal-600)); }
.summary-item.total-interest { background: linear-gradient(135deg, var(--color-warning-500), var(--color-warning-600)); }
.summary-item.total-cost { background: linear-gradient(135deg, var(--color-error-500), #e11d48); }
.summary-item.payoff-date { background: linear-gradient(135deg, var(--color-success-500), #059669); }
.summary-icon { display: flex; align-items: center; justify-content: center; width: 2.5rem; height: 2.5rem; border-radius: var(--radius-xl); background: rgba(255, 255, 255, 0.2); }
.summary-details { flex-direction: column; gap: var(--space-1); }
.summary-label { font-size: var(--font-size-sm); opacity: 0.9; }
.summary-value { font-size: var(--font-size-lg); font-weight: 700; }

/* AI Insights */
.insights-container { display: flex; flex-direction: column; gap: var(--space-4); }
.insight-item { padding: var(--space-4); background: var(--color-primary-light); border-radius: var(--radius-lg); border-left: 4px solid var(--color-primary); }
.insight-title { font-size: var(--font-size-base); font-weight: 600; color: var(--color-primary); margin-bottom: var(--space-2); display: flex; align-items: center; gap: var(--space-2); }

/* Payment Schedule */
.schedule-options { display: flex; gap: var(--space-1); background: var(--color-surface-secondary); padding: var(--space-1); border-radius: var(--radius-lg); margin-bottom: var(--space-4); }
.schedule-btn { padding: var(--space-2) var(--space-4); border: none; border-radius: var(--radius-md); background: transparent; color: var(--color-text-secondary); cursor: pointer; transition: all var(--transition-fast); }
.schedule-btn.active { background: var(--color-primary); color: var(--color-white); box-shadow: var(--shadow-sm); }
.schedule-table-wrapper { overflow-x: auto; border: 1px solid var(--color-border); border-radius: var(--radius-lg); }
.schedule-table { width: 100%; border-collapse: collapse; font-size: var(--font-size-sm); }
.schedule-table th { background: var(--color-surface-secondary); font-weight: 600; text-align: left; padding: var(--space-3) var(--space-4); }
.schedule-table td { padding: var(--space-3) var(--space-4); border-bottom: 1px solid var(--color-border); }
.schedule-table tbody tr:hover { background-color: var(--color-primary-light); }
.schedule-pagination { display: flex; justify-content: space-between; align-items: center; margin-top: var(--space-4); }
.pagination-btn { display: flex; align-items: center; gap: var(--space-2); padding: var(--space-2) var(--space-4); border: 1px solid var(--color-border); border-radius: var(--radius-lg); background: var(--color-surface); cursor: pointer; transition: all var(--transition-fast); }
.pagination-btn:disabled { opacity: 0.5; cursor: not-allowed; }
.pagination-btn:not(:disabled):hover { background: var(--color-primary-light); border-color: var(--color-primary); color: var(--color-primary); }
.export-btn { margin-top: var(--space-4); width: 100%; }

/* Sharing & Sidebar */
.sharing-section { margin-top: var(--space-6); }
.action-buttons { display: flex; gap: var(--space-3); flex-wrap: wrap; }
.action-btn { display: flex; align-items: center; justify-content: center; gap: var(--space-2); padding: var(--space-3) var(--space-4); border-radius: var(--radius-xl); font-weight: 600; cursor: pointer; transition: all var(--transition-fast); text-decoration: none; border: 2px solid; }
.action-btn.primary { background: var(--color-primary); color: var(--color-white); border-color: var(--color-primary); }
.action-btn.primary:hover { background: var(--color-primary-hover); border-color: var(--color-primary-hover); transform: translateY(-2px); box-shadow: var(--shadow-lg); }
.action-btn.secondary { background: var(--color-surface); color: var(--color-primary); border-color: var(--color-primary); }
.action-btn.secondary:hover { background: var(--color-primary-light); transform: translateY(-2px); box-shadow: var(--shadow-lg); }
.partner-card { border: 1px solid var(--color-border); border-radius: var(--radius-xl); padding: var(--space-4); transition: all var(--transition-fast); margin-bottom: var(--space-4); }
.partner-card.featured { background: var(--color-primary-light); border-color: var(--color-primary); }
.partner-header { display: flex; align-items: center; gap: var(--space-3); margin-bottom: var(--space-4); }
.partner-logo { width: 3rem; height: 3rem; background: var(--color-primary-light); border-radius: var(--radius-lg); display: flex; align-items: center; justify-content: center; }
.partner-icon { font-size: var(--font-size-lg); color: var(--color-primary); }
.partner-name { font-size: var(--font-size-base); font-weight: 700; }
.rating-stars { color: var(--color-warning-500); }
.rate-display { padding: var(--space-3); background: var(--color-surface-secondary); border-radius: var(--radius-lg); }
.rate-value { font-size: var(--font-size-lg); font-weight: 700; color: var(--color-primary); }
.partner-cta { width: 100%; padding: var(--space-3); border-radius: var(--radius-lg); font-weight: 600; cursor: pointer; transition: all var(--transition-fast); border: 2px solid; margin-top: var(--space-4); }
.partner-cta.primary { background: var(--color-primary); color: var(--color-white); border-color: var(--color-primary); }
.partner-cta.secondary { background: var(--color-surface); color: var(--color-primary); border-color: var(--color-primary); }
.ad-space { border: 1px solid var(--color-border); border-radius: var(--radius-xl); padding: var(--space-4); text-align: center; }
.ad-label { font-size: var(--font-size-xs); color: var(--color-text-muted); }
.ad-title { font-weight: 700; }
.ad-cta { width: 100%; padding: var(--space-3); background: var(--color-primary); color: var(--color-white); border: 2px solid var(--color-primary); border-radius: var(--radius-lg); font-weight: 600; cursor: pointer; }

/* Modals, Loading, Toasts */
.modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: var(--z-modal); opacity: 0; visibility: hidden; transition: all var(--transition-normal); }
.modal-overlay.show { opacity: 1; visibility: visible; }
.modal-content { background: var(--color-surface); border-radius: var(--radius-2xl); box-shadow: var(--shadow-xl); max-width: 500px; width: 90%; }
.modal-header { display: flex; justify-content: space-between; padding: var(--space-4); border-bottom: 1px solid var(--color-border); }
.modal-title { font-size: var(--font-size-lg); font-weight: 600; }
.modal-close-btn { background: none; border: none; cursor: pointer; font-size: 1.5rem; color: var(--color-text-secondary); }
.modal-body { padding: var(--space-4); }
.modal-footer { display: flex; gap: var(--space-3); padding: var(--space-4); border-top: 1px solid var(--color-border); }
.modal-btn { flex: 1; padding: var(--space-3); border-radius: var(--radius-lg); font-weight: 600; cursor: pointer; border: 2px solid; }
.modal-btn.primary { background: var(--color-primary); color: var(--color-white); border-color: var(--color-primary); }
.modal-btn.secondary { background: var(--color-surface); color: var(--color-primary); border-color: var(--color-primary); }
.loading-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: var(--z-modal); opacity: 0; visibility: hidden; transition: all var(--transition-normal); }
.loading-overlay.show { opacity: 1; visibility: visible; }
.loading-spinner { width: 3rem; height: 3rem; border: 4px solid var(--color-border); border-top-color: var(--color-primary); border-radius: 50%; animation: spin 1s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }
.toast-container { position: fixed; top: var(--space-4); right: var(--space-4); z-index: var(--z-toast); display: flex; flex-direction: column; gap: var(--space-2); }
.toast { padding: var(--space-4); background: var(--color-surface); border-left: 4px solid; border-radius: var(--radius-lg); box-shadow: var(--shadow-lg); display: flex; align-items: center; gap: var(--space-3); max-width: 400px; animation: toastSlideIn 0.3s ease-out; }
@keyframes toastSlideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
.toast.success { border-color: var(--color-success-500); } .toast.error { border-color: var(--color-error-500); } .toast.warning { border-color: var(--color-warning-500); } .toast.info { border-color: var(--color-info-500); }
.toast-close { background: none; border: none; color: var(--color-text-muted); cursor: pointer; }

/* Responsive Design */
@media (max-width: 1200px) {
    .calculator-container { grid-template-columns: 1fr 1fr; }
    .input-section { grid-column: 1 / -1; }
}
@media (max-width: 992px) {
    .calculator-container { grid-template-columns: 1fr; }
}
@media (max-width: 768px) {
    .header-container { flex-wrap: wrap; justify-content: center; }
    .payment-breakdown { flex-direction: column; gap: 0; }
    .loan-type-grid { grid-template-columns: 1fr; }
}
