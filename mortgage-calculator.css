/* ==========================================================================
   AI MORTGAGE CALCULATOR - V3 STYLES
   ========================================================================== */

/*--------------------------------*\
  #ROOT & THEME VARIABLES
\*--------------------------------*/

:root {
  /* Font Families */
  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  
  /* Color Palette (Light Mode) */
  --color-text: #27272a;
  --color-text-muted: #71717a;
  --color-background: #f4f4f5;
  --color-surface: #ffffff;
  --color-border: #e4e4e7;
  --color-border-hover: #d4d4d8;
  
  --color-primary: #1D9A9A;
  --color-primary-hover: #177c7c;
  --color-primary-accent: #37b5b5;
  --color-primary-text: #ffffff;
  
  --color-secondary: #e4e4e7;
  --color-secondary-hover: #d4d4d8;
  --color-secondary-text: #3f3f46;
  
  --color-success: #16a34a;
  --color-warning: #f97316;
  --color-error: #dc2626;
  --color-info: #3b82f6;

  /* Spacing & Sizing */
  --space-1: 0.25rem; --space-2: 0.5rem; --space-3: 0.75rem;
  --space-4: 1rem; --space-5: 1.25rem; --space-6: 1.5rem;

  /* Borders & Radius */
  --radius-md: 0.5rem; --radius-lg: 0.75rem; --radius-full: 9999px;
  --focus-ring: 0 0 0 3px color-mix(in srgb, var(--color-primary) 25%, transparent);

  /* Shadows & Transitions */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
}

[data-theme="dark"] {
  --color-text: #e4e4e7;
  --color-text-muted: #a1a1aa;
  --color-background: #18181b;
  --color-surface: #27272a;
  --color-border: #3f3f46;
  --color-border-hover: #52525b;
  --color-secondary: #3f3f46;
  --color-secondary-hover: #52525b;
  --color-secondary-text: #e4e4e7;
}

/*--------------------------------*\
  #BASE & GLOBAL STYLES
\*--------------------------------*/

*, *::before, *::after { box-sizing: border-box; }
* { margin: 0; padding: 0; font: inherit; }
html { font-size: 16px; scroll-behavior: smooth; }
body {
  font-family: var(--font-sans);
  color: var(--color-text);
  background-color: var(--color-background);
  -webkit-font-smoothing: antialiased;
  line-height: 1.5;
  transition: background-color var(--transition-fast), color var(--transition-fast);
}
:focus-visible { outline: 2px solid var(--color-primary); outline-offset: 2px; }
.sr-only {
  position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0;
}
.skip-link {
    position: absolute; top: -100px; left: var(--space-4); z-index: 9999;
    padding: var(--space-2) var(--space-4); background: var(--color-primary);
    color: var(--color-primary-text); border-radius: var(--radius-md);
    transition: top var(--transition-fast); text-decoration: none; font-weight: 600;
}
.skip-link:focus { top: var(--space-4); }

/*--------------------------------*\
  #HEADER & FOOTER
\*--------------------------------*/
.app-header {
  position: sticky; top: 0; z-index: 1000;
  background-color: color-mix(in srgb, var(--color-surface) 85%, transparent);
  backdrop-filter: blur(8px);
  border-bottom: 1px solid var(--color-border);
}
.header-container {
  max-width: 1280px; margin: 0 auto;
  padding: 0 var(--space-4); height: 60px;
  display: flex; justify-content: space-between; align-items: center;
}
.logo { font-weight: 700; font-size: 1.125rem; display: flex; align-items: center; gap: var(--space-2); color: var(--color-primary); }
.logo span { display: none; }
@media (min-width: 640px) { .logo span { display: inline; color: var(--color-text); } }

.control-group { display: flex; align-items: center; gap: var(--space-1); }
.control-btn {
  display: inline-flex; align-items: center; justify-content: center;
  gap: var(--space-2);
  height: 40px; padding: 0 var(--space-3);
  border-radius: var(--radius-md);
  font-size: 0.875rem; font-weight: 500;
  color: var(--color-text-muted);
  transition: background-color var(--transition-fast), color var(--transition-fast);
}
.control-btn:hover, .control-btn.active { background-color: var(--color-secondary); color: var(--color-text); }
.control-btn .control-text { display: none; }
@media (min-width: 768px) { .control-btn .control-text { display: inline; } }
.font-size-controls { display: flex; border: 1px solid var(--color-border); border-radius: var(--radius-md); overflow: hidden; margin-left: var(--space-2); }
.font-btn { height: 40px; width: 40px; color: var(--color-text-muted); }
.font-btn:first-child { border-right: 1px solid var(--color-border); }
.font-btn:hover { background-color: var(--color-secondary); color: var(--color-text); }

.app-footer {
    padding: var(--space-6) var(--space-4);
    margin-top: var(--space-6);
    background-color: var(--color-surface);
    border-top: 1px solid var(--color-border);
}
.footer-container {
    max-width: 1280px; margin: 0 auto;
    text-align: center; color: var(--color-text-muted);
}
.disclaimer { font-size: 0.75rem; }

/*--------------------------------*\
  #HERO SECTION (COMPACT)
\*--------------------------------*/

.hero {
    background-color: var(--color-surface);
    text-align: center;
    padding: var(--space-5) var(--space-4);
    border-bottom: 1px solid var(--color-border);
}
.hero-content { display: flex; flex-direction: column; align-items: center; gap: var(--space-3); }
.ai-badge {
    background-color: color-mix(in srgb, var(--color-primary) 15%, transparent);
    color: var(--color-primary);
    padding: var(--space-1) var(--space-2); border-radius: var(--radius-full);
    font-size: 0.75rem; font-weight: 600; letter-spacing: 0.5px;
}
h1 { font-size: 1.875rem; font-weight: 700; letter-spacing: -0.025em; }
.subtitle { font-size: 1rem; color: var(--color-text-muted); max-width: 600px; }

.market-rates-hero { display: flex; gap: var(--space-5); margin-top: var(--space-3); }
.market-item-hero { text-align: center; }
.market-item-hero span { font-size: 0.75rem; color: var(--color-text-muted); }
.market-item-hero strong { font-size: 1rem; font-weight: 600; color: var(--color-text); display: block; }
.hero-actions { display: flex; gap: var(--space-3); }

@media (min-width: 768px) {
    .hero { padding: var(--space-6) var(--space-4); }
    h1 { font-size: 2.25rem; }
}

/*--------------------------------*\
  #BUTTONS & FORM STYLES
\*--------------------------------*/

.btn { /* ... unchanged ... */ }
.form-section, .form-group, .form-control, .input-group, .toggle-group, .term-chips, .select-wrapper, .advanced-options, .form-actions { /* ... unchanged ... */ }

/*--------------------------------*\
  #MAIN LAYOUT & CARDS
\*--------------------------------*/

.calculator-grid-container {
    max-width: 1280px; margin: var(--space-6) auto;
    padding: 0 var(--space-4);
    display: grid; grid-template-columns: 1fr;
    gap: var(--space-6); align-items: flex-start;
}
@media (min-width: 768px) { .calculator-grid-container { grid-template-columns: 350px 1fr; } }
@media (min-width: 1024px) { .calculator-grid-container { grid-template-columns: 350px 1fr 300px; } }

.card {
    background-color: var(--color-surface); border: 1px solid var(--color-border);
    border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); overflow: hidden;
}
.input-card, .right-column .card { position: sticky; top: 84px; }
.right-column { display: none; flex-direction: column; gap: var(--space-6); }
@media (min-width: 1024px) { .right-column { display: flex; } }
.card-header { /* ... unchanged ... */ }
.card-body { padding: var(--space-4); }
.card-footer { /* ... unchanged ... */ }

/*--------------------------------*\
  #RESULTS & CHARTS
\*--------------------------------*/

.total-payment-amount { animation: result-fade-in 0.5s ease-out; }
@keyframes result-fade-in { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

.cost-breakdown-section { /* ... unchanged ... */ }
.cost-chart-container { /* ... unchanged ... */ }
.loan-summary { /* ... unchanged ... */ }
.summary-item { /* ... unchanged ... */ }

.market-item .market-rate-value { transition: color var(--transition-fast); }
.market-item.flash-update .market-rate-value { animation: flash-update 1s ease-out; }
@keyframes flash-update { 
    50% { color: var(--color-primary-accent); }
}

.trend-up { color: var(--color-success); }
.trend-down { color: var(--color-error); }

.tab-container, .tab-controls, .tab-btn, .tab-content, .chart-container, .year-slider-group, .insights-list, .insight-item, .table-container { /* ... unchanged ... */ }

/*--------------------------------*\
  #OVERLAYS, NOTIFICATIONS, ETC.
\*--------------------------------*/

.loading-overlay, .spinner, .toast-container, .toast, .voice-status, .voice-wave { /* ... unchanged ... */ }

/*--------------------------------*\
  #PRINT STYLES
\*--------------------------------*/
@media print {
    body {
        background-color: #fff;
        color: #000;
        font-size: 12pt;
    }
    .app-header, .app-footer, .input-card, .right-column, .hero, .card-footer, .tab-controls {
        display: none !important;
    }
    main, .calculator-grid-container, .results-card {
        display: block !important;
        box-shadow: none !important;
        border: none !important;
        margin: 0 !important;
        padding: 0 !important;
    }
    .card-body {
        padding: 0 0 1rem 0 !important;
    }
    .tab-content {
        display: block !important;
        page-break-inside: avoid;
    }
    a {
        text-decoration: none;
        color: #000;
    }
}
